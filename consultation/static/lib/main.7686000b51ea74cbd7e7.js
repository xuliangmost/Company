webpackJsonp([0],{109:function(e,t,a){"use strict";function s(){return{serverAdress:"http://192.168.100.133:8787"}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s},195:function(e,t){},34:function(e,t){},373:function(e,t,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),r=a(0),c=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e){function t(e){s(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loginName:""},a}return n(t,e),i(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("h1",null,"欢迎来到远程视界"))}}]),t}(r.Component);t.default=o},374:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),c=a(0),o=s(c);a(548);var u=a(50),d=(s(u),a(759)),h=s(d),f=a(109),m=s(f),p=a(104),y=(0,m.default)().serverAdress,g=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loginName:""},a}return i(t,e),r(t,[{key:"componentDidMount",value:function(){if(localStorage.getItem("robertUserName")){var e=localStorage.getItem("robertUserName"),t=p(e),a=t.username;this.setState({loginName:a})}}},{key:"cancelLation",value:function(){localStorage.removeItem("history"),localStorage.removeItem("robertUserName"),location.href=y}},{key:"render",value:function(){var e={marginTop:"10px",marginLeft:"10px"};return o.default.createElement("div",{className:"header"},o.default.createElement("a",{href:y+"/#/entrance"},o.default.createElement("img",{style:e,src:h.default,alt:"远程视界机器人"})),this.state.loginName?o.default.createElement("div",{className:"loginName"},o.default.createElement("a",{href:y+"/#/entrance",className:"header_sp1"},"切换系统"),o.default.createElement("span",{className:"header_sp2"}),o.default.createElement("a",{className:"header_sp1"},this.state.loginName),o.default.createElement("span",{className:"header_sp2"}),o.default.createElement("a",{onClick:this.cancelLation.bind(this),className:"header_sp1"},"退出")):"")}}]),t}(c.Component);t.default=g},375:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(414),a(169)),c=s(r),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),u=a(0),d=s(u);a(530);var h=(a(14),a(109)),f=s(h),m=(0,f.default)().serverAdress,p=c.default.SubMenu,y=a(104),g=["6","7","8","9","10","11","12","13","14"],v=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={current:"1",openKeys:["sub1","sub2","sub3","sub4","sub5","sub0"],permissions:[]},a}return i(t,e),o(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){if(localStorage.getItem("robertUserName")){var e=localStorage.getItem("robertUserName"),t=y(e),a=t.permissions;this.setState({permissions:a});var s=!0;console.log(a),a.forEach(function(e,t){-1!==g.indexOf(e)&&(s=!1)}),s&&(alert("您无查看权限!"),location.href=m+"/#/entrance")}}},{key:"handleClick",value:function(e){console.log("Clicked: ",e),this.setState({current:e.key})}},{key:"onOpenChange",value:function(e){var t=this.state,a=e.find(function(e){return!(t.openKeys.indexOf(e)>-1)}),s=t.openKeys.find(function(t){return!(e.indexOf(t)>-1)}),l=[];a&&(l=this.getAncestorKeys(a).concat(a)),s&&(l=this.getAncestorKeys(s)),this.setState({openKeys:l})}},{key:"getAncestorKeys",value:function(e){return{sub0:["sub0"]}[e]||[]}},{key:"render",value:function(){return d.default.createElement("div",{className:"left"},d.default.createElement(c.default,{mode:"inline",openKeys:this.state.openKeys,selectedKeys:[this.state.current],style:{width:260},onOpenChange:this.onOpenChange.bind(this),onClick:this.handleClick.bind(this)},-1!==this.state.permissions.indexOf("6")||-1!==this.state.permissions.indexOf("7")||-1!==this.state.permissions.indexOf("8")?d.default.createElement(p,{key:"sub1",title:d.default.createElement("span",null,"申请会诊")},-1!==this.state.permissions.indexOf("6")?d.default.createElement(c.default.Item,{key:"1",id:"6"},d.default.createElement("a",{href:"#/apply"},"申请会诊")):"",-1!==this.state.permissions.indexOf("7")?d.default.createElement(c.default.Item,{key:"2",id:"7"},d.default.createElement("a",{href:"#/apply/daiShen"},"待审会诊")):"",-1!==this.state.permissions.indexOf("8")?d.default.createElement(c.default.Item,{key:"3",id:"8"},d.default.createElement("a",{href:"#/apply/return/ReturnRecord"},"被退会诊")):""):"",-1!==this.state.permissions.indexOf("9")||-1!==this.state.permissions.indexOf("10")||-1!==this.state.permissions.indexOf("11")?d.default.createElement(p,{key:"sub2",title:d.default.createElement("span",null,"会诊审核")},-1!==this.state.permissions.indexOf("9")?d.default.createElement(c.default.Item,{key:"5",id:"9"},d.default.createElement("a",{href:"#/check/waitCheck/waitCheck"},"待审会诊")):"",-1!==this.state.permissions.indexOf("10")?d.default.createElement(c.default.Item,{key:"6",id:"10"},d.default.createElement("a",{href:"#/check/hadReturn/hadReturn"},"已退会诊")):"",-1!==this.state.permissions.indexOf("11")?d.default.createElement(c.default.Item,{key:"7",id:"11"},d.default.createElement("a",{href:"#/check/checked/checked"},"已审会诊")):""):"",-1!==this.state.permissions.indexOf("12")?d.default.createElement(p,{key:"sub3",title:d.default.createElement("span",null,"会诊任务")},-1!==this.state.permissions.indexOf("12")?d.default.createElement(c.default.Item,{key:"10",id:"12"},d.default.createElement("a",{href:"#/task/consultationTask"},"会诊任务")):""):"",-1!==this.state.permissions.indexOf("13")?d.default.createElement(p,{key:"sub4",title:d.default.createElement("span",null,"作废会诊")},-1!==this.state.permissions.indexOf("13")?d.default.createElement(c.default.Item,{key:"11"},d.default.createElement("a",{href:"#/invalid/invalid",id:"13"},"作废会诊")):""):"",-1!==this.state.permissions.indexOf("14")?d.default.createElement(p,{key:"sub5",title:d.default.createElement("span",null,"会诊")},-1!==this.state.permissions.indexOf("14")?d.default.createElement(c.default.Item,{key:"12",id:"14"},d.default.createElement("a",{href:"#/consulationTables/consulation"},"会诊总表")):""):""))}}]),t}(u.Component);t.default=v},376:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(69),a(68)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(67),a(24)),h=s(d),f=(a(86),a(85)),m=s(f),p=(a(13),a(17)),y=s(p),g=(a(19),a(18)),v=s(g),E=(a(53),a(52)),N=s(E),_=(a(16),a(15)),k=s(_),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),b=a(0),I=s(b),D=a(14);a(195),a(91);var S=a(22),T=s(S),C=a(1),w=(s(C),a(50)),P=s(w),O=a(464),z=(s(O),function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();return t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()+"-"+t+"-"+a}()),q=localStorage.getItem("robertUserName"),j={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"",username:"",phone:"",identification:"",birthday:"",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:z,diagnosis:"",doc:"",file:[],statusId:"1",advice:[{hospital:"",statusId:"1",doctor:"",adviceTime:z,advice:"",prescription:[{id:"0",prescriptionTime:z,doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200},A="YYYY-MM-DD HH:mm:ss",L=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:null,saveCase:!1,userId:null,hospitalId:null,savePrescription:!1,saveConsultationL:!1,saveAdvice:!1,caseId:!1,showPrescription:!1,getData:j,history1:j.case[0],history2:j.case[0].advice[0]?j.case[0].advice[0]:[],centerPrescription:null,mockData:[],targetTitle:[],targetKeys:[],dis:!1,history1Index:0,history2Index:0,columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime"},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"},{title:"操作",key:"action",render:function(e,t,s){return I.default.createElement("span",null,a.state.history1.statusId?I.default.createElement("span",null,0==t.id?I.default.createElement("span",null,I.default.createElement(k.default,{onClick:a.addPrescription.bind(a),className:"addMedicine",type:"primary"},"新增")):I.default.createElement("span",null,I.default.createElement(k.default,{onClick:a.deletePrescription.bind(a,s),className:"addMedicine",type:"primary"},"删除"))):"-")}}],fileListColumns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return I.default.createElement("span",null,a+1," ")}},{title:"文件名",dataIndex:"fileName",key:"fileName"},{title:"大小",dataIndex:"fileSize",key:"fileSize"},{title:"上传时间",dataIndex:"uploadAt",key:"uploadAt",render:function(e){return I.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,s){return I.default.createElement("span",null,I.default.createElement("a",{href:t.url,target:"blank",className:"apply_link"},"查看"),a.state.history1.statusId?I.default.createElement(D.Link,{to:"",onClick:a.deleteFile.bind(a,t.id,s),className:"apply_link"},"删除"):"")}}],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},data:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],docUserId:[],targetdoc:[],fileList:[],selectTime:!1},a}return i(t,e),x(t,[{key:"getPeople",value:function(){var e=this,t=this.state.getData;T.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+q,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){t.consultation.hospital=a.data.result[0].hospitalName,t.consultation.applicant=a.data.result[0].applyName,t.consultation.birthday=a.data.result[0].birthday,e.setState({getData:t,hospitalId:a.data.result[0].hospitalId,selectTime:!1})}).catch(function(){alert("医院信息获取失败，请刷新页面!")})}},{key:"getMsg",value:function(){var e=this,t=[];T.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+q,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=[],r=a.data.result,c=0;c<r.length;c++){var o={key:r[c].doctorId,key1:r[c].userId,title:r[c].doctorName,description:r[c].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(r[c].doctorId)};o.chosen&&(s.push(o.key),l.push(o.key1)),n.push(o)}r.map(function(e,t){i.push(e)});for(var u=[],d=0;d<s.length;d++){var h={};h.doctor=s[d],h.userId=l[d],u.push(h)}var f={};f.consultationId=e.state.consultationId,f.doctorId=u,e.setState({mockData:n,targetKeys:s,targetKeys1:l,docList:r,docId:f,docKeys:s})})}},{key:"getValue",value:function(){var e={consultation:{hospital:"",applicant:"",consultationName:"",startTime:z,username:"",phone:"",identification:"",birthday:"",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:z,diagnosis:"",doc:"",file:[],statusId:"1",advice:[{hospital:"",statusId:"1",doctor:"",adviceTime:z,advice:"",prescription:[{id:"0",prescriptionTime:z,doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200};this.setState({getData:JSON.parse(JSON.stringify(e)),history1:e.case[0],history2:e.case[0].advice[0]}),this.getPeople()}},{key:"componentDidMount",value:function(){this.getMsg(),this.getValue(),window.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"handleKeyDown",value:function(e){27==e.keyCode&&this.setState({showPrescription:!1})}},{key:"deleteFile",value:function(e,t){var a=this;T.default.request({url:"/api/conference/deleteCaseFile",method:"get",params:{caseFileId:e.toString()},headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(e){var s=a.state.getData;s.case[a.state.history1Index].file.splice(t,1);var l=s.case[a.state.history1Index].file;a.setState({fileList:l,getData:s})}).catch(function(){})}},{key:"handleChange",value:function(e){var t=this,a=[],s=e,l=0;this.state.docList.map(function(e,t){if(-1!==s.indexOf(e.doctorId)){var l={};l.user=e.userId.toString(),l.hospitalId=e.hospitalId.toString(),a.push(l)}}),a.map(function(e){e.hospitalId===t.state.hospitalId.toString()&&l++}),l>1&&N.default.warning("同一医院只能选择一名医生!"),this.setState({targetKeys:e,docUserId:a})}},{key:"queDing",value:function(){var e=this,t=0;if(this.state.docUserId.map(function(a){a.hospitalId===e.state.hospitalId.toString()&&t++}),t>1)return N.default.error("同一医院只能选择一名医生!"),!1;if(0===t)return N.default.error("本医院医生未选择!"),!1;for(var a=this.state.targetKeys,s=[],l=[],n=0;n<a.length;n++){var i={};i.doctor=a[n].toString(),s.push(i);for(var r=0;r<this.state.docList.length;r++)a[n]==1*this.state.docList[r].doctorId&&l.push(this.state.docList[r])}var c={};c.consultationId=this.state.consultationId,c.doctorId=s,c.userId=this.state.docUserId;var o=this;T.default.request({url:"/api/conference/edit/doctorlist",method:"POST",data:c,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(e){var t=o.state.getData;t.doctor=l,o.setState({isShow:!1,targetdoc:l,allData:t,docId:c,docKeys:a})}).catch(function(){})}},{key:"renderItem",value:function(e){return{label:I.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"huizhenyisheng",value:function(){this.state.consultationId&&this.setState({isShow:!0})}},{key:"quxiaohuizhenyisheng",value:function(){this.setState({isShow:!1,targetKeys:this.state.docKeys})}},{key:"send",value:function(){if(this.state.saveCase)if(this.state.saveAdvice){if(0==this.state.targetdoc)return alert("会诊医生未选择!"),!1;T.default.request({url:"/api/conference/commit",method:"get",params:{id:this.state.consultationId.toString()},headers:{Authorization:"Bearer "+q,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){200==e.data.code&&(alert("提交成功!"),location.hash="apply")}).catch(function(){alert("提交失败!")})}else alert("当前医嘱未保存!");else alert("当前病历未保存!")}},{key:"changeHistory1",value:function(e){if(!this.state.saveCase&&e!=this.state.history1Index)return alert("当前病历未保存!"),!1;var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription&&this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)});var a=!1;this.state.getData.case[e].statusId&&(a=!0),this.state.getData.case[e].file&&this.state.getData.case[e].file,this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t,caseId:a,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}},{key:"changeHistory2",value:function(e){if(!this.state.saveAdvice&&e!=this.state.history2Index)return alert("当前医嘱未保存!"),!1;var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription&&t.prescription.map(function(e){a.push(e)}),this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,history2Index:e,data:a})}},{key:"addHistory1",value:function(){if(this.state.saveCase){var e=JSON.parse(JSON.stringify(this.state.getData)),t=e.case.length+1,a={sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"",diagnosis:"",doc:"",file:[],statusId:"1",advice:[{hospital:"",doctor:"",adviceTime:"",advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]};a.diagnosisTime=z,e.case.push(a);var s=a,l=a.advice[0],n=a.file;l.adviceTime=z,l.statusId=1;var i=[];i.push(this.state.oldData),this.setState({getData:e,history1:s,history2:l,data:i,history1Index:t-1<0?0:t-1,history2Index:0,saveCase:!1,caseId:!0,fileList:n})}else alert("上一病历未保存!")}},{key:"alertMsg",value:function(){this.state.saveCase||alert("请先保存病历!")}},{key:"changeDiagnosis",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].diagnosis=e.target.value,a.diagnosis=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeName",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].name=e.target.value,a.name=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeSn",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].sn=e.target.value,a.sn=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeHospital",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].hospital=e.target.value,a.hospital=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeDoctor",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].doctor=e.target.value,a.doctor=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeDagnosisTime",value:function(e,t){if(this.state.caseId){var a=this.state.getData,s=this.state.history1;a.case[this.state.history1Index].diagnosisTime=t,s.diagnosisTime=t,this.setState({getData:a,history1:s})}}},{key:"changeAdviceTime",value:function(e,t){if(this.state.saveCase){var a=this.state.getData,s=this.state.history2;a.case[this.state.history1Index].advice[this.state.history2Index].adviceTime=t,s.adviceTime=t,this.setState({getData:a,history2:s})}}},{key:"changeAdvice",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].advice=e.target.value,a.advice=e.target.value,this.setState({getData:t,history2:a})}}},{key:"changeAdviceDoctor",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].doctor=e.target.value,a.doctor=e.target.value,this.setState({getData:t,history2:a})}}},{key:"changeAdviceHospital",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].hospital=e.target.value,a.hospital=e.target.value,this.setState({getData:t,history2:a})}}},{key:"saveCase",value:function(){if(!this.state.saveConsultationL)return alert("请先保存会诊资料!!!"),!1;var e=JSON.parse(JSON.stringify(this.state.getData.case[this.state.history1Index]));if(!e.sn)return alert("病历编号不能为空!!!"),!1;if(!e.hospital)return alert("病例医院不能为空!!!"),!1;var t=JSON.parse(JSON.stringify(e.advice));delete e.advice,e.consultationId=this.state.consultationId,e.userId=this.state.userId,e.id&&(e.id=e.id.toString(),delete e.consultationId,delete e.userId);var a=e.id?"/api/conference/edit/case":"/api/conference/add/case",s=this;T.default.request({url:a,method:"POST",data:e,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(a){a.data.id&&(e.id=a.data.id),e.advice=t;var l=JSON.parse(JSON.stringify(s.state.getData));l.case[s.state.history1Index]=e,s.setState({saveCase:!0,history1:e,getData:l,history2:e.advice?e.advice[0]:null,dis:!0}),alert("病历保存成功!")}).catch(function(){alert("病历保存失败!")})}},{key:"changeConsultationName",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.consultationName=e.target.value,this.setState({getData:t})}},{key:"changesStartTime",value:function(e,t){var a=JSON.parse(JSON.stringify(this.state.getData));a.consultation.startTime=t,this.setState({getData:a})}},{key:"changeUsername",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.username=e.target.value,this.setState({getData:t})}},{key:"changePhone",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.phone=e.target.value,this.setState({getData:t})}},{key:"checkUserId",value:function(){var e=this,t=this.state.getData.consultation.phone;T.default.request({url:"/api/conference/selectWithPhone",method:"get",params:{phone:t},headers:{Authorization:"Bearer "+q,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){if(!1!==t.data.result){var a=e.state.getData,s=a.consultation.hospital,l=a.consultation.applicant,n=a.consultation.consultationName,i=a.consultation.startTime;a.consultation=t.data.result[0],a.consultation.hospital=s,a.consultation.applicant=l,a.consultation.startTime=i,a.consultation.consultationName=n,e.setState({getData:a,userId:a.consultation.id,saveConsultationL:!0})}})}},{key:"changeBirthday",value:function(e,t){var a=JSON.parse(JSON.stringify(this.state.getData));a.consultation.birthday=t,this.setState({getData:a,selectTime:!0})}},{key:"changeFamliyName",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.famliyName=e.target.value,this.setState({getData:t})}},{key:"changeIdentification",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.identification=e.target.value,this.setState({getData:t})}},{key:"changeFamilyPhone",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.familyPhone=e.target.value,this.setState({getData:t})}},{key:"changeContent",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.content=e.target.value,this.setState({getData:t})}},{key:"saveConsulation",value:function(){var e=this.state.getData.consultation;if(P.default.isEmpty(e.consultationName))return alert("会诊名称不能为空!"),!1;if(P.default.isEmpty(e.startTime))return alert("会诊时间不能为空!"),!1;if(!P.default.mobileValidate(e.phone))return alert("手机号不能为空或手机号格式错误!"),!1;if(P.default.isEmpty(e.username))return alert("会诊对象不能为空!"),!1;if(!P.default.cardValidate(e.identification))return alert("身份证号不能为空或身份证号格式填写错误!"),!1;e.birthday||(e.birthday=z),e.userId=this.state.userId?this.state.userId.toString().toString():"",delete e.id,console.log(e);var t=this;T.default.request({url:"/api/conference/add/consultation",method:"POST",data:e,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(a){if(a.data.result){e.id=a.data.id,console.log(a.data.userId);JSON.parse(JSON.stringify(t.state.getData)).consultation=e,t.setState({saveConsultationL:!0,caseId:!0,consultationId:a.data.id.toString(),userId:a.data.userId.toString(),dis:!0}),alert("会诊保存成功!")}}).catch(function(){alert("会诊保存失败!")})}},{key:"saveAdvice",value:function(){if(this.state.saveCase){var e=JSON.parse(JSON.stringify(this.state.getData.case[this.state.history1Index].advice[this.state.history2Index])),t=JSON.parse(JSON.stringify(e.prescription));delete e.prescription,e.id&&(e.id=e.id.toString()),e.caseId=this.state.history1.id.toString();var a=e.id?"/api/conference/edit/advice":"/api/conference/add/advice",s=this;T.default.request({url:a,method:"POST",data:e,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(a){a.data.id&&(e.id=a.data.id),e.prescription=t;var l=JSON.parse(JSON.stringify(s.state.getData));l.case[s.state.history1Index].advice[s.state.history2Index]=e,s.setState({saveCase:!0,history1:l.case[s.state.history1Index],getData:l,history2:e}),alert("医嘱保存成功!")}).catch(function(){alert("医嘱保存失败!")}),this.setState({saveAdvice:!0})}else alert("病历未保存!")}},{key:"addHistory2",value:function(){if(this.state.saveAdvice){var e=this.state.getData,t=e.case[this.state.history1Index].advice.length,a={hospital:"",doctor:"",adviceTime:"",advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]};a.adviceTime=z,a.statusId=1,e.case[this.state.history1Index].advice.push(a);var s=e.case[this.state.history1Index],l=e.case[this.state.history1Index].advice[s.advice.length-1],n=[];n.push(this.state.oldData),this.setState({getData:e,history1:s,history2:l,data:n,history2Index:t,saveAdvice:!1})}else alert("上一医嘱未保存")}},{key:"addPrescription",value:function(){if(this.state.saveAdvice){var e={prescriptionTime:z,doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""};this.setState({showPrescription:!0,centerPrescription:e})}else alert("医嘱未保存!")}},{key:"changeDoctorName",value:function(e){var t=this.state.centerPrescription;t.doctorName=e.target.value,this.setState({centerPrescription:t})}},{key:"changePrescriptionTime",value:function(e,t){var a=this.state.centerPrescription;a.prescriptionTime=t,this.setState({centerPrescription:a})}},{key:"changeMedicineTime",value:function(e){var t=this.state.centerPrescription;t.medicineTime=e.target.value,this.setState({centerPrescription:t})}},{key:"changeTotal",value:function(e){var t=this.state.centerPrescription;t.total=e.target.value,this.setState({centerPrescription:t})}},{key:"changeSingleDose",value:function(e){var t=this.state.centerPrescription;t.singleDose=e.target.value,this.setState({centerPrescription:t})}},{key:"changeFrequency",value:function(e){var t=this.state.centerPrescription;t.frequency=e.target.value,this.setState({centerPrescription:t})}},{key:"deletePrescription",value:function(e){var t=this.state.data,a=this.state.getData,s=this;console.log(a.case[this.state.history1Index].advice[this.state.history2Index].prescription[e].id),T.default.request({url:"/api/conference/delete/prescription",method:"get",params:{id:a.case[s.state.history1Index].advice[s.state.history2Index].prescription[e].id.toString()},headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(l){a.case[s.state.history1Index].advice[s.state.history2Index].prescription.splice(e,1),t.splice(e,1),s.setState({getData:a,data:t})})}},{key:"cancelSaveCF",value:function(){this.setState({showPrescription:!1})}},{key:"closePrescription",value:function(){var e=this.state.centerPrescription;console.log(this.state.history2),e.adId=this.state.history2.id.toString();var t=this;T.default.request({url:"/api/conference/add/prescription",method:"POST",data:e,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(a){e.id=a.data.id;var s=t.state.data;s.unshift(e);var l=t.state.getData;l.case[t.state.history1Index].advice[t.state.history2Index].prescription.unshift(e),t.setState({data:s,getData:l,showPrescription:!1,savePrescription:!0})}).catch(function(){alert("保存处方失败，请检查网络!")})}},{key:"deleteHistory1",value:function(e){if(!this.state.saveCase&&e!=this.state.history1Index)return alert("请先保存病历!"),!1;var t=JSON.parse(JSON.stringify(this.state.getData));if(1==t.case.length){t.case[0]={sn:"",hospital:"",doctor:"",name:"",diagnosisTime:z,diagnosis:"",doc:"",file:[],statusId:1,advice:[{hospital:"",doctor:"",adviceTime:z,advice:"",statusId:1,prescription:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}]}]};var a=t.case[0].advice?t.case[0].advice[0]:null,s=t.case[0].file,l=a.prescription;this.setState({getData:t,history1:t.case[0],history2:a,history1Index:0,history2Index:0,data:l,saveCase:!1,caseId:!0,saveAdvice:!1,fileList:s})}else{t.case[e].statusId&&!0,t.case.splice(e,1),e==t.case.length-1||(e=e<1?0:e-1);var n=t.case[e].advice?t.case[e].advice[0]:null,i=n?n.prescription:[];0==i&&i.push(this.state.oldData),this.setState({getData:t,history1:t.case[e],history2:n,history1Index:e,history2Index:0,data:i,saveCase:!0})}}},{key:"deleteHistory2",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.case[this.state.history1Index].advice.splice(e,1),e=e<1?0:e-1;var a=t.case[this.state.history1Index],s=a.advice?a.advice[e]:null,l=s?s.prescription:[],n=!s;0==l&&l.push(this.state.oldData),this.setState({getData:t,history1:a,history2:s,history2Index:this.state.history2Index-1,data:l,saveAdvice:n})}},{key:"upLoadMsg",value:function(){}},{key:"render",value:function(){var e=this,t={height:document.body.clientHeight},a=this,s=null,l={overflowY:"hidden"},n={width:document.body.clientWidth,height:document.body.clientHeight};this.state.history1.id&&(s=this.state.history1.id.toString());var i={action:"/upload/consultation/"+s,headers:{Authorization:"Bearer "+q},onChange:function(e){var t=e.file,s=e.fileList;if("uploading"!==t.status){if(!a.state.saveCase)return alert("病历未保存!"),!1;if(s.length){var l=a.state.getData;l.case[a.state.history1Index].file=l.case[a.state.history1Index].file?l.case[a.state.history1Index].file:[],l.case[a.state.history1Index].file.push(s[s.length-1].response.result);var n=l.case[a.state.history1Index].file;a.setState({fileList:n,getData:l})}}},defaultFileList:[]};return I.default.createElement("div",{style:this.state.showPrescription?l:this.state.isShow?l:null,className:"newHidden"},this.state.showPrescription?I.default.createElement("div",{style:t,className:"Prescription"},I.default.createElement("div",{className:"showPrescription"},I.default.createElement("ul",null,I.default.createElement("li",null,I.default.createElement("span",null,"开方时间"),I.default.createElement(v.default,{showTime:!0,format:A,onChange:this.changePrescriptionTime.bind(this),size:"large",placeholder:"开方时间"})),I.default.createElement("li",null,I.default.createElement("span",null,"开方医生姓名"),I.default.createElement(y.default,{value:this.state.centerPrescription.doctorName,onChange:this.changeDoctorName.bind(this),size:"large",placeholder:"开方医生姓名"})),I.default.createElement("li",null,I.default.createElement("span",null,"药品名称"),I.default.createElement(y.default,{value:this.state.centerPrescription.medicineTime,onChange:this.changeMedicineTime.bind(this),size:"large",placeholder:"药品名称"})),I.default.createElement("li",null,I.default.createElement("span",null,"总量"),I.default.createElement(y.default,{value:this.state.centerPrescription.total,onChange:this.changeTotal.bind(this),size:"large",placeholder:"总量"})),I.default.createElement("li",null,I.default.createElement("span",null,"单次用量"),I.default.createElement(y.default,{value:this.state.centerPrescription.singleDose,onChange:this.changeSingleDose.bind(this),size:"large",placeholder:"单次用量"})),I.default.createElement("li",null,I.default.createElement("span",null,"频次"),I.default.createElement(y.default,{value:this.state.centerPrescription.frequency,onChange:this.changeFrequency.bind(this),size:"large",placeholder:"频次"}))),I.default.createElement(k.default,{onClick:this.closePrescription.bind(this),className:"transfer_btn1",type:"primary"},"保存处方"),I.default.createElement(k.default,{onClick:this.cancelSaveCF.bind(this),className:"transfer_btn1",type:"primary"},"取消保存"))):"",this.state.isShow?I.default.createElement("div",{style:n,className:"transfer_box"},I.default.createElement("div",{className:"transfer"},I.default.createElement(m.default,{dataSource:this.state.mockData,listStyle:{width:300,height:500},rowKey:function(e){return e.key},targetKeys:this.state.targetKeys,targetKeys1:this.state.targetKeys1,onChange:this.handleChange.bind(this),render:this.renderItem.bind(this)}),I.default.createElement(k.default,{onClick:function(){return e.queDing()},className:"transfer_btn1",type:"primary"},"保存"),I.default.createElement(k.default,{onClick:function(){return e.quxiaohuizhenyisheng()},className:"transfer_btn",type:"primary"},"取消"))):"",I.default.createElement("div",{className:"cnsultation_top"},I.default.createElement("h1",null,"新增会诊"),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"隶属医院"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.hospital,className:"search_input",size:"large",placeholder:"隶属医院"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊申请人"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.applicant,className:"search_input",size:"large",placeholder:"会诊申请人"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊名称"),I.default.createElement(y.default,{value:this.state.getData.consultation.consultationName,onChange:this.changeConsultationName.bind(this),className:"search_input",size:"large",placeholder:"必填",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊时间"),I.default.createElement(v.default,{placeholder:"必填",showTime:!0,format:A,size:"large",className:"search_input",onChange:this.changesStartTime.bind(this)}))),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"手机号"),I.default.createElement(y.default,{value:this.state.getData.consultation.phone,onBlur:this.checkUserId.bind(this),className:"search_input",size:"large",placeholder:"必填",onChange:this.changePhone.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊对象"),I.default.createElement(y.default,{value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeUsername.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"身份证号"),I.default.createElement(y.default,{value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeIdentification.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"出生日期"),I.default.createElement(v.default,{placeholder:"出生日期",format:A,size:"large",className:"search_input",onChange:this.changeBirthday.bind(this)}))),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"陪护家属"),I.default.createElement(y.default,{value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属",onChange:this.changeFamliyName.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"手机号"),I.default.createElement(y.default,{value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号",onChange:this.changeFamilyPhone.bind(this)})),I.default.createElement("li",null),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"会诊描述"),I.default.createElement(y.default,{value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4,onChange:this.changeContent.bind(this)})))),I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{disabled:this.state.dis,onClick:this.saveConsulation.bind(this),className:"btn_save_index_2",type:"primary"},"保存会诊"))),I.default.createElement("div",{className:"cnsultation_bottom"},I.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return I.default.createElement("div",{className:"history_case",key:a},I.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"},"病例 ",a+1," "),I.default.createElement(k.default,{type:"primary",onClick:e.deleteHistory1.bind(e,a),className:"prescribe_btn1 edit_delete",size:"small"},I.default.createElement(h.default,{type:"minus"})))}):"",I.default.createElement(k.default,{onClick:this.addHistory1.bind(this),className:"history_btn1",type:"primary"},I.default.createElement(h.default,{type:"plus"}))),I.default.createElement("div",{className:"history_detail"},I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例编号"),I.default.createElement(y.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeSn.bind(this)})),I.default.createElement("li",null),I.default.createElement("li",null),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例医院"),I.default.createElement(y.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeHospital.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"主治医生"),I.default.createElement(y.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",onChange:this.changeDoctor.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例名称"),I.default.createElement(y.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",onChange:this.changeName.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"诊治日期"),I.default.createElement(v.default,{format:A,size:"large",className:"search_input",onChange:this.changeDagnosisTime.bind(this)}))),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"临床诊断"),I.default.createElement(y.default,{onChange:this.changeDiagnosis.bind(this),value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))),this.state.history1.statusId?I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{onClick:this.saveCase.bind(this),className:"btn_save_index_2",type:"primary"},"保存病历"))):"",I.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return I.default.createElement("div",{key:a},I.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "),I.default.createElement(k.default,{type:"primary",onClick:e.deleteHistory2.bind(e,a),className:"prescribe_btn1 edit_delete",size:"small"},I.default.createElement(h.default,{type:"minus"})))}):"",this.state.caseId?I.default.createElement(k.default,{onClick:this.addHistory2.bind(this),className:"history_btn1",type:"primary"},I.default.createElement(h.default,{type:"plus"})):""),this.state.history2?I.default.createElement("div",{className:"prescribeDetail"},I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱医院"),I.default.createElement(y.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",onChange:this.changeAdviceHospital.bind(this),className:"search_input",size:"large",placeholder:"医嘱医院"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱医生"),I.default.createElement(y.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",onChange:this.changeAdviceDoctor.bind(this),className:"search_input",size:"large",placeholder:"医嘱医生"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱时间"),I.default.createElement(v.default,{format:A,size:"large",className:"search_input",onChange:this.changeAdviceTime.bind(this)})),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"医嘱"),I.default.createElement(y.default,{value:this.state.history2.advice?this.state.history2.advice:"",onChange:this.changeAdvice.bind(this),className:"search_input",type:"textarea",rows:4}))),this.state.history2.statusId?I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{onClick:this.saveAdvice.bind(this),className:"btn_save_index_2",type:"primary"},"保存医嘱"))):"",this.state.data&&this.state.data.length>0?I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),I.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}))):""):"",this.state.fileList?I.default.createElement("div",{className:"record"},I.default.createElement("span",{onClick:this.alertMsg.bind(this),className:"history_sp1 record_sp1"}," 病历资料 "),this.state.caseId?I.default.createElement(c.default,i,I.default.createElement(k.default,{className:"history_btn1"},I.default.createElement(h.default,{type:"upload"}))):"",I.default.createElement(u.default,{rowKey:"id",className:"fileList",columns:this.state.fileListColumns,dataSource:this.state.fileList})):"",I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",{className:"search_li_last"},I.default.createElement("span",{className:"one_title"},"会诊医生"),I.default.createElement(y.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",onFocus:function(){return e.huizhenyisheng()},type:"textarea",rows:4}))),I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{className:"btn_save_index_2",type:"primary",onClick:function(){return e.send()}},"提交"),I.default.createElement(D.Link,{to:"apply"},I.default.createElement(k.default,{type:"primary"},"取消"))))))}}]),t}(b.Component);t.default=L},377:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(69),a(68)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(67),a(24)),h=s(d),f=(a(86),a(85)),m=s(f),p=(a(13),a(17)),y=s(p),g=(a(19),a(18)),v=s(g),E=(a(53),a(52)),N=s(E),_=(a(16),a(15)),k=s(_),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),b=a(0),I=s(b),D=a(14);a(195),a(91);var S=a(22),T=s(S),C=a(50),w=s(C),P=a(1),O=s(P),z=function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();return t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()+"-"+t+"-"+a}(),q=localStorage.getItem("robertUserName"),j={consultation:{hospital:"",applicant:"",consultationName:"",startTime:z,username:"",phone:"",identification:"",birthday:z,famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:z,diagnosis:"",doc:"",file:[],statusId:"1",advice:[{hospital:"",statusId:"1",doctor:"",adviceTime:z,advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200},A="YYYY-MM-DD HH:mm:ss",L=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isShow:!1,hospitalId:null,consultationId:null,saveCase:!0,userId:null,savePrescription:!1,saveConsultationL:!1,saveAdvice:!0,caseId:!0,showPrescription:!1,getData:j,oldPhone:null,centerPrescription:null,mockData:[],targetTitle:[],targetKeys:[],history1:j.case[0],history1Index:0,history2Index:0,history2:j.case[0].advice[0]?j.case[0].advice[0]:[],columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime"},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"},{title:"操作",key:"action",render:function(e,t,s){return I.default.createElement("span",null,a.state.history1.statusId?I.default.createElement("span",null,0==t.id?I.default.createElement("span",null,I.default.createElement(k.default,{onClick:a.addPrescription.bind(a),className:"addMedicine",type:"primary"},"新增")):I.default.createElement("span",null,I.default.createElement(k.default,{onClick:a.deletePrescription.bind(a,s),className:"addMedicine",type:"primary"},"删除"))):"-")}}],fileListColumns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return I.default.createElement("span",null,a+1," ")}},{title:"文件名",dataIndex:"fileName",key:"fileName"},{title:"大小",dataIndex:"fileSize",key:"fileSize"},{title:"上传时间",dataIndex:"uploadAt",key:"uploadAt"},{title:"操作",key:"action",render:function(e,t,s){return I.default.createElement("span",null,I.default.createElement("a",{href:t.url,target:"blank",className:"apply_link"},"查看"),a.state.history1.statusId?I.default.createElement(D.Link,{to:"",onClick:a.deleteFile.bind(a,t.id,s),className:"apply_link"},"删除"):"")}}],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},data:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],docUserId:[],targetdoc:[],fileList:null,dis:!1},a}return i(t,e),x(t,[{key:"getPeople",value:function(){var e=this;T.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+q,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){e.setState({hospitalId:t.data.result[0].hospitalId})})}},{key:"getValue",value:function(){var e=this,t=[];T.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id.toString()},headers:{Authorization:"Bearer "+q,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data,l=[],n=[];s.case&&0!=s.case?(0!=s.case[0].advice&&s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}),n=s.case[0].file?s.case[0].file:[]):(!0,s.case=j.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)})),s.consultationId=e.props.params.id,e.setState({getData:s,history1:s.case[0],history2:s.case[0].advice?s.case[0].advice[0]:null,targetdoc:s.doctor,data:l,fileList:n,oldPhone:s.consultation.phone,userId:s.consultation.userId}),e.getPeople(),T.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+q,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=a.data.result,r=0;r<i.length;r++){var c={key:i[r].doctorId,title:i[r].doctorName,description:i[r].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(i[r].doctorId)};c.chosen&&s.push(c.key),l.push(c)}i.map(function(e,t){n.push(e)});for(var o=[],u=0;u<s.length;u++){var d={};d.doctor=s[u],o.push(d)}var h={};h.consultationId=e.state.consultationId,h.doctorId=o,e.setState({mockData:l,targetKeys:s,docList:i,docId:h,docKeys:s})})}).catch(function(){})}},{key:"componentDidMount",value:function(){this.getValue(),window.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"handleKeyDown",value:function(e){27==e.keyCode&&this.setState({showPrescription:!1})}},{key:"deleteFile",value:function(e,t){var a=this;T.default.request({url:"/api/conference/deleteCaseFile",method:"get",params:{caseFileId:e.toString()},headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(e){var s=a.state.getData;s.case[a.state.history1Index].file.splice(t,1);var l=s.case[a.state.history1Index].file;a.setState({fileList:l,getData:s})}).catch(function(){})}},{key:"handleChange",value:function(e){var t=this,a=[],s=e,l=0;this.state.docList.map(function(e,t){if(-1!==s.indexOf(e.doctorId)){var l={};l.user=e.userId.toString(),l.hospitalId=e.hospitalId.toString(),a.push(l)}}),a.map(function(e){e.hospitalId===t.state.hospitalId.toString()&&l++}),l>1&&N.default.warning("同一医院只能选择一名医生!"),this.setState({targetKeys:e,docUserId:a})}},{key:"queDing",value:function(){var e=this,t=0;if(this.state.docUserId.map(function(a){a.hospitalId===e.state.hospitalId.toString()&&t++}),t>1)return N.default.error("同一医院只能选择一名医生!"),!1;if(0===t)return N.default.error("本医院医生未选择!"),!1;for(var a=this.state.targetKeys,s=[],l=[],n=0;n<a.length;n++){var i={};i.doctor=a[n].toString(),s.push(i);for(var r=0;r<this.state.docList.length;r++)a[n]==1*this.state.docList[r].doctorId&&l.push(this.state.docList[r])}var c={};c.consultationId=this.state.consultationId,c.doctorId=s;var o=this;T.default.request({url:"/api/conference/edit/doctorlist",method:"POST",data:c,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(e){var t=o.state.getData;t.doctor=l,o.setState({isShow:!1,targetdoc:l,allData:t,docId:c,docKeys:a})}).catch(function(){})}},{key:"renderItem",value:function(e){return{label:I.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"huizhenyisheng",value:function(){this.setState({isShow:!0})}},{key:"quxiaohuizhenyisheng",value:function(){this.setState({isShow:!1,targetKeys:this.state.docKeys})}},{key:"send",value:function(){if(!this.state.consultationId)return alert("请先保存您的会诊资料!"),!1;if(this.state.saveCase)if(this.state.saveAdvice){if(0==this.state.targetdoc)return alert("会诊医生未选择!"),!1;T.default.request({url:"/api/conference/commit",method:"get",params:{id:this.state.consultationId.toString()},headers:{Authorization:"Bearer "+q,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){200==e.data.code&&(alert("提交成功!"),location.hash="apply")}).catch(function(){alert("提交失败!")})}else alert("当前医嘱未保存!");else alert("当前病历未保存!")}},{key:"changeHistory1",value:function(e){if(!this.state.saveCase&&e!=this.state.history1Index)return alert("当前病历未保存!"),!1;var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription&&this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)});var a=!1;this.state.getData.case[e].statusId&&(a=!0),this.state.getData.case[e].file&&this.state.getData.case[e].file,this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t,caseId:a,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}},{key:"changeHistory2",value:function(e){if(!this.state.saveAdvice&&e!=this.state.history2Index)return alert("当前医嘱未保存!"),!1;var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription&&t.prescription.map(function(e){a.push(e)}),this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,history2Index:e,data:a})}},{key:"addHistory1",value:function(){if(this.state.saveCase){var e=JSON.parse(JSON.stringify(this.state.getData)),t=e.case.length+1,a={sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"",diagnosis:"",doc:"",file:[],statusId:"1",advice:[{hospital:"",doctor:"",adviceTime:"",advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]};a.diagnosisTime=z,e.case.push(a);var s=a,l=a.advice[0],n=a.file;l.adviceTime=z,l.statusId=1;var i=[];i.push(this.state.oldData),this.setState({getData:e,history1:s,history2:l,data:i,history1Index:t-1<0?0:t-1,history2Index:0,saveCase:!1,caseId:!0,fileList:n})}else alert("上一病历未保存!")}},{key:"alertMsg",value:function(){this.state.saveCase||alert("请先保存病历!")}},{key:"changeDiagnosis",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].diagnosis=e.target.value,a.diagnosis=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeName",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].name=e.target.value,a.name=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeSn",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].sn=e.target.value,a.sn=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeHospital",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].hospital=e.target.value,a.hospital=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeDoctor",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].doctor=e.target.value,a.doctor=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeDagnosisTime",value:function(e,t){if(this.state.caseId){var a=this.state.getData,s=this.state.history1;a.case[this.state.history1Index].diagnosisTime=t,s.diagnosisTime=t,this.setState({getData:a,history1:s})}}},{key:"changeAdviceTime",value:function(e,t){if(this.state.saveCase){var a=this.state.getData,s=this.state.history2;a.case[this.state.history1Index].advice[this.state.history2Index].adviceTime=t,s.adviceTime=t,this.setState({getData:a,history2:s})}}},{key:"changeAdvice",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].advice=e.target.value,a.advice=e.target.value,this.setState({getData:t,history2:a})}}},{key:"changeAdviceDoctor",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].doctor=e.target.value,a.doctor=e.target.value,this.setState({getData:t,history2:a})}}},{key:"changeAdviceHospital",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].hospital=e.target.value,a.hospital=e.target.value,this.setState({getData:t,history2:a})}}},{key:"saveCase",value:function(){if(!this.state.saveConsultationL)return alert("请先保存会诊资料!!!"),!1;var e=JSON.parse(JSON.stringify(this.state.getData.case[this.state.history1Index]));if(!e.sn)return alert("病例医院不能为空!!!"),!1;if(!e.hospital)return alert("病例医院不能为空!!!"),!1;var t=JSON.parse(JSON.stringify(e.advice));delete e.advice,e.id=this.state.consultationId,e.userId=this.state.getData.consultation.userId.toString(),e.id&&(e.id=e.id.toString(),delete e.consultationId,delete e.userId);var a=e.id?"/api/conference/edit/case":"/api/conference/add/case",s=this;T.default.request({url:a,method:"POST",data:e,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(a){a.data.id&&(e.id=a.data.id),e.advice=t;var l=JSON.parse(JSON.stringify(s.state.getData));l.case[s.state.history1Index]=e,s.setState({saveCase:!0,history1:e,getData:l,history2:e.advice?e.advice[0]:null}),alert("病历保存成功!")}).catch(function(){alert("病历保存失败!")})}},{key:"changeConsultationName",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.consultationName=e.target.value,this.setState({getData:t})}},{key:"changesStartTime",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.startTime=e,this.setState({getData:t})}},{key:"changeUsername",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.username=e.target.value,this.setState({getData:t})}},{key:"changePhone",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.phone=e.target.value,this.setState({getData:t})}},{key:"checkUserId",value:function(){var e=this,t=this.state.getData.consultation.phone;this.state.oldPhone;T.default.request({url:"/api/conference/selectWithPhone",method:"get",params:{phone:t},headers:{Authorization:"Bearer "+q,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){var s=e.state.getData,l=s.consultation.hospital,n=s.consultation.applicant,i=s.consultation.consultationName,r=s.consultation.startTime,c=!1,o=[];0!=a.data.result&&(s.consultation=a.data.result[0],s.consultation.hospital=l,s.consultation.applicant=n,s.consultation.startTime=r,s.consultation.consultationName=i),parseFloat(t)==parseFloat(e.state.oldPhone)||(c=!0,s.case=j.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){o.push(e)})),e.setState({getData:s,history1:s.case[0],history2:s.case[0].advice?s.case[0].advice[0]:null,userId:s.consultation.id,saveConsultationL:!1,saveCase:!1,caseId:c,data:o,fileList:[],saveAdvice:!1})})}},{key:"changeBirthday",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.birthday=e,this.setState({getData:t})}},{key:"changeFamliyName",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.famliyName=e.target.value,this.setState({getData:t})}},{key:"changeIdentification",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.identification=e.target.value,this.setState({getData:t})}},{key:"changeFamilyPhone",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.familyPhone=e.target.value,this.setState({getData:t})}},{key:"changeContent",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.consultation.content=e.target.value,this.setState({getData:t})}},{key:"saveConsulation",value:function(){var e=this.state.getData.consultation;if(w.default.isEmpty(e.consultationName))return alert("会诊名称不能为空!"),!1;if(w.default.isEmpty(e.startTime))return alert("会诊时间不能为空!"),!1;if(!w.default.mobileValidate(e.phone))return alert("手机号不能为空或手机号格式错误!"),!1;if(w.default.isEmpty(e.username))return alert("会诊对象不能为空!"),!1;if(!w.default.cardValidate(e.identification))return alert("身份证号不能为空或身份证号格式填写错误!"),!1;if(w.default.isEmpty(e.birthday))return alert("出生日期不能为空!"),!1;e.birthday||(e.birthday=z),e.userId=this.state.userId?this.state.userId.toString().toString():"",delete e.id,console.log(e);var t=this;T.default.request({url:"/api/conference/add/consultation",method:"POST",data:e,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(a){e.id=a.data.id,JSON.parse(JSON.stringify(t.state.getData)).consultation=e,t.setState({saveConsultationL:!0,caseId:!0,consultationId:a.data.id.toString(),dis:!0}),alert("会诊保存成功!")}).catch(function(){alert("会诊保存失败!")})}},{key:"saveAdvice",value:function(){if(this.state.saveCase){var e=JSON.parse(JSON.stringify(this.state.getData.case[this.state.history1Index].advice[this.state.history2Index])),t=JSON.parse(JSON.stringify(e.prescription));delete e.prescription,e.id&&(e.id=e.id.toString()),e.caseId=this.state.history1.id.toString();var a=e.id?"/api/conference/edit/advice":"/api/conference/add/advice",s=this;T.default.request({url:a,method:"POST",data:e,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(a){a.data.id&&(e.id=a.data.id),e.prescription=t;var l=JSON.parse(JSON.stringify(s.state.getData));l.case[s.state.history1Index].advice[s.state.history2Index]=e,s.setState({saveCase:!0,history1:l.case[s.state.history1Index],getData:l,history2:e}),alert("医嘱保存成功!")}).catch(function(){alert("医嘱保存失败!")}),this.setState({saveAdvice:!0})}else alert("病历未保存!")}},{key:"addHistory2",value:function(){if(this.state.saveAdvice){var e=this.state.getData,t=e.case[this.state.history1Index].advice.length,a={hospital:"",doctor:"",adviceTime:"",advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]};a.adviceTime=z,a.statusId=1,e.case[this.state.history1Index].advice.push(a);var s=e.case[this.state.history1Index],l=e.case[this.state.history1Index].advice[s.advice.length-1],n=[];n.push(this.state.oldData),this.setState({getData:e,history1:s,history2:l,data:n,history2Index:t,saveAdvice:!1})}else alert("上一医嘱未保存")}},{key:"addPrescription",value:function(){if(this.state.saveAdvice){var e={prescriptionTime:z,doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""};this.setState({showPrescription:!0,centerPrescription:e})}else alert("医嘱未保存!")}},{key:"changeDoctorName",value:function(e){var t=this.state.centerPrescription;t.doctorName=e.target.value,this.setState({centerPrescription:t})}},{key:"changePrescriptionTime",value:function(e,t){var a=this.state.centerPrescription;a.prescriptionTime=t,this.setState({centerPrescription:a})}},{key:"changeMedicineTime",value:function(e){var t=this.state.centerPrescription;t.medicineTime=e.target.value,this.setState({centerPrescription:t})}},{key:"changeTotal",value:function(e){var t=this.state.centerPrescription;t.total=e.target.value,this.setState({centerPrescription:t})}},{key:"changeSingleDose",value:function(e){var t=this.state.centerPrescription;t.singleDose=e.target.value,this.setState({centerPrescription:t})}},{key:"changeFrequency",value:function(e){var t=this.state.centerPrescription;t.frequency=e.target.value,this.setState({centerPrescription:t})}},{key:"deletePrescription",value:function(e){var t=this.state.data,a=this.state.getData,s=this;console.log(a.case[this.state.history1Index].advice[this.state.history2Index].prescription[e].id),T.default.request({url:"/api/conference/delete/prescription",method:"get",params:{id:a.case[s.state.history1Index].advice[s.state.history2Index].prescription[e].id.toString()},headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(l){a.case[s.state.history1Index].advice[s.state.history2Index].prescription.splice(e,1),t.splice(e,1),s.setState({getData:a,data:t})})}},{key:"cancelSaveCF",value:function(){this.setState({showPrescription:!1})}},{key:"closePrescription",value:function(){var e=this.state.centerPrescription;e.adId=this.state.history2.id.toString();var t=this;T.default.request({url:"/api/conference/add/prescription",method:"POST",data:e,headers:{Authorization:"Bearer "+q,"Content-Type":"application/json"}}).then(function(a){e.id=a.data.id;var s=t.state.data;s.unshift(e);var l=t.state.getData;l.case[t.state.history1Index].advice[t.state.history2Index].prescription.unshift(e),t.setState({data:s,getData:l,showPrescription:!1,savePrescription:!0})}).catch(function(){alert("保存处方失败，请检查网络!")})}},{key:"deleteHistory1",value:function(e){if(!this.state.saveCase&&e!=this.state.history1Index)return alert("请先保存病历!"),!1;var t=JSON.parse(JSON.stringify(this.state.getData));if(1==t.case.length){t.case[0]={sn:"",hospital:"",doctor:"",name:"",diagnosisTime:z,diagnosis:"",doc:"",file:[],statusId:1,advice:[{hospital:"",doctor:"",adviceTime:z,advice:"",statusId:1,prescription:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}]}]};var a=t.case[0].advice?t.case[0].advice[0]:null,s=t.case[0].file,l=a.prescription;this.setState({getData:t,history1:t.case[0],history2:a,history1Index:0,history2Index:0,data:l,saveCase:!1,caseId:!0,saveAdvice:!1,fileList:s})}else{t.case[e].statusId&&!0,t.case.splice(e,1),e==t.case.length-1||(e=e<1?0:e-1);var n=t.case[e].advice?t.case[e].advice[0]:null,i=n?n.prescription:[];0==i&&i.push(this.state.oldData),this.setState({getData:t,history1:t.case[e],history2:n,history1Index:e,history2Index:0,data:i,saveCase:!0,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}}},{key:"deleteHistory2",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.case[this.state.history1Index].advice.splice(e,1),e=e<1?0:e-1;var a=t.case[this.state.history1Index],s=a.advice?a.advice[e]:null,l=s?s.prescription:[],n=!s;0==l&&l.push(this.state.oldData),this.setState({getData:t,history1:a,history2:s,history2Index:this.state.history2Index-1,data:l,saveAdvice:n})}},{key:"upLoadMsg",value:function(){}},{key:"render",value:function(){var e=this,t={height:document.body.clientHeight},a={height:document.body.offsetHeight},s={overflowY:"hidden"},l=this,n=null;this.state.history1.id&&(n=this.state.history1.id.toString());var i={action:"/upload/consultation/"+n,headers:{Authorization:"Bearer "+q},onChange:function(e){var t=e.file,a=e.fileList;if("uploading"!==t.status){if(!l.state.saveCase)return alert("病历未保存!"),!1;if(a.length){var s=l.state.getData;s.case[l.state.history1Index].file=s.case[l.state.history1Index].file?s.case[l.state.history1Index].file:[],s.case[l.state.history1Index].file.push(a[a.length-1].response.result);var n=s.case[l.state.history1Index].file;l.setState({fileList:n,getData:s})}}},defaultFileList:[]};return I.default.createElement("div",{style:this.state.showPrescription?s:this.state.isShow?s:null,className:"newHidden"},this.state.showPrescription?I.default.createElement("div",{style:t,className:"Prescription"},I.default.createElement("div",{className:"showPrescription"},I.default.createElement("ul",null,I.default.createElement("li",null,I.default.createElement("span",null,"开方时间"),I.default.createElement(v.default,{allowClear:!1,showTime:!0,format:A,onChange:this.changePrescriptionTime.bind(this),size:"large",placeholder:"开方医生姓名"})),I.default.createElement("li",null,I.default.createElement("span",null,"开方医生姓名"),I.default.createElement(y.default,{value:this.state.centerPrescription.doctorName,onChange:this.changeDoctorName.bind(this),size:"large",placeholder:"开方医生姓名"})),I.default.createElement("li",null,I.default.createElement("span",null,"药品名称"),I.default.createElement(y.default,{value:this.state.centerPrescription.medicineTime,onChange:this.changeMedicineTime.bind(this),size:"large",placeholder:"药品名称"})),I.default.createElement("li",null,I.default.createElement("span",null,"总量"),I.default.createElement(y.default,{value:this.state.centerPrescription.total,onChange:this.changeTotal.bind(this),size:"large",placeholder:"总量"})),I.default.createElement("li",null,I.default.createElement("span",null,"单次用量"),I.default.createElement(y.default,{value:this.state.centerPrescription.singleDose,onChange:this.changeSingleDose.bind(this),size:"large",placeholder:"单次用量"})),I.default.createElement("li",null,I.default.createElement("span",null,"频次"),I.default.createElement(y.default,{value:this.state.centerPrescription.frequency,onChange:this.changeFrequency.bind(this),size:"large",placeholder:"频次"}))),I.default.createElement(k.default,{onClick:this.closePrescription.bind(this),className:"transfer_btn1",type:"primary"},"保存处方"),I.default.createElement(k.default,{onClick:this.cancelSaveCF.bind(this),className:"transfer_btn1",type:"primary"},"取消保存"))):"",this.state.isShow?I.default.createElement("div",{style:a,className:"transfer_box"},I.default.createElement("div",{className:"transfer"},I.default.createElement(m.default,{dataSource:this.state.mockData,listStyle:{width:300,height:500},rowKey:function(e){return e.key},targetKeys:this.state.targetKeys,onChange:this.handleChange.bind(this),render:this.renderItem.bind(this)}),I.default.createElement(k.default,{onClick:function(){return e.queDing()},className:"transfer_btn1",type:"primary"},"保存"),I.default.createElement(k.default,{onClick:function(){return e.quxiaohuizhenyisheng()},className:"transfer_btn",type:"primary"},"取消"))):"",I.default.createElement("div",{className:"cnsultation_top"},I.default.createElement("h1",null,"副本会诊"),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"隶属医院"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊申请人"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊名称"),I.default.createElement(y.default,{value:this.state.getData.consultation.consultationName,onChange:this.changeConsultationName.bind(this),className:"search_input",size:"large",placeholder:"必填",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊时间"),I.default.createElement(v.default,{showTime:!0,allowClear:!1,value:(0,O.default)(this.state.getData.consultation.startTime,A),format:A,size:"large",className:"search_input",onChange:this.changesStartTime.bind(this)}))),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"手机号"),I.default.createElement(y.default,{value:this.state.getData.consultation.phone,onBlur:this.checkUserId.bind(this),className:"search_input",size:"large",placeholder:"必填",onChange:this.changePhone.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊对象"),I.default.createElement(y.default,{value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeUsername.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"身份证号"),I.default.createElement(y.default,{value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeIdentification.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"出生日期"),I.default.createElement(v.default,{allowClear:!1,value:(0,O.default)(this.state.getData.consultation.birthday,A),format:A,size:"large",className:"search_input",onChange:this.changeBirthday.bind(this)}))),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"陪护家属"),I.default.createElement(y.default,{value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属",onChange:this.changeFamliyName.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"手机号"),I.default.createElement(y.default,{value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号",onChange:this.changeFamilyPhone.bind(this)})),I.default.createElement("li",null),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"会诊描述"),I.default.createElement(y.default,{value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4,onChange:this.changeContent.bind(this)})))),I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{disabled:this.state.dis,onClick:this.saveConsulation.bind(this),className:"btn_save_index_2",type:"primary"},"保存会诊"))),I.default.createElement("div",{className:"cnsultation_bottom"},I.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return I.default.createElement("div",{className:"history_case",key:a},I.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"},"病例 ",a+1," "),I.default.createElement(k.default,{type:"primary",onClick:e.deleteHistory1.bind(e,a),className:"prescribe_btn1 edit_delete",size:"small"},I.default.createElement(h.default,{type:"minus"})))}):"",I.default.createElement(k.default,{onClick:this.addHistory1.bind(this),className:"history_btn1",type:"primary"},I.default.createElement(h.default,{type:"plus"}))),I.default.createElement("div",{className:"history_detail"},I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例编号"),I.default.createElement(y.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeSn.bind(this)})),I.default.createElement("li",null),I.default.createElement("li",null),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例医院"),I.default.createElement(y.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeHospital.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"主治医生"),I.default.createElement(y.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",onChange:this.changeDoctor.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例名称"),I.default.createElement(y.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",onChange:this.changeName.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"诊治日期"),I.default.createElement(v.default,{allowClear:!1,value:(0,O.default)(this.state.history1.diagnosisTime,A),format:A,size:"large",className:"search_input",onChange:this.changeDagnosisTime.bind(this)}))),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"临床诊断"),I.default.createElement(y.default,{onChange:this.changeDiagnosis.bind(this),value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))),I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{onClick:this.saveCase.bind(this),className:"btn_save_index_2",type:"primary"},"保存病历"))),I.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return I.default.createElement("div",{key:a},I.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "),I.default.createElement(k.default,{type:"primary",onClick:e.deleteHistory2.bind(e,a),className:"prescribe_btn1 edit_delete",size:"small"},I.default.createElement(h.default,{type:"minus"})))}):"",this.state.caseId?I.default.createElement(k.default,{onClick:this.addHistory2.bind(this),className:"history_btn1",type:"primary"},I.default.createElement(h.default,{type:"plus"})):""),this.state.history2?I.default.createElement("div",{className:"prescribeDetail"},I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱医院"),I.default.createElement(y.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",onChange:this.changeAdviceHospital.bind(this),className:"search_input",size:"large",placeholder:"医嘱医院"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱医生"),I.default.createElement(y.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",onChange:this.changeAdviceDoctor.bind(this),className:"search_input",size:"large",placeholder:"医嘱医生"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱时间"),I.default.createElement(v.default,{allowClear:!1,value:(0,O.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",A),format:A,size:"large",className:"search_input",onChange:this.changeAdviceTime.bind(this)})),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"医嘱"),I.default.createElement(y.default,{value:this.state.history2.advice?this.state.history2.advice:"",onChange:this.changeAdvice.bind(this),className:"search_input",type:"textarea",rows:4}))),I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{onClick:this.saveAdvice.bind(this),className:"btn_save_index_2",type:"primary"},"保存医嘱"))),this.state.data&&this.state.data.length>0?I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),I.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}))):""):"",I.default.createElement("div",{className:"record"},I.default.createElement("span",{onClick:this.alertMsg.bind(this),className:"history_sp1 record_sp1"}," 病历资料 "),I.default.createElement(c.default,i,I.default.createElement(k.default,{className:"history_btn1"},I.default.createElement(h.default,{type:"upload"}))),this.state.fileList?I.default.createElement(u.default,{rowKey:"id",className:"fileList",columns:this.state.fileListColumns,dataSource:this.state.fileList}):""),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",{className:"search_li_last"},I.default.createElement("span",{className:"one_title"},"会诊医生"),I.default.createElement(y.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",onFocus:function(){return e.huizhenyisheng()},type:"textarea",rows:4}))),I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{className:"btn_save_index_2",type:"primary",onClick:function(){return e.send()}},"提交"),I.default.createElement(D.Link,{to:"apply"},I.default.createElement(k.default,{type:"primary"},"取消"))))))}}]),t}(b.Component);t.default=L},378:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(21),a(20)),c=s(r),o=(a(19),a(18)),u=s(o),d=(a(13),a(17)),h=s(d),f=(a(16),a(15)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14);a(75);var E=a(22),N=s(E),_=localStorage.getItem("robertUserName"),k=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));!function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()}();return a.state={applyPage:{pageSize:10,consultationName:"",username:"",phone:"",status:"1",startTime:""},total:10,current:1,columns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return g.default.createElement("span",null,a+1)}},{title:"会诊名称",dataIndex:"title",key:"title"},{title:"会诊时间",dataIndex:"startTime",key:"startTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"会诊对象",dataIndex:"username",key:"username"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"创建时间",dataIndex:"creatAt",key:"creatAt",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,s){return g.default.createElement("span",{key:t.id},g.default.createElement(v.Link,{to:"apply/editCnsulation/"+t.id},"编辑"),g.default.createElement(v.Link,{to:"",className:"apply_link",onClick:function(){return a.deleteRecord(t.id)}},"删除"),g.default.createElement(v.Link,{className:"apply_link",to:"apply/addConsultation/"+t.id},"创建副本"))}}],dataSource:[]},a}return i(t,e),p(t,[{key:"componentDidMount",value:function(){this.query(1)}},{key:"push",value:function(e,t){var a=this;N.default.request({url:"/api/conference/commit",method:"get",params:{id:e},headers:{Authorization:"Bearer "+_,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){a.query()}).catch(function(){alert("数据提交失败!")})}},{key:"changePage",value:function(e){this.query(e),this.setState({current:e})}},{key:"deleteRecord",value:function(e){var t=this;N.default.request({url:"/api/conference/delete/consultation",method:"get",params:{id:e},headers:{Authorization:"Bearer "+_,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){t.query(1)}).catch(function(){alert("数据提交失败，请检查网络!")})}},{key:"onChange",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a})}},{key:"changeConsultationName",value:function(e){var t=this.state.applyPage;t.consultationName=e.target.value,this.setState({applyPage:t})}},{key:"changeUsername",value:function(e){var t=this.state.applyPage;t.username=e.target.value,this.setState({applyPage:t})}},{key:"changePhone",value:function(e){var t=this.state.applyPage;t.phone=e.target.value,this.setState({applyPage:t})}},{key:"query",value:function(e){var t=this,a=this.state.applyPage;a.pageNum=e,N.default.request({url:"/api/conference/applyPageList",method:"get",params:a,headers:{Authorization:"Bearer "+_,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){var a=e.data.result?e.data.result.data:[];t.setState({dataSource:a,total:e.data.result.count})})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",null,g.default.createElement("div",{className:"apple_top"},g.default.createElement("h1",null,"查询区",g.default.createElement(m.default,{type:"primary",onClick:function(){return e.query()},className:"search_btn1"},"查询")),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(h.default,{value:this.state.applyPage.consultationName,onChange:this.changeConsultationName.bind(this),className:"search_input",size:"large",placeholder:"会诊名称"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(u.default,{allowClear:!0,size:"large",className:"search_input",onChange:this.onChange.bind(this)})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊对象"),g.default.createElement(h.default,{value:this.state.applyPage.username,onChange:this.changeUsername.bind(this),className:"search_input",size:"large",placeholder:"会诊对象"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(h.default,{value:this.state.applyPage.phone,onChange:this.changePhone.bind(this),className:"search_input",size:"large",placeholder:"手机号"})))),g.default.createElement("div",{className:"apple_bottom"},g.default.createElement("h1",{className:"most_h1"},"列表区",g.default.createElement(v.Link,{to:"apply/newConsultation"},g.default.createElement(m.default,{type:"primary",className:"search_btn2"},"新增"))),g.default.createElement(c.default,{pagination:{defaultPageSize:10,showQuickJumper:!0,onChange:this.changePage.bind(this),total:this.state.total,current:this.state.current},rowKey:"id",dataSource:this.state.dataSource,columns:this.state.columns})))}}]),t}(y.Component);t.default=k},379:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(21),a(20)),c=s(r),o=(a(19),a(18)),u=s(o),d=(a(13),a(17)),h=s(d),f=(a(16),a(15)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14),E=a(1),N=(s(E),a(22)),_=s(N),k=localStorage.getItem("robertUserName"),x=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));!function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()}();return a.state={applyPage:{pageSize:10,consultationName:"",username:"",phone:"",status:2,startTime:""},total:10,current:1,dataSource:[],columns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return g.default.createElement("span",null,a+1)}},{title:"会诊名称",dataIndex:"title",key:"title"},{title:"会诊时间",dataIndex:"startTime",key:"startTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"会诊对象",dataIndex:"username",key:"username"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"提交时间",dataIndex:"modifyAt",key:"modifyAt",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,a){return g.default.createElement("span",{key:t.id},g.default.createElement(v.Link,{to:"apply/daiShen/looked/"+t.id},"查看"))}}]},a}return i(t,e),p(t,[{key:"componentDidMount",value:function(){this.query(1)}},{key:"query",value:function(e){var t=this,a=this.state.applyPage;a.pageNum=e,_.default.request({url:"/api/conference/applyPageList",method:"get",params:a,headers:{Authorization:"Bearer "+k,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){console.log("response: ",e);var a=e.data.result?e.data.result.data:[];console.log("dataSource: ",a),t.setState({dataSource:a,total:e.data.result.count})})}},{key:"changePage",value:function(e){this.query(e),this.setState({current:e})}},{key:"onChange",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",null,g.default.createElement("div",{className:"apple_top"},g.default.createElement("h1",null,"查询区",g.default.createElement(m.default,{onClick:function(){return e.query()},type:"primary",className:"search_btn1"},"查询")),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(h.default,{className:"search_input",size:"large",placeholder:"会诊名称"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(u.default,{size:"large",className:"search_input",onChange:this.onChange.bind(this)})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊对象"),g.default.createElement(h.default,{className:"search_input",size:"large",placeholder:"会诊对象"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(h.default,{className:"search_input",size:"large",placeholder:"手机号"})))),g.default.createElement("div",{className:"apple_bottom"},g.default.createElement("h1",{className:"most_h1"},"列表区"),g.default.createElement(c.default,{pagination:{defaultPageSize:10,showQuickJumper:!0,onChange:this.changePage.bind(this),total:this.state.total,current:this.state.current},rowKey:"id",dataSource:this.state.dataSource,columns:this.state.columns})))}}]),t}(y.Component);t.default=x},380:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(16),a(15)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(19),a(18)),h=s(d),f=(a(13),a(17)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14);a(34);var E=a(22),N=s(E),_=a(1),k=s(_),x=localStorage.getItem("robertUserName"),b={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"0-0-0 00:00:00.000",username:"",phone:"",identification:"",birthday:"0-0-0 00:00:00.000",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"2999-12-31 00:00:00.000",diagnosis:"",doc:"",advice:[{hospital:"",doctor:"",adviceTime:"2999-12-31 00:00:00.000",advice:"","处方":[{prescriptionTime:"2999-12-31 00:00:00.000",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200},I="YYYY-MM-DD HH:mm:ss",D=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:null,getData:b,mockData:[],targetTitle:[],targetKeys:[],history1:b.case[0],history1Index:0,history2:b.case[0].advice[0]?b.case[0].advice[0]:[],columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"}],fileListColumns:[{title:"文件名",dataIndex:"fileName",key:"fileName"},{title:"大小",dataIndex:"fileSize",key:"fileSize"},{title:"上传时间",dataIndex:"uploadAt",key:"uploadAt",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t){return g.default.createElement("span",null,g.default.createElement("a",{className:"apply_link",href:t.url,download:t.fileName},"下载"),g.default.createElement("a",{className:"apply_link",href:t.url,target:"blank"},"查看"))}}],fileList:[],checkColumns:[{title:"审核时间",dataIndex:"checkTime",key:"checkTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"assistantName",key:"assistantName",width:"126px"},{title:"审核结果",dataIndex:"checkResult",key:"checkResult",width:"126px"},{title:"退回原因",dataIndex:"returnReason",key:"returnReason"}],conclusionColumns:[{title:"时间",dataIndex:"creatTime",key:"creatTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"doctorName",key:"doctorName",width:"126px"},{title:"会诊结论",dataIndex:"message",key:"message"},{title:"操作",key:"action",render:function(e,t){return g.default.createElement("span",null,g.default.createElement("a",{href:t.doc,download:t.docName},"下载"))},width:"126px"}],conclusion:[],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},checkData:[],data:[{id:" ",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],targetdoc:[]},a}return i(t,e),p(t,[{key:"getPeople",value:function(){var e=this;N.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){var a=e.state.getData;a.consultation.hospital=t.data.result[0].hospitalName,a.consultation.applicant=t.data.result[0].applyName,console.log(a.consultation.hospital),console.log(a.consultation.applicant),e.setState({getData:a})}).catch(function(){alert("1")})}},{key:"getValue",value:function(){var e=this,t=[];N.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id},headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data;s.consultationId=e.props.params.id;var l=[],n=[];s.case&&0!=s.case?(0!=s.case[0].advice&&s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}),n=s.case[0].file?s.case[0].file:[]):(s.case=b.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}));var i=s.conclusion?s.conclusion:[],r=s.check?s.check:[];e.setState({getData:s,history1:s.case[0],history2:s.case[0].advice?s.case[0].advice[0]:null,targetdoc:s.doctor?s.doctor:[],data:l,conclusion:i,fileList:n,checkData:r}),N.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=a.data.result,r=0;r<i.length;r++){var c={key:i[r].doctorId,title:i[r].doctorName,description:i[r].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(i[r].doctorId)};c.chosen&&s.push(c.key),l.push(c)}i.map(function(e,t){n.push(e)});for(var o=[],u=0;u<s.length;u++){var d={};d.doctor=s[u],o.push(d)}var h={};h.consultationId=e.state.consultationId,h.doctorId=o,e.setState({mockData:l,targetKeys:s,docList:i,docId:h,docKeys:s})})}).catch(function(){alert("第一请求error")})}},{key:"componentDidMount",value:function(){this.getValue()}},{key:"renderItem",value:function(e){return{label:g.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"ding",value:function(){}},{key:"startTime",value:function(e,t){console.log(t.split('"'))}},{key:"onChange",value:function(e,t){console.log(e,t)}},{key:"onCheck",value:function(e){console.log(e.currentTarget)}},{key:"changeHistory1",value:function(e){var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription?this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)}):t=null,console.log(t),this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}},{key:"changeHistory2",value:function(e){if(!this.state.saveAdvice&&e!=this.state.history2Index)return alert("当前医嘱未保存!"),!1;var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription&&t.prescription.map(function(e){a.push(e)}),this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,history2Index:e,data:a})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"newHidden"},g.default.createElement("div",{className:"cnsultation_top"},g.default.createElement("h1",null,"查看会诊"),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"隶属医院"),g.default.createElement(m.default,{value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊申请人"),g.default.createElement(m.default,{value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(m.default,{value:this.state.getData.consultation.consultationName,className:"search_input",size:"large",placeholder:"会诊名称",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(h.default,{open:!1,allowClear:!1,onChage:function(){return e.startTime()},value:(0,k.default)(this.state.getData.consultation.startTime,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊对象"),g.default.createElement(m.default,{value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"会诊对象",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{value:this.state.getData.consultation.phone,className:"search_input",size:"large",placeholder:"手机号",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"身份证号"),g.default.createElement(m.default,{value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"身份证号",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"出生日期"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.getData.consultation.birthday,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"陪护家属"),g.default.createElement(m.default,{value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号"})),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"会诊描述"),g.default.createElement(m.default,{value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4})))),g.default.createElement("div",{className:"cnsultation_bottom"},0!=this.state.history1?g.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return g.default.createElement("div",{key:a},g.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"}," 病历 ",a+1," "))}):""):"",0!=this.state.history1?g.default.createElement("div",{className:"history_detail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例编号"),g.default.createElement(m.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"病例编号"})),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例医院"),g.default.createElement(m.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"病例医院",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"主治医生"),g.default.createElement(m.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例名称"),g.default.createElement(m.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"诊治日期"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.history1.diagnosisTime,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"临床诊断"),g.default.createElement(m.default,{value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))):"",g.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return g.default.createElement("div",{key:a},g.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "))}):""),this.state.history2?g.default.createElement("div",{className:"prescribeDetail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医院"),g.default.createElement(m.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",className:"search_input",size:"large",placeholder:"医嘱医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医生"),g.default.createElement(m.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",className:"search_input",size:"large",placeholder:"医嘱医生"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱时间"),g.default.createElement(h.default,{allowClear:!1,value:(0,k.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",I),format:I,size:"large",className:"search_input"})),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"医嘱"),g.default.createElement(m.default,{value:this.state.history2.advice?this.state.history2.advice:"",className:"search_input",type:"textarea",rows:4}))),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),this.state.data?g.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}):g.default.createElement("li",{className:"search_input"})))):"",this.state.fileList?g.default.createElement("div",{className:"record"},g.default.createElement("span",{className:"history_sp1 record_sp1"}," 病历资料 "),g.default.createElement(u.default,{rowKey:"id",className:"fileList",columns:this.state.fileListColumns,dataSource:this.state.fileList})):"",this.state.targetdoc&&0!=this.state.targetdoc?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"会诊医生"),g.default.createElement(m.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",type:"textarea",rows:4}))):"",this.state.checkData.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"审核记录"),g.default.createElement(u.default,{className:"search_input",columns:this.state.checkColumns,dataSource:this.state.checkData}))):"",this.state.conclusion.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"结论记录"),g.default.createElement(u.default,{className:"search_input",columns:this.state.conclusionColumns,dataSource:this.state.conclusion}))):"",g.default.createElement("div",{className:"btn_save"},g.default.createElement("div",{className:"btn_save_index"},g.default.createElement(v.Link,{to:"apply/daiShen"},g.default.createElement(c.default,{type:"primary"},"返回"))))))}}]),t}(y.Component);t.default=D},381:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(69),a(68)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(67),a(24)),h=s(d),f=(a(86),a(85)),m=s(f),p=(a(13),a(17)),y=s(p),g=(a(19),a(18)),v=s(g),E=(a(53),a(52)),N=s(E),_=(a(16),a(15)),k=s(_),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),b=a(0),I=s(b),D=a(14);a(34);var S=a(22),T=s(S),C=a(1),w=s(C),P=function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();return t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()+"-"+t+"-"+a}(),O=localStorage.getItem("robertUserName"),z={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"2999-12-31 00:00:00.000",username:"",phone:"",identification:"",birthday:"2999-12-31 00:00:00.000",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:P,diagnosis:"",doc:"",file:[],statusId:"1",advice:[{hospital:"",doctor:"",statusId:"1",adviceTime:P,advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200},q="YYYY-MM-DD HH:mm:ss",j=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:a.props.params.id,hospitalId:null,saveCase:!0,savePrescription:!1,saveAdvice:!0,caseId:!1,showPrescription:!1,getData:z,centerPrescription:null,mockData:[],targetTitle:[],targetKeys:[],history1:z.case[0],history2:z.case[0].advice[0]?z.case[0].advice[0]:[],history1Index:0,history2Index:0,columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime",render:function(e){return I.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"},{title:"操作",key:"action",render:function(e,t,s){return I.default.createElement("span",null,a.state.history1.statusId?I.default.createElement("span",null,0==t.id?I.default.createElement("span",null,I.default.createElement(k.default,{onClick:a.addPrescription.bind(a),className:"addMedicine",type:"primary"},"新增")):I.default.createElement("span",null,I.default.createElement(k.default,{onClick:a.deletePrescription.bind(a,s),className:"addMedicine",type:"primary"},"删除"))):"-")}}],fileListColumns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return I.default.createElement("span",null,a+1," ")}},{title:"文件名",dataIndex:"fileName",key:"fileName"},{title:"大小",dataIndex:"fileSize",key:"fileSize"},{title:"上传时间",dataIndex:"uploadAt",key:"uploadAt",render:function(e){return I.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,s){return I.default.createElement("span",null,I.default.createElement("a",{href:t.url,target:"blank",className:"apply_link"},"查看"),a.state.history1.statusId?I.default.createElement(D.Link,{to:"",onClick:a.deleteFile.bind(a,t.id,s),className:"apply_link"},"删除"):"")}}],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},data:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],docUserId:[],targetdoc:[],fileList:null},a}return i(t,e),x(t,[{key:"getPeople",value:function(){var e=this;T.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+O,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){e.setState({hospitalId:t.data.result[0].hospitalId})})}},{key:"getValue",value:function(){var e=this,t=[];T.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id.toString()},headers:{Authorization:"Bearer "+O,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data,l=[],n=!1,i=[];s.case&&0!=s.case?(0!=s.case[0].advice&&s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}),i=s.case[0].file?s.case[0].file:[]):(n=!0,s.case=z.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)})),s.consultationId=e.props.params.id,e.setState({getData:s,history1:s.case[0],history2:s.case[0].advice?s.case[0].advice[0]:null,targetdoc:s.doctor,data:l,fileList:i,caseId:n}),e.getPeople(),T.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+O,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=a.data.result,r=0;r<i.length;r++){var c={key:i[r].doctorId,title:i[r].doctorName,description:i[r].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(i[r].doctorId)};c.chosen&&s.push(c.key),l.push(c)}i.map(function(e,t){n.push(e)});for(var o=[],u=0;u<s.length;u++){var d={};d.doctor=s[u],o.push(d)}var h={};h.consultationId=e.state.consultationId,h.doctorId=o,e.setState({mockData:l,targetKeys:s,docList:i,docId:h,docKeys:s})})}).catch(function(){alert(1)})}},{key:"componentDidMount",value:function(){this.getValue(),window.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"handleKeyDown",value:function(e){27==e.keyCode&&this.setState({showPrescription:!1})}},{key:"cancelSaveCF",value:function(){this.setState({showPrescription:!1})}},{key:"deleteFile",value:function(e,t){var a=this;T.default.request({url:"/api/conference/deleteCaseFile",method:"get",params:{caseFileId:e.toString()},headers:{Authorization:"Bearer "+O,"Content-Type":"application/json"}}).then(function(e){var s=a.state.getData;s.case[a.state.history1Index].file.splice(t,1);var l=s.case[a.state.history1Index].file;a.setState({fileList:l,getData:s})}).catch(function(){})}},{key:"handleChange",value:function(e){var t=this,a=[],s=e,l=0;this.state.docList.map(function(e,t){if(-1!==s.indexOf(e.doctorId)){var l={};l.user=e.userId.toString(),l.hospitalId=e.hospitalId.toString(),a.push(l)}}),a.map(function(e){e.hospitalId===t.state.hospitalId.toString()&&l++}),l>1&&N.default.warning("同一医院只能选择一名医生!"),this.setState({targetKeys:e,docUserId:a})}},{key:"queDing",value:function(){var e=this,t=0;if(this.state.docUserId.map(function(a){a.hospitalId===e.state.hospitalId.toString()&&t++}),t>1)return N.default.error("同一医院只能选择一名医生!"),!1;if(0===t)return N.default.error("本医院医生未选择!"),!1;for(var a=this.state.targetKeys,s=[],l=[],n=0;n<a.length;n++){var i={};i.doctor=a[n].toString(),s.push(i);for(var r=0;r<this.state.docList.length;r++)a[n]==1*this.state.docList[r].doctorId&&l.push(this.state.docList[r])}var c={};c.consultationId=this.state.consultationId,c.doctorId=s,c.userId=this.state.docUserId;var o=this;T.default.request({url:"/api/conference/edit/doctorlist",method:"POST",data:c,headers:{Authorization:"Bearer "+O,"Content-Type":"application/json"}}).then(function(e){var t=o.state.getData;t.doctor=l,o.setState({isShow:!1,targetdoc:l,allData:t,docId:c,docKeys:a})}).catch(function(){})}},{key:"renderItem",value:function(e){return{label:I.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"huizhenyisheng",value:function(){this.setState({isShow:!0})}},{key:"quxiaohuizhenyisheng",value:function(){this.setState({isShow:!1,targetKeys:this.state.docKeys})}},{key:"send",value:function(){if(this.state.saveCase)if(this.state.saveAdvice){if(0==this.state.targetdoc)return alert("会诊医生未选择!"),!1;T.default.request({url:"/api/conference/commit",method:"get",params:{id:this.state.consultationId.toString()},headers:{Authorization:"Bearer "+O,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){200==e.data.code&&(alert("提交成功!"),location.hash="apply")}).catch(function(){alert("提交失败!")})}else alert("当前医嘱未保存!");else alert("当前病历未保存!")}},{key:"changeHistory1",value:function(e){if(!this.state.saveCase&&e!=this.state.history1Index)return alert("当前病历未保存!"),!1;var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription&&this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)});var a=!1;this.state.getData.case[e].statusId&&(a=!0),this.state.getData.case[e].file&&this.state.getData.case[e].file,this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t,caseId:a,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}},{key:"changeHistory2",value:function(e){if(!this.state.saveAdvice&&e!=this.state.history2Index)return alert("当前医嘱未保存!"),!1;var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription&&t.prescription.map(function(e){a.push(e)}),this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,history2Index:e,data:a})}},{key:"addHistory1",value:function(){if(this.state.saveCase){var e=JSON.parse(JSON.stringify(this.state.getData)),t=e.case.length+1,a={sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"",diagnosis:"",doc:"",file:[],statusId:"1",advice:[{hospital:"",doctor:"",adviceTime:"",advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]};a.diagnosisTime=P,e.case.push(a);var s=a,l=a.advice[0],n=a.file;l.adviceTime=P,l.statusId=1;var i=[];i.push(this.state.oldData),this.setState({getData:e,history1:s,history2:l,data:i,history1Index:t-1<0?0:t-1,history2Index:0,saveCase:!1,caseId:!0,fileList:n})}else alert("上一病历未保存!")}},{key:"alertMsg",value:function(){this.state.saveCase||alert("请先保存病历!")}},{key:"changeDiagnosis",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].diagnosis=e.target.value,a.diagnosis=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeName",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].name=e.target.value,a.name=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeSn",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].sn=e.target.value,a.sn=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeHospital",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].hospital=e.target.value,a.hospital=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeDoctor",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].doctor=e.target.value,a.doctor=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeDagnosisTime",value:function(e,t){if(this.state.caseId){var a=this.state.getData,s=this.state.history1;a.case[this.state.history1Index].diagnosisTime=t,s.diagnosisTime=t,this.setState({getData:a,history1:s})}}},{key:"changeAdviceTime",value:function(e,t){if(this.state.saveCase){var a=this.state.getData,s=this.state.history2;a.case[this.state.history1Index].advice[this.state.history2Index].adviceTime=t,s.adviceTime=t,this.setState({getData:a,history2:s})}}},{key:"changeAdvice",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].advice=e.target.value,a.advice=e.target.value,this.setState({getData:t,history2:a})}}},{key:"changeAdviceDoctor",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].doctor=e.target.value,a.doctor=e.target.value,this.setState({getData:t,history2:a})}}},{key:"changeAdviceHospital",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].hospital=e.target.value,a.hospital=e.target.value,this.setState({getData:t,history2:a})}}},{key:"saveCase",value:function(){var e=JSON.parse(JSON.stringify(this.state.getData.case[this.state.history1Index]));if(!e.sn)return alert("病历编号不能为空!!!"),!1;if(!e.hospital)return alert("病例医院不能为空!!!"),!1;var t=JSON.parse(JSON.stringify(e.advice));delete e.advice,e.consultationId=this.state.consultationId,e.userId=this.state.getData.consultation.userId.toString(),e.id&&(e.id=e.id.toString(),delete e.consultationId,delete e.userId);var a=e.id?"/api/conference/edit/case":"/api/conference/add/case",s=this;T.default.request({url:a,method:"POST",data:e,headers:{Authorization:"Bearer "+O,"Content-Type":"application/json"}}).then(function(a){e.id=a.data.id,e.advice=t;var l=JSON.parse(JSON.stringify(s.state.getData));l.case[s.state.history1Index]=e,s.setState({saveCase:!0,history1:e,getData:l,history2:e.advice?e.advice[0]:null}),alert("病历保存成功!")}).catch(function(){alert("病历保存失败!")})}},{key:"saveAdvice",value:function(){if(this.state.saveCase){var e=JSON.parse(JSON.stringify(this.state.getData.case[this.state.history1Index].advice[this.state.history2Index])),t=JSON.parse(JSON.stringify(e.prescription));delete e.prescription,e.id&&(e.id=e.id.toString()),e.caseId=this.state.history1.id.toString();var a=e.id?"/api/conference/edit/advice":"/api/conference/add/advice",s=this;T.default.request({url:a,method:"POST",data:e,headers:{Authorization:"Bearer "+O,"Content-Type":"application/json"}}).then(function(a){a.data.id&&(e.id=a.data.id),e.prescription=t;var l=JSON.parse(JSON.stringify(s.state.getData));l.case[s.state.history1Index].advice[s.state.history2Index]=e,s.setState({saveCase:!0,history1:l.case[s.state.history1Index],getData:l,history2:e}),alert("医嘱保存成功!")}).catch(function(){alert("医嘱保存失败!")}),this.setState({saveAdvice:!0})}else alert("病历未保存!")}},{key:"addHistory2",value:function(){if(this.state.saveAdvice){var e=this.state.getData,t=e.case[this.state.history1Index].advice.length,a={hospital:"",doctor:"",adviceTime:"",advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]};a.adviceTime=P,a.statusId=1,e.case[this.state.history1Index].advice.push(a);var s=e.case[this.state.history1Index],l=e.case[this.state.history1Index].advice[s.advice.length-1],n=[];n.push(this.state.oldData),this.setState({getData:e,history1:s,history2:l,data:n,history2Index:t,saveAdvice:!1})}else alert("上一医嘱未保存")}},{key:"addPrescription",value:function(){if(this.state.saveAdvice){var e={prescriptionTime:P,doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""};this.setState({showPrescription:!0,centerPrescription:e})}else alert("医嘱未保存!")}},{key:"changeDoctorName",value:function(e){var t=this.state.centerPrescription;t.doctorName=e.target.value,this.setState({centerPrescription:t})}},{key:"changePrescriptionTime",value:function(e,t){var a=this.state.centerPrescription;a.prescriptionTime=t,this.setState({centerPrescription:a})}},{key:"changeMedicineTime",value:function(e){var t=this.state.centerPrescription;t.medicineTime=e.target.value,this.setState({centerPrescription:t})}},{key:"changeTotal",value:function(e){var t=this.state.centerPrescription;t.total=e.target.value,this.setState({centerPrescription:t})}},{key:"changeSingleDose",value:function(e){var t=this.state.centerPrescription;t.singleDose=e.target.value,this.setState({centerPrescription:t})}},{key:"changeFrequency",value:function(e){var t=this.state.centerPrescription;t.frequency=e.target.value,this.setState({centerPrescription:t})}},{key:"deletePrescription",value:function(e){var t=this.state.data,a=this.state.getData,s=this;console.log(a.case[this.state.history1Index].advice[this.state.history2Index].prescription[e].id),T.default.request({url:"/api/conference/delete/prescription",method:"get",params:{id:a.case[this.state.history1Index].advice[this.state.history2Index].prescription[e].id.toString()},headers:{Authorization:"Bearer "+O,"Content-Type":"application/json"}}).then(function(l){a.case[this.state.history1Index].advice[this.state.history2Index].prescription.splice(e,1),t.splice(e,1),s.setState({getData:a,data:t})})}},{key:"closePrescription",value:function(){var e=this.state.centerPrescription;e.adId=this.state.history2.id.toString();var t=this;T.default.request({url:"/api/conference/add/prescription",method:"POST",data:e,headers:{Authorization:"Bearer "+O,"Content-Type":"application/json"}}).then(function(a){e.id=a.data.id;var s=t.state.data;s.unshift(e);var l=t.state.getData;l.case[t.state.history1Index].advice[t.state.history2Index].prescription.unshift(e),t.setState({data:s,getData:l,showPrescription:!1,savePrescription:!0})}).catch(function(){alert("保存处方失败!")})}},{key:"deleteHistory1",value:function(e){if(!this.state.saveCase&&e!=this.state.history1Index)return alert("请先保存病历!"),!1;var t=JSON.parse(JSON.stringify(this.state.getData));if(1==t.case.length){t.case[0]={sn:"",hospital:"",doctor:"",name:"",diagnosisTime:P,diagnosis:"",doc:"",file:[],statusId:1,advice:[{hospital:"",doctor:"",adviceTime:P,advice:"",statusId:1,prescription:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}]}]};var a=t.case[0].advice?t.case[0].advice[0]:null,s=t.case[0].file,l=a.prescription;this.setState({getData:t,history1:t.case[0],history2:a,history1Index:0,history2Index:0,data:l,saveCase:!1,caseId:!0,saveAdvice:!1,fileList:s})}else{t.case[e].statusId&&!0,t.case.splice(e,1),e==t.case.length-1||(e=e<1?0:e-1);var n=t.case[e].advice?t.case[e].advice[0]:null,i=n?n.prescription:[];0==i&&i.push(this.state.oldData),this.setState({getData:t,history1:t.case[e],history2:n,history1Index:e,history2Index:0,data:i,saveCase:!0,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}}},{key:"deleteHistory2",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.case[this.state.history1Index].advice.splice(e,1),e=e<1?0:e-1;var a=t.case[this.state.history1Index],s=a.advice?a.advice[e]:null,l=s?s.prescription:[],n=!s;0==l&&l.push(this.state.oldData),this.setState({getData:t,history1:a,history2:s,history2Index:this.state.history2Index-1,data:l,saveAdvice:n})}},{key:"upLoadMsg",value:function(){}},{key:"render",value:function(){var e=this,t={height:document.body.clientHeight},a=this,s=null,l={overflowY:"hidden"},n={width:document.body.clientWidth,height:document.body.clientHeight};this.state.history1.id&&(s=this.state.history1.id.toString());var i={action:"/upload/consultation/"+s,headers:{Authorization:"Bearer "+O},onChange:function(e){var t=e.file,s=e.fileList;if("uploading"!==t.status){if(!a.state.saveCase)return alert("病历未保存!"),!1;if(s.length){var l=a.state.getData;l.case[a.state.history1Index].file=l.case[a.state.history1Index].file?l.case[a.state.history1Index].file:[],l.case[a.state.history1Index].file.push(s[s.length-1].response.result);var n=l.case[a.state.history1Index].file;a.setState({fileList:n,getData:l})}}},defaultFileList:[]};return I.default.createElement("div",{style:this.state.showPrescription?l:this.state.isShow?l:null,className:"newHidden"},this.state.showPrescription?I.default.createElement("div",{style:t,className:"Prescription"},I.default.createElement("div",{className:"showPrescription"},I.default.createElement("ul",null,I.default.createElement("li",null,I.default.createElement("span",null,"开方时间"),I.default.createElement(v.default,{allowClear:!1,showTime:!0,format:q,onChange:this.changePrescriptionTime.bind(this),size:"large",placeholder:"开方医生姓名"})),I.default.createElement("li",null,I.default.createElement("span",null,"开方医生姓名"),I.default.createElement(y.default,{value:this.state.centerPrescription.doctorName,onChange:this.changeDoctorName.bind(this),size:"large",placeholder:"开方医生姓名"})),I.default.createElement("li",null,I.default.createElement("span",null,"药品名称"),I.default.createElement(y.default,{value:this.state.centerPrescription.medicineTime,onChange:this.changeMedicineTime.bind(this),size:"large",placeholder:"药品名称"})),I.default.createElement("li",null,I.default.createElement("span",null,"总量"),I.default.createElement(y.default,{value:this.state.centerPrescription.total,onChange:this.changeTotal.bind(this),size:"large",placeholder:"总量"})),I.default.createElement("li",null,I.default.createElement("span",null,"单次用量"),I.default.createElement(y.default,{value:this.state.centerPrescription.singleDose,onChange:this.changeSingleDose.bind(this),size:"large",placeholder:"单次用量"})),I.default.createElement("li",null,I.default.createElement("span",null,"频次"),I.default.createElement(y.default,{value:this.state.centerPrescription.frequency,onChange:this.changeFrequency.bind(this),size:"large",placeholder:"频次"}))),I.default.createElement(k.default,{onClick:this.closePrescription.bind(this),className:"transfer_btn1",type:"primary"},"保存处方"),I.default.createElement(k.default,{onClick:this.cancelSaveCF.bind(this),className:"transfer_btn1",type:"primary"},"取消保存"))):"",this.state.isShow?I.default.createElement("div",{style:n,className:"transfer_box"},I.default.createElement("div",{className:"transfer"},I.default.createElement(m.default,{dataSource:this.state.mockData,listStyle:{width:300,height:500},rowKey:function(e){return e.key},targetKeys:this.state.targetKeys,onChange:this.handleChange.bind(this),render:this.renderItem.bind(this)}),I.default.createElement(k.default,{onClick:function(){return e.queDing()},className:"transfer_btn1",type:"primary"},"保存"),I.default.createElement(k.default,{onClick:function(){return e.quxiaohuizhenyisheng()},className:"transfer_btn",type:"primary"},"取消"))):"",I.default.createElement("div",{className:"cnsultation_top"},I.default.createElement("h1",null,"编辑会诊"),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"隶属医院"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊申请人"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊名称"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.consultationName,className:"search_input",size:"large",placeholder:"必填",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊时间"),I.default.createElement(v.default,{open:!1,allowClear:!1,value:(0,w.default)(this.state.getData.consultation.startTime,q),format:q,size:"large",className:"search_input",onChange:this.onChange}))),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊对象"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"必填",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"手机号"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.phone,className:"search_input",size:"large",placeholder:"必填",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"身份证号"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"必填",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"出生日期"),I.default.createElement(v.default,{open:!1,allowClear:!1,value:(0,w.default)(this.state.getData.consultation.birthday,q),format:q,size:"large",className:"search_input",onChange:this.onChange}))),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"陪护家属"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"手机号"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号"})),I.default.createElement("li",null),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"会诊描述"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4})))),I.default.createElement("div",{className:"cnsultation_bottom"},I.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return I.default.createElement("div",{className:"history_case",key:a},I.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"},"病例 ",a+1," "),I.default.createElement(k.default,{type:"primary",onClick:e.deleteHistory1.bind(e,a),className:"prescribe_btn1 edit_delete",size:"small"},I.default.createElement(h.default,{type:"minus"})))}):"",I.default.createElement(k.default,{onClick:this.addHistory1.bind(this),className:"history_btn1",type:"primary"},I.default.createElement(h.default,{type:"plus"}))),I.default.createElement("div",{className:"history_detail"},I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例编号"),I.default.createElement(y.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeSn.bind(this)})),I.default.createElement("li",null),I.default.createElement("li",null),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例医院"),I.default.createElement(y.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"必填",onChange:this.changeHospital.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"主治医生"),I.default.createElement(y.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",onChange:this.changeDoctor.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例名称"),I.default.createElement(y.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",onChange:this.changeName.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"诊治日期"),I.default.createElement(v.default,{allowClear:!1,value:(0,w.default)(this.state.history1.diagnosisTime,q),format:q,size:"large",className:"search_input",onChange:this.changeDagnosisTime.bind(this)}))),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"临床诊断"),I.default.createElement(y.default,{onChange:this.changeDiagnosis.bind(this),value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))),this.state.history1.statusId?I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{onClick:this.saveCase.bind(this),className:"btn_save_index_2",type:"primary"},"保存病历"))):"",I.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return I.default.createElement("div",{key:a},I.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "),I.default.createElement(k.default,{type:"primary",onClick:e.deleteHistory2.bind(e,a),className:"prescribe_btn1 edit_delete",size:"small"},I.default.createElement(h.default,{type:"minus"})))}):"",this.state.caseId?I.default.createElement(k.default,{onClick:this.addHistory2.bind(this),className:"history_btn1",type:"primary"},I.default.createElement(h.default,{type:"plus"})):""),this.state.history2?I.default.createElement("div",{className:"prescribeDetail"},I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱医院"),I.default.createElement(y.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",onChange:this.changeAdviceHospital.bind(this),className:"search_input",size:"large",placeholder:"医嘱医院"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱医生"),I.default.createElement(y.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",onChange:this.changeAdviceDoctor.bind(this),className:"search_input",size:"large",placeholder:"医嘱医生"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱时间"),I.default.createElement(v.default,{allowClear:!1,value:(0,w.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",q),format:q,size:"large",className:"search_input",onChange:this.changeAdviceTime.bind(this)})),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"医嘱"),I.default.createElement(y.default,{value:this.state.history2.advice?this.state.history2.advice:"",onChange:this.changeAdvice.bind(this),className:"search_input",type:"textarea",rows:4}))),this.state.history2.statusId?I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{onClick:this.saveAdvice.bind(this),className:"btn_save_index_2",type:"primary"},"保存医嘱"))):"",this.state.data&&this.state.data.length>0?I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),I.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}))):""):"",this.state.fileList?I.default.createElement("div",{className:"record"},I.default.createElement("span",{onClick:this.alertMsg.bind(this),className:"history_sp1 record_sp1"}," 病历资料 "),this.state.caseId?I.default.createElement(c.default,i,I.default.createElement(k.default,{className:"history_btn1"},I.default.createElement(h.default,{type:"upload"}))):"",I.default.createElement(u.default,{rowKey:"id",className:"fileList",columns:this.state.fileListColumns,dataSource:this.state.fileList})):"",I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",{className:"search_li_last"},I.default.createElement("span",{className:"one_title"},"会诊医生"),I.default.createElement(y.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",onFocus:function(){return e.huizhenyisheng()},type:"textarea",rows:4}))),I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{className:"btn_save_index_2",type:"primary",onClick:function(){return e.send()}},"提交"),I.default.createElement(D.Link,{to:"apply"},I.default.createElement(k.default,{type:"primary"},"取消"))))))}}]),t}(b.Component);t.default=j},382:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(69),a(68)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(67),a(24)),h=s(d),f=(a(86),a(85)),m=s(f),p=(a(13),a(17)),y=s(p),g=(a(19),a(18)),v=s(g),E=(a(53),a(52)),N=s(E),_=(a(16),a(15)),k=s(_),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),b=a(0),I=s(b),D=a(14);a(34);var S=a(22),T=s(S),C=a(1),w=s(C),P=localStorage.getItem("robertUserName"),O={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"2999-12-31 00:00:00.000",username:"",phone:"",identification:"",birthday:"2999-12-31 00:00:00.000",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"",diagnosis:"",doc:"",file:[],statusId:"1",advice:[{hospital:"",doctor:"",adviceTime:"",advice:"",prescription:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}]}]}],doctor:[],code:200},z=function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();return t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()+"-"+t+"-"+a}(),q="YYYY-MM-DD HH:mm:ss",j=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:a.props.params.id,saveCase:!0,savePrescription:!1,checkColumns:[{title:"审核时间",dataIndex:"checkTime",key:"checkTime",render:function(e){return I.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"assistantName",key:"assistantName",width:"126px"},{title:"审核结果",dataIndex:"checkResult",key:"checkResult",width:"126px"},{title:"退回原因",dataIndex:"returnReason",key:"returnReason"}],saveAdvice:!0,checkData:[],caseId:!1,showPrescription:!1,getData:O,centerPrescription:null,mockData:[],targetTitle:[],targetKeys:[],hospitalId:null,history1:O.case[0],history1Index:0,history2Index:0,history2:O.case[0].advice[0]?O.case[0].advice[0]:[],columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime",render:function(e){return I.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"},{title:"操作",key:"action",render:function(e,t,s){return I.default.createElement("span",{key:s},a.state.history1.statusId?I.default.createElement("span",null,0==t.id?I.default.createElement("span",null,I.default.createElement(k.default,{onClick:a.addPrescription.bind(a),className:"addMedicine",type:"primary"},"新增")):I.default.createElement("span",null,I.default.createElement(k.default,{onClick:a.deletePrescription.bind(a,s),className:"addMedicine",type:"primary"},"删除"))):"-")}}],fileListColumns:[{title:"序号",dataIndex:"id",key:"id"},{title:"文件名",dataIndex:"fileName",key:"fileName"},{title:"大小",dataIndex:"fileSize",key:"fileSize"},{title:"上传时间",dataIndex:"uploadAt",key:"uploadAt",render:function(e){return I.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,s){return I.default.createElement("span",{key:s},I.default.createElement("a",{href:t.url,target:"blank",className:"apply_link"},"查看"),a.state.history1.statusId?I.default.createElement(D.Link,{to:"",onClick:a.deleteFile.bind(a,t.id,s),className:"apply_link"},"删除"):"")}}],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},data:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],docUserId:[],targetdoc:[],fileList:null},a}return i(t,e),x(t,[{key:"getPeople",value:function(){var e=this;T.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+P,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){e.setState({hospitalId:t.data.result[0].hospitalId})})}},{key:"getValue",value:function(){var e=this,t=[];T.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id},headers:{Authorization:"Bearer "+P,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data,l=[],n=!1,i=[],r=s.check?JSON.parse(JSON.stringify(s.check)):[];s.case&&0!=s.case?(0!=s.case[0].advice&&s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}),i=s.case[0].file?s.case[0].file:[]):(n=!0,s.case=O.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)})),s.consultationId=e.props.params.id,console.log(i),e.setState({getData:s,history1:s.case[0],history2:s.case[0].advice?s.case[0].advice[0]:null,targetdoc:s.doctor,data:l,fileList:i,caseId:n,checkData:r}),e.getPeople(),T.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+P,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=a.data.result,r=0;r<i.length;r++){var c={key:i[r].doctorId,title:i[r].doctorName,description:i[r].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(i[r].doctorId)};c.chosen&&s.push(c.key),l.push(c)}i.map(function(e,t){n.push(e)});for(var o=[],u=0;u<s.length;u++){var d={};d.doctor=s[u],o.push(d)}var h={};h.consultationId=e.state.consultationId,h.doctorId=o,e.setState({mockData:l,targetKeys:s,docList:i,docId:h,docKeys:s})})}).catch(function(){})}},{key:"componentDidMount",value:function(){this.getValue(),window.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&this.setState({showPrescription:!1})}},{key:"deleteFile",value:function(e,t){var a=this;T.default.request({url:"/api/conference/deleteCaseFile",method:"get",params:{caseFileId:e.toString()},headers:{Authorization:"Bearer "+P,"Content-Type":"application/json"}}).then(function(e){var s=a.state.getData;s.case[a.state.history1Index].file.splice(t,1);var l=s.case[a.state.history1Index].file;a.setState({fileList:l,getData:s})}).catch(function(){})}},{key:"handleChange",value:function(e){var t=this,a=[],s=e,l=0;this.state.docList.map(function(e,t){if(-1!==s.indexOf(e.doctorId)){var l={};l.user=e.userId.toString(),l.hospitalId=e.hospitalId.toString(),a.push(l)}}),a.map(function(e){e.hospitalId===t.state.hospitalId.toString()&&l++}),l>1&&N.default.warning("同一医院只能选择一名医生!"),this.setState({targetKeys:e,docUserId:a})}},{key:"queDing",value:function(){var e=this,t=0;if(this.state.docUserId.map(function(a){a.hospitalId===e.state.hospitalId.toString()&&t++}),t>1)return N.default.error("同一医院只能选择一名医生!"),!1;if(0===t)return N.default.error("本医院医生未选择!"),!1;for(var a=this.state.targetKeys,s=[],l=[],n=0;n<a.length;n++){var i={};i.doctor=a[n].toString(),s.push(i);for(var r=0;r<this.state.docList.length;r++)a[n]==1*this.state.docList[r].doctorId&&l.push(this.state.docList[r])}var c={};c.consultationId=this.state.consultationId,c.doctorId=s,c.userId=this.state.docUserId;var o=this;T.default.request({url:"/api/conference/edit/doctorlist",method:"POST",data:c,headers:{Authorization:"Bearer "+P,"Content-Type":"application/json"}}).then(function(e){var t=o.state.getData;t.doctor=l,o.setState({isShow:!1,targetdoc:l,allData:t,docId:c,docKeys:a})}).catch(function(){})}},{key:"renderItem",value:function(e){return{label:I.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"huizhenyisheng",value:function(){this.setState({isShow:!0})}},{key:"quxiaohuizhenyisheng",value:function(){this.setState({isShow:!1,targetKeys:this.state.docKeys})}},{key:"send",value:function(){if(this.state.saveCase)if(this.state.saveAdvice){if(0==this.state.targetdoc)return alert("会诊医生未选择!"),!1;T.default.request({url:"/api/conference/reCommit",method:"get",params:{id:this.state.consultationId.toString()},headers:{Authorization:"Bearer "+P,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){200==e.data.code&&(alert("提交成功!"),location.hash="apply")}).catch(function(){alert("提交失败!")})}else alert("当前医嘱未保存!");else alert("当前病历未保存!")}},{key:"changeHistory1",value:function(e){if(!this.state.saveCase&&e!=this.state.history1Index)return alert("当前病历未保存!"),!1;var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription&&this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)});var a=!1;this.state.getData.case[e].statusId&&(a=!0),this.state.getData.case[e].file&&this.state.getData.case[e].file,this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t,caseId:a,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}},{key:"changeHistory2",value:function(e){if(!this.state.saveAdvice&&e!=this.state.history2Index)return alert("当前医嘱未保存!"),!1;var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription&&t.prescription.map(function(e){a.push(e)}),this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,history2Index:e,data:a})}},{key:"addHistory1",value:function(){if(this.state.saveCase){var e=JSON.parse(JSON.stringify(this.state.getData)),t=e.case.length+1,a={sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"",diagnosis:"",doc:"",file:[],statusId:"1",advice:[{hospital:"",doctor:"",adviceTime:"",advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]};a.diagnosisTime=z,e.case.push(a);var s=a,l=a.advice[0],n=a.file;l.adviceTime=z,l.statusId=1;var i=[];i.push(this.state.oldData),this.setState({getData:e,history1:s,history2:l,data:i,history1Index:t-1<0?0:t-1,history2Index:0,saveCase:!1,caseId:!0,fileList:n})}else alert("上一病历未保存!")}},{key:"alertMsg",value:function(){this.state.saveCase||alert("请先保存病历!")}},{key:"changeDiagnosis",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].diagnosis=e.target.value,a.diagnosis=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeName",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].name=e.target.value,a.name=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeSn",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].sn=e.target.value,a.sn=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeHospital",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].hospital=e.target.value,a.hospital=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeDoctor",value:function(e){if(this.state.caseId){var t=this.state.getData,a=this.state.history1;t.case[this.state.history1Index].doctor=e.target.value,a.doctor=e.target.value,this.setState({getData:t,history1:a})}}},{key:"changeDagnosisTime",value:function(e,t){if(this.state.caseId){var a=this.state.getData,s=this.state.history1;a.case[this.state.history1Index].diagnosisTime=t,s.diagnosisTime=t,this.setState({getData:a,history1:s})}}},{key:"changeAdviceTime",value:function(e,t){if(this.state.saveCase){var a=this.state.getData,s=this.state.history2;a.case[this.state.history1Index].advice[this.state.history2Index].adviceTime=t,s.adviceTime=t,this.setState({getData:a,history2:s})}}},{key:"changeAdvice",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].advice=e.target.value,a.advice=e.target.value,this.setState({getData:t,history2:a})}}},{key:"changeAdviceDoctor",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].doctor=e.target.value,a.doctor=e.target.value,this.setState({getData:t,history2:a})}}},{key:"changeAdviceHospital",value:function(e){if(this.state.saveCase){var t=this.state.getData,a=this.state.history2;t.case[this.state.history1Index].advice[this.state.history2Index].hospital=e.target.value,a.hospital=e.target.value,this.setState({getData:t,history2:a})}}},{key:"saveCase",value:function(){var e=JSON.parse(JSON.stringify(this.state.getData.case[this.state.history1Index]));if(!e.sn)return alert("病历编号不能为空!!!"),!1;if(!e.hospital)return alert("病例医院不能为空!!!"),!1;var t=JSON.parse(JSON.stringify(e.advice));delete e.advice,e.consultationId=this.state.consultationId,e.userId=this.state.getData.consultation.userId.toString(),e.id&&(e.id=e.id.toString());var a=e.id?"/api/conference/edit/case":"/api/conference/add/case",s=this;T.default.request({url:a,method:"POST",data:e,headers:{Authorization:"Bearer "+P,"Content-Type":"application/json"}}).then(function(a){e.id=a.data.id,e.advice=t;var l=JSON.parse(JSON.stringify(s.state.getData));l.case[s.state.history1Index]=e,s.setState({saveCase:!0,history1:e,getData:l,history2:e.advice?e.advice[0]:null}),alert("保存病历成功!")}).catch(function(){alert("保存病历失败!")})}},{key:"saveAdvice",value:function(){if(this.state.saveCase){var e=JSON.parse(JSON.stringify(this.state.getData.case[this.state.history1Index].advice[this.state.history2Index])),t=JSON.parse(JSON.stringify(e.prescription));delete e.prescription,e.id&&(e.id=e.id.toString()),e.caseId=this.state.history1.id.toString();var a=e.id?"/api/conference/edit/advice":"/api/conference/add/advice",s=this;T.default.request({url:a,method:"POST",data:e,headers:{Authorization:"Bearer "+P,"Content-Type":"application/json"}}).then(function(a){a.data.id&&(e.id=a.data.id),e.prescription=t;var l=JSON.parse(JSON.stringify(s.state.getData));l.case[s.state.history1Index].advice[s.state.history2Index]=e,s.setState({saveCase:!0,history1:l.case[s.state.history1Index],getData:l,history2:e}),alert("保存医嘱成功!")}).catch(function(){alert("保存医嘱失败!")}),this.setState({saveAdvice:!0})}else alert("病历未保存!")}},{key:"addHistory2",value:function(){if(this.state.saveAdvice){var e=this.state.getData,t=e.case[this.state.history1Index].advice.length,a={hospital:"",doctor:"",adviceTime:"",advice:"",prescription:[{id:"0",prescriptionTime:"",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]};a.adviceTime=z,a.statusId=1,e.case[this.state.history1Index].advice.push(a);var s=e.case[this.state.history1Index],l=e.case[this.state.history1Index].advice[s.advice.length-1],n=[];n.push(this.state.oldData),this.setState({getData:e,history1:s,history2:l,data:n,history2Index:t,saveAdvice:!1})}else alert("上一医嘱未保存")}},{key:"addPrescription",value:function(){if(this.state.saveAdvice){var e={prescriptionTime:z,doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""};this.setState({showPrescription:!0,centerPrescription:e})}else alert("医嘱未保存!")}},{key:"changeDoctorName",value:function(e){var t=this.state.centerPrescription;t.doctorName=e.target.value,this.setState({centerPrescription:t})}},{key:"changePrescriptionTime",value:function(e,t){var a=this.state.centerPrescription;a.prescriptionTime=t,this.setState({centerPrescription:a})}},{key:"changeMedicineTime",value:function(e){var t=this.state.centerPrescription;t.medicineTime=e.target.value,this.setState({centerPrescription:t})}},{key:"changeTotal",value:function(e){var t=this.state.centerPrescription;t.total=e.target.value,this.setState({centerPrescription:t})}},{key:"changeSingleDose",value:function(e){var t=this.state.centerPrescription;t.singleDose=e.target.value,this.setState({centerPrescription:t})}},{key:"changeFrequency",value:function(e){var t=this.state.centerPrescription;t.frequency=e.target.value,this.setState({centerPrescription:t})}},{key:"deletePrescription",value:function(e){var t=this.state.data,a=this.state.getData;a.case[this.state.history1Index].advice[this.state.history2Index].prescription.splice(e,1),t.splice(e,1),this.setState({getData:a,data:t})}},{key:"cancelSaveCF",value:function(){this.setState({showPrescription:!1})}},{key:"closePrescription",value:function(){var e=this.state.centerPrescription;e.adId=this.state.history2.id.toString();var t=this;T.default.request({url:"/api/conference/add/prescription",method:"POST",data:e,headers:{Authorization:"Bearer "+P,"Content-Type":"application/json"}}).then(function(a){e.id=a.data.id;var s=t.state.data;s.unshift(e);var l=t.state.getData;l.case[t.state.history1Index].advice[t.state.history2Index].prescription.unshift(e),t.setState({data:s,getData:l,showPrescription:!1,savePrescription:!0})}).catch(function(){alert("保存处方失败!")})}},{key:"deleteHistory1",value:function(e){if(!this.state.saveCase&&e!=this.state.history1Index)return alert("请先保存病历!"),!1;var t=JSON.parse(JSON.stringify(this.state.getData));if(1==t.case.length){t.case[0]={sn:"",hospital:"",doctor:"",name:"",diagnosisTime:z,diagnosis:"",doc:"",file:[],statusId:1,advice:[{hospital:"",doctor:"",adviceTime:z,advice:"",statusId:1,prescription:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}]}]};var a=t.case[0].advice?t.case[0].advice[0]:null,s=t.case[0].file,l=a.prescription;this.setState({getData:t,history1:t.case[0],history2:a,history1Index:0,history2Index:0,data:l,saveCase:!1,caseId:!0,saveAdvice:!1,fileList:s})}else{t.case[e].statusId&&!0,t.case.splice(e,1),e==t.case.length-1||(e=e<1?0:e-1),console.log(e);var n=t.case[e].advice?t.case[e].advice[0]:null,i=n?n.prescription:[];0==i&&i.push(this.state.oldData),this.setState({getData:t,history1:t.case[e],history2:n,history1Index:e,history2Index:0,data:i,saveCase:!0,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}}},{key:"deleteHistory2",value:function(e){var t=JSON.parse(JSON.stringify(this.state.getData));t.case[this.state.history1Index].advice.splice(e,1),e=e<1?0:e-1;var a=t.case[this.state.history1Index],s=a.advice?a.advice[e]:null,l=s?s.prescription:[],n=!s;0==l&&l.push(this.state.oldData),this.setState({getData:t,history1:a,history2:s,history2Index:this.state.history2Index-1,data:l,saveAdvice:n})}},{key:"upLoadMsg",value:function(){}},{key:"render",value:function(){var e=this,t={height:document.body.clientHeight},a=this,s=null,l={overflowY:"hidden"},n={width:document.body.clientWidth,height:document.body.clientHeight};this.state.history1.id&&(s=this.state.history1.id.toString());var i={action:"/upload/consultation/"+s,headers:{Authorization:"Bearer "+P},onChange:function(e){var t=e.file,s=e.fileList;if("uploading"!==t.status){if(!a.state.saveCase)return alert("病历未保存!"),!1;if(s.length){var l=a.state.getData;l.case[a.state.history1Index].file=l.case[a.state.history1Index].file?l.case[a.state.history1Index].file:[],l.case[a.state.history1Index].file.push(s[s.length-1].response.result);var n=l.case[a.state.history1Index].file;a.setState({fileList:n,getData:l})}}},defaultFileList:[]};return I.default.createElement("div",{style:this.state.showPrescription?l:this.state.isShow?l:null,className:"newHidden"},this.state.showPrescription?I.default.createElement("div",{style:t,className:"Prescription"},I.default.createElement("div",{className:"showPrescription"},I.default.createElement("ul",null,I.default.createElement("li",null,I.default.createElement("span",null,"开方时间"),I.default.createElement(v.default,{allowClear:!1,showTime:!0,format:q,onChange:this.changePrescriptionTime.bind(this),size:"large",placeholder:"开方医生姓名"})),I.default.createElement("li",null,I.default.createElement("span",null,"开方医生姓名"),I.default.createElement(y.default,{value:this.state.centerPrescription.doctorName,onChange:this.changeDoctorName.bind(this),size:"large",placeholder:"开方医生姓名"})),I.default.createElement("li",null,I.default.createElement("span",null,"药品名称"),I.default.createElement(y.default,{value:this.state.centerPrescription.medicineTime,onChange:this.changeMedicineTime.bind(this),size:"large",placeholder:"药品名称"})),I.default.createElement("li",null,I.default.createElement("span",null,"总量"),I.default.createElement(y.default,{value:this.state.centerPrescription.total,onChange:this.changeTotal.bind(this),size:"large",placeholder:"总量"})),I.default.createElement("li",null,I.default.createElement("span",null,"单次用量"),I.default.createElement(y.default,{value:this.state.centerPrescription.singleDose,onChange:this.changeSingleDose.bind(this),size:"large",placeholder:"单次用量"})),I.default.createElement("li",null,I.default.createElement("span",null,"频次"),I.default.createElement(y.default,{value:this.state.centerPrescription.frequency,onChange:this.changeFrequency.bind(this),size:"large",placeholder:"频次"}))),I.default.createElement(k.default,{onClick:this.closePrescription.bind(this),className:"transfer_btn1",type:"primary"},"保存处方"),I.default.createElement(k.default,{onClick:this.cancelSaveCF.bind(this),className:"transfer_btn1",type:"primary"},"取消保存"))):"",this.state.isShow?I.default.createElement("div",{style:n,className:"transfer_box"},I.default.createElement("div",{className:"transfer"},I.default.createElement(m.default,{dataSource:this.state.mockData,listStyle:{width:300,height:500},rowKey:function(e){return e.key},targetKeys:this.state.targetKeys,onChange:this.handleChange.bind(this),render:this.renderItem.bind(this)}),I.default.createElement(k.default,{onClick:function(){return e.queDing()},className:"transfer_btn1",type:"primary"},"保存"),I.default.createElement(k.default,{onClick:function(){return e.quxiaohuizhenyisheng()},className:"transfer_btn",type:"primary"},"取消"))):"",I.default.createElement("div",{className:"cnsultation_top"},I.default.createElement("h1",null,"编辑会诊"),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"隶属医院"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊申请人"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊名称"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.consultationName,className:"search_input",size:"large",placeholder:"会诊名称",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊时间"),I.default.createElement(v.default,{showTime:!0,open:!1,allowClear:!1,value:(0,w.default)(this.state.getData.consultation.startTime,q),format:q,size:"large",className:"search_input",onChange:this.onChange}))),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"会诊对象"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"会诊对象",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"手机号"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.phone,className:"search_input",size:"large",placeholder:"手机号",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"身份证号"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"身份证号",required:!0})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"出生日期"),I.default.createElement(v.default,{open:!1,allowClear:!1,value:(0,w.default)(this.state.getData.consultation.birthday,q),format:q,size:"large",className:"search_input",onChange:this.onChange}))),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"陪护家属"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"手机号"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号"})),I.default.createElement("li",null),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"会诊描述"),I.default.createElement(y.default,{readOnly:!0,value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4})))),I.default.createElement("div",{className:"cnsultation_bottom"},I.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return I.default.createElement("div",{key:a},I.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"},"病例 ",a+1," "),I.default.createElement(k.default,{type:"primary",onClick:e.deleteHistory1.bind(e,a),className:"prescribe_btn1 edit_delete",size:"small"},I.default.createElement(h.default,{type:"minus"})))}):"",I.default.createElement(k.default,{onClick:this.addHistory1.bind(this),className:"history_btn1",type:"primary"},I.default.createElement(h.default,{type:"plus"}))),I.default.createElement("div",{className:"history_detail"},I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例编号"),I.default.createElement(y.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"病例编号",onChange:this.changeSn.bind(this)})),I.default.createElement("li",null),I.default.createElement("li",null),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例医院"),I.default.createElement(y.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"病例医院",onChange:this.changeHospital.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"主治医生"),I.default.createElement(y.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",onChange:this.changeDoctor.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"病例名称"),I.default.createElement(y.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",onChange:this.changeName.bind(this)})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"诊治日期"),I.default.createElement(v.default,{allowClear:!1,value:(0,w.default)(this.state.history1.diagnosisTime,q),format:q,size:"large",className:"search_input",onChange:this.changeDagnosisTime.bind(this)}))),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"临床诊断"),I.default.createElement(y.default,{onChange:this.changeDiagnosis.bind(this),value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))),this.state.history1.statusId?I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{onClick:this.saveCase.bind(this),className:"btn_save_index_2",type:"primary"},"保存病历"))):"",I.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return I.default.createElement("div",{key:a},I.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "),I.default.createElement(k.default,{type:"primary",onClick:e.deleteHistory2.bind(e,a),className:"prescribe_btn1 edit_delete",size:"small"},I.default.createElement(h.default,{type:"minus"})))}):"",this.state.caseId?I.default.createElement(k.default,{onClick:this.addHistory2.bind(this),className:"history_btn1",type:"primary"},I.default.createElement(h.default,{type:"plus"})):""),this.state.history2?I.default.createElement("div",{className:"prescribeDetail"},I.default.createElement("ul",{className:"search_ul"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱医院"),I.default.createElement(y.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",onChange:this.changeAdviceHospital.bind(this),className:"search_input",size:"large",placeholder:"医嘱医院"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱医生"),I.default.createElement(y.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",onChange:this.changeAdviceDoctor.bind(this),className:"search_input",size:"large",placeholder:"医嘱医生"})),I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex"},"医嘱时间"),I.default.createElement(v.default,{allowClear:!1,value:(0,w.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",q),format:q,size:"large",className:"search_input",onChange:this.changeAdviceTime.bind(this)})),I.default.createElement("li",null)),I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"most_flex1"},"医嘱"),I.default.createElement(y.default,{value:this.state.history2.advice?this.state.history2.advice:"",onChange:this.changeAdvice.bind(this),className:"search_input",type:"textarea",rows:4}))),this.state.history2.statusId?I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{onClick:this.saveAdvice.bind(this),className:"btn_save_index_2",type:"primary"},"保存医嘱"))):"",this.state.data&&this.state.data.length>0?I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",null,I.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),I.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}))):""):"",this.state.fileList?I.default.createElement("div",{className:"record"},I.default.createElement("span",{onClick:this.alertMsg.bind(this),className:"history_sp1 record_sp1"}," 病历资料 "),this.state.caseId?I.default.createElement(c.default,i,I.default.createElement(k.default,{className:"history_btn1"},I.default.createElement(h.default,{type:"upload"}))):"",I.default.createElement(u.default,{rowKey:"id",className:"fileList",columns:this.state.fileListColumns,dataSource:this.state.fileList})):"",I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",{className:"search_li_last"},I.default.createElement("span",{className:"one_title"},"会诊医生"),I.default.createElement(y.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",onFocus:function(){return e.huizhenyisheng()},type:"textarea",rows:4}))),this.state.checkData.length>0?I.default.createElement("ul",{className:"search_ul2"},I.default.createElement("li",{className:"search_li_last"},I.default.createElement("span",{className:"one_title"},"审核记录"),I.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.checkColumns,dataSource:this.state.checkData}))):"",I.default.createElement("div",{className:"btn_save"},I.default.createElement("div",{className:"btn_save_index"},I.default.createElement(k.default,{className:"btn_save_index_2",type:"primary",onClick:function(){return e.send()}},"提交"),I.default.createElement(D.Link,{to:"apply/return/ReturnRecord"},I.default.createElement(k.default,{type:"primary"},"返回"))))))}}]),t}(b.Component);t.default=j},383:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(21),a(20)),c=s(r),o=(a(19),a(18)),u=s(o),d=(a(13),a(17)),h=s(d),f=(a(16),a(15)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14),E=a(1),N=(s(E),a(22)),_=s(N),k=localStorage.getItem("robertUserName"),x=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));!function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()}();return a.state={applyPage:{pageSize:10,consultationName:"",username:"",phone:"",status:4,startTime:""},total:10,current:1,dataSource:[],columns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return g.default.createElement("span",null,a+1)}},{title:"会诊名称",dataIndex:"title",key:"title"},{title:"会诊时间",dataIndex:"startTime",key:"startTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"会诊对象",dataIndex:"username",key:"username"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"被退时间",dataIndex:"modifyAt",key:"modifyAt",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,s){return g.default.createElement("span",{key:t.id},g.default.createElement(v.Link,{to:"apply/return/ReturnRecord/editReturn/"+t.id},"编辑"),g.default.createElement(v.Link,{to:"",className:"apply_link",onClick:function(){return a.invalid(t.id)}},"作废"))}}]},a}return i(t,e),p(t,[{key:"componentDidMount",value:function(){this.query(1)}},{key:"push",value:function(e,t){var a=this;_.default.request({url:"/api/conference/commit",method:"get",params:{id:e},headers:{Authorization:"Bearer "+k,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){a.query(1)}).catch(function(){alert("数据提交失败!")})}},{key:"invalid",value:function(e){var t=this;_.default.request({url:"/api/conference/cancel",method:"get",params:{id:e},headers:{Authorization:"Bearer "+k,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){t.query(1)}).catch(function(){alert("作废失败，请检查网络!")})}},{key:"changePage",value:function(e){this.query(e),this.setState({current:e})}},{key:"query",value:function(e){var t=this,a=this.state.applyPage;a.pageNum=e,_.default.request({url:"/api/conference/applyPageList",method:"get",params:a,headers:{Authorization:"Bearer "+k,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){var a=e.data.result?e.data.result.data:[];console.log(a),t.setState({dataSource:a,total:e.data.result.count})})}},{key:"onChange",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",null,g.default.createElement("div",{className:"apple_top"},g.default.createElement("h1",null,"查询区",g.default.createElement(m.default,{onClick:function(){return e.query()},type:"primary",className:"search_btn1"},"查询")),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(h.default,{className:"search_input",size:"large",placeholder:"会诊名称"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(u.default,{allowClear:!1,size:"large",className:"search_input",onChange:this.onChange.bind(this)})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊对象"),g.default.createElement(h.default,{className:"search_input",size:"large",placeholder:"会诊对象"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(h.default,{className:"search_input",size:"large",placeholder:"手机号"})))),g.default.createElement("div",{className:"apple_bottom"},g.default.createElement("h1",{className:"most_h1"},"列表区"),g.default.createElement(c.default,{pagination:{defaultPageSize:10,showQuickJumper:!0,onChange:this.changePage.bind(this),total:this.state.total,current:this.state.current},rowKey:"id",dataSource:this.state.dataSource,columns:this.state.columns})))}}]),t}(y.Component);t.default=x},384:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(21),a(20)),c=s(r),o=(a(19),a(18)),u=s(o),d=(a(13),a(17)),h=s(d),f=(a(16),a(15)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14);a(75);var E=a(1),N=(s(E),a(22)),_=s(N),k=localStorage.getItem("robertUserName"),x=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),s=function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();return t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()+"-"+t+"-"+a}();return a.state={applyPage:{pageSize:10,status:"3",title:"",hospital:"",phone:"",applyName:"",startTime:""},total:10,current:1,startTime:s,columns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return g.default.createElement("span",null,a+1)}},{title:"会诊名称",dataIndex:"title",key:"title"},{title:"会诊时间",dataIndex:"startTime",key:"startTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"所属医院",dataIndex:"hospital",key:"hospital"},{title:"申请人",dataIndex:"applyName",key:"applyName"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"审核时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,a){return g.default.createElement("span",{key:t.id},g.default.createElement(v.Link,{to:"check/checked/lookChecked/"+t.id},"查看"))}}],dataSource:[]},a}return i(t,e),p(t,[{key:"deleteRecord",value:function(e){alert("删除了id是"+e+"的数据")}},{key:"componentDidMount",value:function(){this.query(1)}},{key:"onChange",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a}),this.setState({startTime:t})}},{key:"changeConsultationName",value:function(e){var t=this.state.applyPage;t.title=e.target.value,this.setState({applyPage:t})}},{key:"changeUsername",value:function(e){var t=this.state.applyPage;t.applyName=e.target.value,this.setState({applyPage:t})}},{key:"changeHospital",value:function(e){var t=this.state.applyPage;t.hospital=e.target.value,this.setState({applyPage:t})}},{key:"changePhone",value:function(e){var t=this.state.applyPage;t.phone=e.target.value,this.setState({applyPage:t})}},{key:"changePage",value:function(e){this.query(e),this.setState({current:e})}},{key:"query",value:function(e){var t=this,a=this.state.applyPage;a.pagenum=e,_.default.request({url:"/api/conference/check/pageList",method:"post",params:a,headers:{Authorization:"Bearer "+k,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){var a=e.data.result.data;t.setState({dataSource:a,total:e.data.result.count})})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",null,g.default.createElement("div",{className:"apple_top"},g.default.createElement("h1",null,"查询区",g.default.createElement(m.default,{type:"primary",onClick:function(){return e.query()},className:"search_btn1"},"查询")),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(h.default,{value:this.state.applyPage.title,onChange:this.changeConsultationName.bind(this),className:"search_input",size:"large",placeholder:"会诊名称"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(u.default,{size:"large",className:"search_input",onChange:this.onChange.bind(this)})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"申请人"),g.default.createElement(h.default,{value:this.state.applyPage.applyName,onChange:this.changeUsername.bind(this),className:"search_input",size:"large",placeholder:"申请人"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"所属医院"),g.default.createElement(h.default,{value:this.state.applyPage.hospital,onChange:this.changeHospital.bind(this),className:"search_input",size:"large",placeholder:"所属医院"}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(h.default,{value:this.state.applyPage.phone,onChange:this.changePhone.bind(this),className:"search_input",size:"large",placeholder:"手机号"})),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null))),g.default.createElement("div",{className:"apple_bottom"},g.default.createElement("h1",{className:"most_h1"},"列表区"),g.default.createElement(c.default,{pagination:{defaultPageSize:10,showQuickJumper:!0,onChange:this.changePage.bind(this),total:this.state.total,current:this.state.current},rowKey:"id",dataSource:this.state.dataSource,columns:this.state.columns})))}}]),t}(y.Component);t.default=x},385:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(16),a(15)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(19),a(18)),h=s(d),f=(a(13),a(17)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14);a(34);var E=a(22),N=s(E),_=a(1),k=s(_),x=localStorage.getItem("robertUserName"),b={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"0-0-0 00:00:00.000",username:"",phone:"",identification:"",birthday:"0-0-0 00:00:00.000",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"2999-12-31 00:00:00.000",diagnosis:"",doc:"",advice:[{hospital:"",doctor:"",adviceTime:"2999-12-31 00:00:00.000",advice:"","处方":[{prescriptionTime:"2999-12-31 00:00:00.000",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200},I="YYYY-MM-DD HH:mm:ss",D=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:1,getData:b,mockData:[],targetTitle:[],targetKeys:[],history1:b.case[0],history1Index:0,history2:b.case[0].advice[0]?b.case[0].advice[0]:[],columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"}],fileListColumns:[{title:"文件名",dataIndex:"fileName",key:"fileName"},{title:"大小",dataIndex:"fileSize",key:"fileSize"},{title:"上传时间",dataIndex:"uploadAt",key:"uploadAt",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t){return g.default.createElement("span",null,g.default.createElement("a",{className:"apply_link",href:t.url,download:t.fileName},"下载"),g.default.createElement("a",{className:"apply_link",href:t.url},"查看"))}}],fileList:[],checkColumns:[{title:"审核时间",dataIndex:"checkTime",key:"checkTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"assistantName",key:"assistantName",width:"126px"},{title:"审核结果",dataIndex:"checkResult",key:"checkResult",width:"126px"},{title:"退回原因",dataIndex:"returnReason",key:"returnReason"}],conclusionColumns:[{title:"时间",dataIndex:"creatTime",key:"creatTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"doctorName",key:"doctorName",width:"126px"},{title:"附件名称",dataIndex:"docName",key:"docName",width:"126px"},{title:"会诊结论",dataIndex:"message",key:"message"},{title:"操作",key:"action",render:function(e,t){return g.default.createElement("span",null,g.default.createElement("a",{href:t.doc,download:t.docName},"下载"))},width:"126px"}],conclusion:[],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},checkData:[],data:[{id:" ",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],targetdoc:[]},a}return i(t,e),p(t,[{key:"getPeople",value:function(){var e=this;N.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){var a=e.state.getData;a.consultation.hospital=t.data.result[0].hospitalName,a.consultation.applicant=t.data.result[0].applyName,console.log(a.consultation.hospital),console.log(a.consultation.applicant),e.setState({getData:a})}).catch(function(){alert("1")})}},{key:"getValue",value:function(){var e=this,t=[];N.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id},headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data;s.consultationId=e.props.params.id;var l=[],n=[];s.case&&0!=s.case?(0!=s.case[0].advice&&s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}),n=s.case[0].file?s.case[0].file:[]):(s.case=b.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}));var i=s.conclusion?s.conclusion:[],r=s.check?s.check:[],c=s.case?s.case[0]:null,o=c&&c.advice?c.advice[0]:null;e.setState({getData:s,history1:c,history2:o,targetdoc:s.doctor?s.doctor:[],data:l,conclusion:i,fileList:n,checkData:r}),N.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=a.data.result,r=0;r<i.length;r++){var c={key:i[r].doctorId,title:i[r].doctorName,description:i[r].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(i[r].doctorId)};c.chosen&&s.push(c.key),l.push(c)}i.map(function(e,t){n.push(e)});for(var o=[],u=0;u<s.length;u++){var d={};d.doctor=s[u],o.push(d)}var h={};h.consultationId=e.state.consultationId,h.doctorId=o,e.setState({mockData:l,targetKeys:s,docList:i,docId:h,docKeys:s})})}).catch(function(){alert("第一请求error")})}},{key:"componentDidMount",value:function(){this.getValue()}},{key:"renderItem",value:function(e){return{label:g.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"ding",value:function(){}},{key:"startTime",value:function(e,t){console.log(t.split('"'))}},{key:"onChange",value:function(e,t){console.log(e,t)}},{key:"onCheck",value:function(e){console.log(e.currentTarget)}},{key:"changeHistory1",value:function(e){var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription?this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)}):t=null,console.log(t),this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}},{key:"changeHistory2",value:function(e){var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription?t.prescription.map(function(e){a.push(e)}):a=null,this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,data:a})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"newHidden"},g.default.createElement("div",{className:"cnsultation_top"},g.default.createElement("h1",null,"查看会诊"),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"隶属医院"),g.default.createElement(m.default,{value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊申请人"),g.default.createElement(m.default,{value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(m.default,{value:this.state.getData.consultation.consultationName,className:"search_input",size:"large",placeholder:"会诊名称",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(h.default,{open:!1,allowClear:!1,onChage:function(){return e.startTime()},value:(0,k.default)(this.state.getData.consultation.startTime,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊对象"),g.default.createElement(m.default,{value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"会诊对象",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{value:this.state.getData.consultation.phone,className:"search_input",size:"large",placeholder:"手机号",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"身份证号"),g.default.createElement(m.default,{value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"身份证号",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"出生日期"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.getData.consultation.birthday,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"陪护家属"),g.default.createElement(m.default,{value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号"})),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"会诊描述"),g.default.createElement(m.default,{value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4})))),g.default.createElement("div",{className:"cnsultation_bottom"},0!=this.state.history1?g.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return g.default.createElement("div",{key:a},g.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"}," 病历 ",a+1," "))}):""):"",0!=this.state.history1?g.default.createElement("div",{className:"history_detail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例编号"),g.default.createElement(m.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"病例编号"})),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例医院"),g.default.createElement(m.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"病例医院",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"主治医生"),g.default.createElement(m.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例名称"),g.default.createElement(m.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"诊治日期"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.history1.diagnosisTime,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"临床诊断"),g.default.createElement(m.default,{value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))):"",g.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return g.default.createElement("div",{key:a},g.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "))}):""),this.state.history2?g.default.createElement("div",{className:"prescribeDetail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医院"),g.default.createElement(m.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",className:"search_input",size:"large",placeholder:"医嘱医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医生"),g.default.createElement(m.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",className:"search_input",size:"large",placeholder:"医嘱医生"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱时间"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",I),format:I,size:"large",className:"search_input",onChange:this.onChange})),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"医嘱"),g.default.createElement(m.default,{value:this.state.history2.advice?this.state.history2.advice:"",className:"search_input",type:"textarea",rows:4}))),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),this.state.data?g.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}):g.default.createElement("li",{className:"search_input"})))):"",g.default.createElement("div",{className:"record"},g.default.createElement("span",{className:"history_sp1 record_sp1"}," 病历资料 "),this.state.fileList?g.default.createElement(u.default,{rowKey:"id",className:"fileList",columns:this.state.fileListColumns,dataSource:this.state.fileList}):g.default.createElement("span",{className:"history_btn1"}," 无病历资料 ")),this.state.targetdoc&&0!=this.state.targetdoc?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"会诊医生"),g.default.createElement(m.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",type:"textarea",rows:4}))):"",this.state.checkData.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"审核记录"),g.default.createElement(u.default,{className:"search_input",columns:this.state.checkColumns,dataSource:this.state.checkData}))):"",this.state.conclusion.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"结论记录"),g.default.createElement(u.default,{className:"search_input",columns:this.state.conclusionColumns,dataSource:this.state.conclusion}))):"",g.default.createElement("div",{className:"btn_save"},g.default.createElement("div",{className:"btn_save_index"},g.default.createElement(v.Link,{to:"check/checked/checked"},g.default.createElement(c.default,{type:"primary"},"返回"))))))}}]),t}(y.Component);t.default=D},386:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(21),a(20)),c=s(r),o=(a(19),a(18)),u=s(o),d=(a(13),a(17)),h=s(d),f=(a(16),a(15)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14);a(75);var E=a(1),N=(s(E),a(22)),_=s(N),k=localStorage.getItem("robertUserName"),x=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),s=function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();return t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()+"-"+t+"-"+a}();return a.state={applyPage:{pageSize:"10",status:"4",title:"",hospital:"",phone:"",applyName:"",startTime:""},total:10,current:1,startTime:s,columns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return g.default.createElement("span",null,a+1)}},{title:"会诊名称",dataIndex:"title",key:"title"},{title:"会诊时间",dataIndex:"startTime",key:"startTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"所属医院",dataIndex:"hospital",key:"hospital"},{title:"申请人",dataIndex:"applyName",key:"applyName"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"退回时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,a){return g.default.createElement("span",{key:t.id},g.default.createElement(v.Link,{to:"check/hadReturn/lookHadReturn/"+t.id},"查看"))}}],dataSource:[]},a}return i(t,e),p(t,[{key:"changePage",value:function(e){this.query(e),this.setState({current:e})}},{key:"deleteRecord",value:function(e){alert("删除了id是"+e+"的数据")}},{key:"componentDidMount",value:function(){this.query(1)}},{key:"onChange",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a}),this.setState({startTime:t})}},{key:"changeConsultationName",value:function(e){var t=this.state.applyPage;t.title=e.target.value,this.setState({applyPage:t})}},{key:"changeUser",value:function(e){var t=this.state.applyPage;t.applyName=e.target.value,this.setState({applyPage:t})}},{key:"changeHospital",value:function(e){var t=this.state.applyPage;t.hospital=e.target.value,this.setState({applyPage:t})}},{key:"changePhone",value:function(e){var t=this.state.applyPage;t.phone=e.target.value,this.setState({applyPage:t})}},{key:"query",value:function(e){var t=this,a=this.state.applyPage;a.pageNum=e,_.default.request({url:"/api/conference/check/pageList",method:"post",params:a,headers:{Authorization:"Bearer "+k,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){var a=e.data.result.data;t.setState({dataSource:a,total:e.data.result.count})})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",null,g.default.createElement("div",{className:"apple_top"},g.default.createElement("h1",null,"查询区",g.default.createElement(m.default,{type:"primary",onClick:function(){return e.query()},className:"search_btn1"},"查询")),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(h.default,{value:this.state.applyPage.title,onChange:this.changeConsultationName.bind(this),className:"search_input",size:"large",placeholder:"会诊名称"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(u.default,{size:"large",className:"search_input",onChange:this.onChange.bind(this)})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"申请人"),g.default.createElement(h.default,{value:this.state.applyPage.applyName,onChange:this.changeUser.bind(this),className:"search_input",size:"large",placeholder:"申请人"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"所属医院"),g.default.createElement(h.default,{value:this.state.applyPage.hospital,onChange:this.changeHospital.bind(this),className:"search_input",size:"large",placeholder:"所属医院"}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(h.default,{value:this.state.applyPage.phone,onChange:this.changePhone.bind(this),className:"search_input",size:"large",placeholder:"手机号"})),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null))),g.default.createElement("div",{className:"apple_bottom"},g.default.createElement("h1",{className:"most_h1"},"列表区"),g.default.createElement(c.default,{pagination:{defaultPageSize:10,showQuickJumper:!0,onChange:this.changePage.bind(this),total:this.state.total,current:this.state.current},rowKey:"id",dataSource:this.state.dataSource,columns:this.state.columns})))}}]),t}(y.Component);t.default=x},387:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(16),a(15)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(19),a(18)),h=s(d),f=(a(13),a(17)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14);a(34);var E=a(22),N=s(E),_=a(1),k=s(_),x=localStorage.getItem("robertUserName"),b={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"0-0-0 00:00:00.000",username:"",phone:"",identification:"",birthday:"0-0-0 00:00:00.000",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"2999-12-31 00:00:00.000",diagnosis:"",doc:"",advice:[{hospital:"",doctor:"",adviceTime:"2999-12-31 00:00:00.000",advice:"","处方":[{prescriptionTime:"2999-12-31 00:00:00.000",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200},I="YYYY-MM-DD HH:mm:ss",D=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:a.props.params.id,saveCase:!0,savePrescription:!1,saveAdvice:!0,caseId:!1,showPrescription:!1,getData:b,centerPrescription:null,mockData:[],targetTitle:[],targetKeys:[],history1:b.case[0],history2:b.case[0].advice[0]?b.case[0].advice[0]:[],history1Index:0,history2Index:0,columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" "))}},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"}],fileListColumns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return g.default.createElement("span",null,a+1," ")}},{title:"文件名",dataIndex:"fileName",key:"fileName"},{title:"大小",dataIndex:"fileSize",key:"fileSize"},{title:"上传时间",dataIndex:"uploadAt",key:"uploadAt",render:function(e){return g.default.createElement("span",null,e.split("T").join(" "))}},{title:"操作",key:"action",render:function(e,t,a){return g.default.createElement("span",null,g.default.createElement("a",{href:t.url,target:"blank",className:"apply_link"},"查看"))}}],checkColumns:[{title:"审核时间",dataIndex:"checkTime",key:"checkTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"assistantName",key:"assistantName",width:"126px"},{title:"审核结果",dataIndex:"checkResult",key:"checkResult",width:"126px"},{title:"退回原因",dataIndex:"returnReason",key:"returnReason"}],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},data:[{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],targetdoc:[],fileList:null,checkData:[]},a}return i(t,e),p(t,[{key:"getPeople",value:function(){var e=this;N.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){var a=e.state.getData;a.consultation.hospital=t.data.result[0].hospitalName,a.consultation.applicant=t.data.result[0].applyName,console.log(a.consultation.hospital),console.log(a.consultation.applicant),e.setState({getData:a})}).catch(function(){})}},{key:"getValue",value:function(){var e=this,t=[];N.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id.toString()},headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data,l=[],n=!1,i=[],r=s.check?JSON.parse(JSON.stringify(s.check)):[];s.case&&0!=s.case?(0!=s.case[0].advice&&s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}),i=s.case[0].file?s.case[0].file:[]):(n=!0,s.case=b.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)})),s.consultationId=e.props.params.id,console.log(r),e.setState({getData:s,history1:s.case[0],history2:s.case[0].advice?s.case[0].advice[0]:null,targetdoc:s.doctor,data:l,fileList:i,caseId:n,checkData:r}),N.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=a.data.result,r=0;r<i.length;r++){var c={key:i[r].doctorId,title:i[r].doctorName,description:i[r].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(i[r].doctorId)};c.chosen&&s.push(c.key),l.push(c)}i.map(function(e,t){n.push(e)});for(var o=[],u=0;u<s.length;u++){var d={};d.doctor=s[u],o.push(d)}var h={};h.consultationId=e.state.consultationId,h.doctorId=o,e.setState({mockData:l,targetKeys:s,docList:i,docId:h,docKeys:s})})}).catch(function(){alert(1)})}},{key:"componentDidMount",value:function(){this.getValue(),window.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"handleKeyDown",value:function(e){27==e.keyCode&&this.setState({showPrescription:!1})}},{key:"renderItem",value:function(e){return{label:g.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"changeHistory1",value:function(e){if(!this.state.saveCase&&e!=this.state.history1Index)return alert("当前病历未保存!"),!1;var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription&&this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)});var a=!1;this.state.getData.case[e].statusId&&(a=!0),this.state.getData.case[e].file&&this.state.getData.case[e].file,this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t,caseId:a,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}},{key:"changeHistory2",value:function(e){if(!this.state.saveAdvice&&e!=this.state.history2Index)return alert("当前医嘱未保存!"),!1;var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription&&t.prescription.map(function(e){a.push(e)}),this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,history2Index:e,data:a})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"newHidden"},g.default.createElement("div",{className:"cnsultation_top"},g.default.createElement("h1",null,"编辑会诊"),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"隶属医院"),g.default.createElement(m.default,{readOnly:!0,value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊申请人"),g.default.createElement(m.default,{readOnly:!0,value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(m.default,{readOnly:!0,value:this.state.getData.consultation.consultationName,className:"search_input",size:"large",placeholder:"必填",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.getData.consultation.startTime,I),format:I,size:"large",className:"search_input"}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊对象"),g.default.createElement(m.default,{readOnly:!0,value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"必填",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{readOnly:!0,value:this.state.getData.consultation.phone,className:"search_input",size:"large",placeholder:"必填",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"身份证号"),g.default.createElement(m.default,{readOnly:!0,value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"必填",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"出生日期"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.getData.consultation.birthday,I),format:I,size:"large",className:"search_input"}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"陪护家属"),g.default.createElement(m.default,{readOnly:!0,value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{readOnly:!0,value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号"})),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"会诊描述"),g.default.createElement(m.default,{readOnly:!0,value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4})))),g.default.createElement("div",{className:"cnsultation_bottom"},g.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return g.default.createElement("div",{className:"history_case",key:a},g.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"},"病例 ",a+1," "))}):""),g.default.createElement("div",{className:"history_detail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例编号"),g.default.createElement(m.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"必填"})),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例医院"),g.default.createElement(m.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"必填"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"主治医生"),g.default.createElement(m.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例名称"),g.default.createElement(m.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"诊治日期"),g.default.createElement(h.default,{allowClear:!1,value:(0,k.default)(this.state.history1.diagnosisTime,I),format:I,size:"large",className:"search_input"}))),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"临床诊断"),g.default.createElement(m.default,{value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))),g.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return g.default.createElement("div",{key:a},g.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "))}):""),this.state.history2?g.default.createElement("div",{className:"prescribeDetail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医院"),g.default.createElement(m.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",className:"search_input",size:"large",placeholder:"医嘱医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医生"),g.default.createElement(m.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",className:"search_input",size:"large",placeholder:"医嘱医生"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱时间"),g.default.createElement(h.default,{allowClear:!1,value:(0,k.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",I),format:I,size:"large",className:"search_input"})),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"医嘱"),g.default.createElement(m.default,{value:this.state.history2.advice?this.state.history2.advice:"",className:"search_input",type:"textarea",rows:4}))),this.state.data&&this.state.data.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),g.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}))):""):"",this.state.fileList?g.default.createElement("div",{className:"record"},g.default.createElement("span",{className:"history_sp1 record_sp1"}," 病历资料 "),g.default.createElement(u.default,{rowKey:"id",className:"fileList",columns:this.state.fileListColumns,dataSource:this.state.fileList})):"",g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"会诊医生"),g.default.createElement(m.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",type:"textarea",rows:4}))),this.state.checkData.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"审核记录"),g.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.checkColumns,dataSource:this.state.checkData}))):"",g.default.createElement("div",{className:"btn_save"},g.default.createElement("div",{className:"btn_save_index"},g.default.createElement(v.Link,{to:"check/hadReturn/hadReturn"},g.default.createElement(c.default,{type:"primary"},"返回"))))))}}]),t}(y.Component);t.default=D},388:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(16),a(15)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(19),a(18)),h=s(d),f=(a(13),a(17)),m=s(f),p=(a(53),a(52)),y=s(p),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),v=a(0),E=s(v);a(14);a(34),a(91);var N=a(22),_=s(N),k=a(1),x=s(k),b=localStorage.getItem("robertUserName"),I={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"0-0-0 00:00:00.000",username:"",phone:"",identification:"",birthday:"0-0-0 00:00:00.000",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"2999-12-31 00:00:00.000",diagnosis:"",doc:"",advice:[{hospital:"",doctor:"",adviceTime:"2999-12-31 00:00:00.000",advice:"","处方":[{prescriptionTime:"2999-12-31 00:00:00.000",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200},D="YYYY-MM-DD HH:mm:ss",S=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:1,getData:I,isShowBiaoji:!1,returnReason:"",mockData:[],targetTitle:[],targetKeys:[],history1:I.case[0],history1Index:0,history2:I.case[0].advice[0]?I.case[0].advice[0]:[],columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime",render:function(e){return E.default.createElement("span",null,e.split("T").join(" "))}},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"}],fileListColumns:[{title:"文件名",dataIndex:"fileName",key:"fileName"},{title:"大小",dataIndex:"fileSize",key:"fileSize"},{title:"上传时间",dataIndex:"uploadAt",key:"uploadAt",render:function(e){return E.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t){return E.default.createElement("span",null,E.default.createElement("a",{className:"apply_link",href:t.url,download:t.fileName},"下载"),E.default.createElement("a",{className:"apply_link",href:t.url},"查看"))}}],fileList:[],checkColumns:[{title:"审核时间",dataIndex:"checkTime",key:"checkTime",render:function(e){return E.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"assistantName",key:"assistantName",width:"126px"},{title:"审核结果",dataIndex:"checkResult",key:"checkResult",width:"126px"},{title:"退回原因",dataIndex:"returnReason",key:"returnReason"}],conclusionColumns:[{title:"时间",dataIndex:"creatTime",key:"creatTime",render:function(e){return E.default.createElement("span",null,e.split("T").join(" "))},width:"126px"},{title:"操作人",dataIndex:"doctorName",key:"doctorName",width:"126px"},{title:"会诊结论",dataIndex:"message",key:"message"},{title:"操作",key:"action",render:function(e,t){return E.default.createElement("span",null,E.default.createElement("a",{href:t.doc,download:t.docName},"下载"))},width:"126px"}],conclusion:[],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},checkData:[],data:[{id:" ",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],targetdoc:[],hadResolve:!1},a}return i(t,e),g(t,[{key:"getPeople",value:function(){var e=this;_.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+b,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){var a=e.state.getData;a.consultation.hospital=t.data.result[0].hospitalName,a.consultation.applicant=t.data.result[0].applyName,e.setState({getData:a})}).catch(function(){})}},{key:"checkHadChecked",value:function(){var e=this;_.default.request({url:"/api/conference/judge",method:"get",params:{id:e.props.params.id},headers:{Authorization:"Bearer "+b,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){300===t.data.code&&e.setState({hadResolve:!0})})}},{key:"getValue",value:function(){var e=this,t=[];_.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id},headers:{Authorization:"Bearer "+b,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data;s.consultationId=1;var l=[],n=[];s.case&&0!=s.case?(0!=s.case[0].advice&&s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}),n=s.case[0].file?s.case[0].file:[]):(s.case=I.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}));var i=s.conclusion?s.conclusion:[],r=s.check?s.check:[];e.setState({getData:s,history1:s.case[0],history2:s.case[0].advice?a.data.case[0].advice[0]:null,targetdoc:a.data.doctor,data:l,conclusion:i,fileList:n,checkData:r}),e.checkHadChecked(),_.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+b,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=a.data.result,r=0;r<i.length;r++){var c={key:i[r].doctorId,title:i[r].doctorName,description:i[r].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(i[r].doctorId)};c.chosen&&s.push(c.key),l.push(c)}i.map(function(e,t){n.push(e)});for(var o=[],u=0;u<s.length;u++){var d={};d.doctor=s[u],o.push(d)}var h={};h.consultationId=e.state.consultationId,h.doctorId=o,e.setState({mockData:l,targetKeys:s,docList:i,docId:h,docKeys:s})})}).catch(function(){})}},{key:"componentDidMount",value:function(){this.getValue()}},{key:"returnList",value:function(){location.hash="/check/waitCheck/waitCheck"}},{key:"changeReturn",value:function(e){var t=this.state.returnReason;t=e.target.value,t.length>=120&&y.default.warning("结论字数120字以内"),this.setState({returnReason:t})}},{key:"tuihuiDiv",value:function(){this.setState({isShowBiaoji:!0})}},{key:"conFirm",value:function(){var e=this;_.default.request({url:"/api/conference/check/sure",method:"post",params:{id:e.props.params.id.toString()},headers:{Authorization:"Bearer "+b,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){alert("会诊确认成功"),location.hash="/check/waitCheck/waitCheck"}).catch(function(){alert("会诊确认出错")})}},{key:"quXiao",value:function(){this.setState({isShowBiaoji:!1})}},{key:"conFirmReturn",value:function(){var e=this,t=this.state.returnReason;if(t.length>=120)return y.default.error("结论字数120字以内!"),!1;_.default.request({url:"/api/conference/check/back",method:"post",params:{id:e.props.params.id.toString(),returnReason:t},headers:{Authorization:"Bearer "+b,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){alert("退回成功"),e.setState({isShowBiaoji:!1}),location.hash="/check/waitCheck/waitCheck"}).catch(function(){alert("退回出错")})}},{key:"renderItem",value:function(e){return{label:E.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"ding",value:function(){}},{key:"startTime",value:function(e,t){console.log(t.split('"'))}},{key:"onChange",value:function(e,t){console.log(e,t)}},{key:"onCheck",value:function(e){console.log(e.currentTarget)}},{key:"changeHistory1",value:function(e){var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription?this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)}):t=null,this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t,fileList:this.state.getData.case[e].file&&0!=this.state.getData.case[e].file?this.state.getData.case[e].file:null})}},{key:"changeHistory2",value:function(e){var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription?t.prescription.map(function(e){a.push(e)}):a=null,this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,data:a})}},{key:"render",value:function(){var e=this;return E.default.createElement("div",{className:"newHidden"},E.default.createElement("div",{className:"cnsultation_top"},E.default.createElement("h1",null,"查看会诊"),E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"隶属医院"),E.default.createElement(m.default,{value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊申请人"),E.default.createElement(m.default,{value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊名称"),E.default.createElement(m.default,{value:this.state.getData.consultation.consultationName,className:"search_input",size:"large",placeholder:"会诊名称",required:!0})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊时间"),E.default.createElement(h.default,{open:!1,allowClear:!1,onChage:function(){return e.startTime()},value:(0,x.default)(this.state.getData.consultation.startTime,D),format:D,size:"large",className:"search_input",onChange:this.onChange}))),E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊对象"),E.default.createElement(m.default,{value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"会诊对象",required:!0})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"手机号"),E.default.createElement(m.default,{value:this.state.getData.consultation.phone,className:"search_input",size:"large",placeholder:"手机号",required:!0})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"身份证号"),E.default.createElement(m.default,{value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"身份证号",required:!0})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"出生日期"),E.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,x.default)(this.state.getData.consultation.birthday,D),format:D,size:"large",className:"search_input",onChange:this.onChange}))),E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"陪护家属"),E.default.createElement(m.default,{value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"手机号"),E.default.createElement(m.default,{value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号"})),E.default.createElement("li",null),E.default.createElement("li",null)),E.default.createElement("ul",{className:"search_ul2"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex1"},"会诊描述"),E.default.createElement(m.default,{value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4})))),E.default.createElement("div",{className:"cnsultation_bottom"},E.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return E.default.createElement("div",{key:a},E.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"},"病历 ",a+1," "))}):""),E.default.createElement("div",{className:"history_detail"},E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"病例编号"),E.default.createElement(m.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"病例编号"})),E.default.createElement("li",null),E.default.createElement("li",null),E.default.createElement("li",null)),E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"病例医院"),E.default.createElement(m.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"病例医院",required:!0})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"主治医生"),E.default.createElement(m.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",required:!0})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"病例名称"),E.default.createElement(m.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",required:!0})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"诊治日期"),E.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,x.default)(this.state.history1.diagnosisTime,D),format:D,size:"large",className:"search_input",onChange:this.onChange}))),E.default.createElement("ul",{className:"search_ul2"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex1"},"临床诊断"),E.default.createElement(m.default,{value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))),this.state.history1.advice.length>0?E.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return E.default.createElement("div",{key:a},E.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "))}):""):"",this.state.history2?E.default.createElement("div",{className:"prescribeDetail"},E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"医嘱医院"),E.default.createElement(m.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",className:"search_input",size:"large",placeholder:"医嘱医院"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"医嘱医生"),E.default.createElement(m.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",className:"search_input",size:"large",placeholder:"医嘱医生"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"医嘱时间"),E.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,x.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",D),format:D,size:"large",className:"search_input",onChange:this.onChange})),E.default.createElement("li",null)),E.default.createElement("ul",{className:"search_ul2"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex1"},"医嘱"),E.default.createElement(m.default,{value:this.state.history2.advice?this.state.history2.advice:"",className:"search_input",type:"textarea",rows:4}))),E.default.createElement("ul",{className:"search_ul2"},E.default.createElement("li",null,E.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),this.state.data?E.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}):E.default.createElement("li",{className:"search_input"})))):"",E.default.createElement("div",{className:"record"},E.default.createElement("span",{className:"history_sp1 record_sp1"}," 病历资料 "),this.state.fileList?E.default.createElement(u.default,{rowKey:"id",className:"fileList",columns:this.state.fileListColumns,dataSource:this.state.fileList}):E.default.createElement("span",{className:"history_btn1"}," 无病历资料 ")),this.state.targetdoc&&0!=this.state.targetdoc?E.default.createElement("ul",{className:"search_ul2"},E.default.createElement("li",{className:"search_li_last"},E.default.createElement("span",{className:"one_title"},"会诊医生"),E.default.createElement(m.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",type:"textarea",rows:4}))):"",this.state.checkData.length>0?E.default.createElement("ul",{className:"search_ul2"},E.default.createElement("li",{className:"search_li_last"},E.default.createElement("span",{className:"one_title"},"审核记录"),E.default.createElement(u.default,{className:"search_input",columns:this.state.checkColumns,dataSource:this.state.checkData}))):"",this.state.conclusion.length>0?E.default.createElement("ul",{className:"search_ul2"},E.default.createElement("li",{className:"search_li_last"},E.default.createElement("span",{className:"one_title"},"结论记录"),E.default.createElement(u.default,{className:"search_input",columns:this.state.conclusionColumns,dataSource:this.state.conclusion}))):"",E.default.createElement("div",{className:"btn_save"},E.default.createElement("div",{className:"btn_save_index"},E.default.createElement("div",{className:"btn_div1"},E.default.createElement(c.default,{type:"primary",disabled:this.state.hadResolve,onClick:function(){return e.conFirm()}},"会诊确认"),"  ",E.default.createElement(c.default,{type:"primary",disabled:this.state.hadResolve,onClick:function(){return e.tuihuiDiv()}},"标记退回")," "),E.default.createElement("div",{className:"btn_div1"},E.default.createElement(c.default,{type:"primary",onClick:function(){return e.returnList()}},"取消")))),this.state.isShowBiaoji?E.default.createElement("div",{className:"returnDiv"},E.default.createElement(m.default,{type:"textarea",value:this.state.returnReason,onChange:this.changeReturn.bind(this),rows:4,placeholder:"请输入退回原因"}),E.default.createElement("div",{className:"btn_return_div"},E.default.createElement(c.default,{type:"primary",className:"btn_one",onClick:function(){return e.conFirmReturn()}},"确认退回")," ",E.default.createElement(c.default,{type:"primary",onClick:function(){return e.quXiao()}},"取消"))):""))}}]),t}(v.Component);t.default=S},389:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(21),a(20)),c=s(r),o=(a(19),a(18)),u=s(o),d=(a(13),a(17)),h=s(d),f=(a(16),a(15)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14);a(75);var E=a(1),N=(s(E),a(22)),_=s(N),k=localStorage.getItem("robertUserName"),x=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),s=function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();return t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()+"-"+t+"-"+a}();return a.state={applyPage:{pageSize:10,pageNum:1,status:"2",title:"",hospital:"",phone:"",applyName:"",startTime:""},total:10,current:1,startTime:s,columns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return g.default.createElement("span",null,a+1)}},{title:"会诊名称",dataIndex:"title",key:"title"},{title:"会诊时间",dataIndex:"startTime",key:"startTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"所属医院",dataIndex:"hospital",key:"hospital"},{title:"申请人",dataIndex:"applyName",key:"applyName"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"提交时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,a){return g.default.createElement("span",{key:t.id},g.default.createElement(v.Link,{to:"check/waitCheck/lookWaitCheck/"+t.id},"审核"))}}],dataSource:[]},a}return i(t,e),p(t,[{key:"componentDidMount",value:function(){this.query()}},{key:"onChange",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a}),this.setState({startTime:t})}},{key:"changeConsultationName",value:function(e){var t=this.state.applyPage;t.title=e.target.value,this.setState({applyPage:t})}},{key:"changeUser",value:function(e){var t=this.state.applyPage;t.applyName=e.target.value,this.setState({applyPage:t})}},{key:"changeHospital",value:function(e){var t=this.state.applyPage;t.hospital=e.target.value,this.setState({applyPage:t})}},{key:"changePhone",value:function(e){var t=this.state.applyPage;t.phone=e.target.value,this.setState({applyPage:t})}},{key:"changePage",value:function(e){this.query(e),this.setState({current:e})}},{key:"query",value:function(e){var t=this,a=this.state.applyPage;a.pagenum=e,_.default.request({url:"/api/conference/check/pageList",method:"post",params:a,headers:{Authorization:"Bearer "+k,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){var a=e.data.result.data;t.setState({dataSource:a,total:e.data.result.count})})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",null,g.default.createElement("div",{className:"apple_top"},g.default.createElement("h1",null,"查询区",g.default.createElement(m.default,{type:"primary",onClick:function(){return e.query()},className:"search_btn1"},"查询")),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(h.default,{value:this.state.applyPage.title,onChange:this.changeConsultationName.bind(this),className:"search_input",size:"large",placeholder:"会诊名称"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(u.default,{size:"large",className:"search_input",onChange:this.onChange.bind(this)})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"申请人"),g.default.createElement(h.default,{value:this.state.applyPage.applyName,onChange:this.changeUser.bind(this),className:"search_input",size:"large",placeholder:"申请人"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"所属医院"),g.default.createElement(h.default,{value:this.state.applyPage.hospital,onChange:this.changeHospital.bind(this),className:"search_input",size:"large",placeholder:"所属医院"}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(h.default,{value:this.state.applyPage.phone,onChange:this.changePhone.bind(this),className:"search_input",size:"large",placeholder:"手机号"})),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null))),g.default.createElement("div",{className:"apple_bottom"},g.default.createElement("h1",{className:"most_h1"},"列表区"),g.default.createElement(c.default,{pagination:{defaultPageSize:10,showQuickJumper:!0,onChange:this.changePage.bind(this),total:this.state.total,current:this.state.current},rowKey:"id",dataSource:this.state.dataSource,columns:this.state.columns})))}}]),t}(y.Component);t.default=x},390:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(21),a(20)),c=s(r),o=(a(19),a(18)),u=s(o),d=(a(13),a(17)),h=s(d),f=(a(16),a(15)),m=s(f),p=(a(107),a(84)),y=s(p),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),v=a(0),E=s(v),N=a(14),_=a(22),k=s(_);a(34);var x=y.default.Option,b=localStorage.getItem("robertUserName"),I=["","/api/conference/summary/apply","/api/conference/summary/check","/api/conference/summary/mission"],D=["全部","待提交","待审核","待会诊","已退回","已作废","已结束"],S=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));!function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()}();return a.state={applyPage:{pageNum:"1",pageSize:"10",consultationName:"",username:"",phone:"",startTime:"",hospital:"",applicant:"",aPhone:""},total:10,current:1,stage:0,status:0,dataSource:[],dataSourceFather:[],columns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return E.default.createElement("span",null,a+1)}},{title:"会诊名称",dataIndex:"consultationName",key:"consultationName"},{title:"会诊时间",dataIndex:"startTime",key:"startTime",render:function(e){return E.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"所属医院",dataIndex:"hospital",key:"hospital"},{title:"会诊对象",dataIndex:"username",key:"username"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"申请人",dataIndex:"applicant",key:"applicant"},{title:"手机号",dataIndex:"aPhone",key:"aPhone"},{title:"会诊状态",dataIndex:"status",key:"status",render:function(e,t,a){return E.default.createElement("span",{key:t.id},D[t.status])}},{title:"操作",key:"action",render:function(e,t){return E.default.createElement("span",{key:e.id},E.default.createElement(N.Link,{to:"consulationTables/lookConsulation/"+e.id},"查看"))}}]},a}return i(t,e),g(t,[{key:"componentDidMount",value:function(){this.query(0,0,1)}},{key:"query",value:function(e,t,a){if(0!=e){var s=this,l=this.state.applyPage;l.pageNum=a,k.default.request({url:t,method:"get",params:l,headers:{Authorization:"Bearer "+b,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){console.log(e.data.result.count),s.setState({dataSource:e.data.result.data,dataSourceFather:e.data.result.data,total:e.data.result.count})})}else if(0==e){var n=this,i=[],r=0,c=this.state.applyPage;c.pageNum=a,k.default.request({url:"/api/conference/summary",method:"get",params:c,headers:{Authorization:"Bearer "+b,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){r=e.data.result.count,e.data.result.data.map(function(e){i.push(e)}),n.setState({dataSource:e.data.result.data,dataSourceFather:e.data.result.data,total:r})})}}},{key:"selectStage",value:function(e){this.setState({status:e})}},{key:"changePage",value:function(e){this.query(this.state.status,I[this.state.status],e),this.setState({current:e})}},{key:"selectState",value:function(e){if(0==e){var t=this.state.applyPage;delete t.status,this.setState({applyPage:t})}else{var a=this.state.applyPage;a.status=e,this.setState({applyPage:a})}this.setState({stage:e})}},{key:"changeConsultationName",value:function(e){var t=this.state.applyPage;t.consultationName=e.target.value,this.setState({applyPage:t})}},{key:"changeUsername",value:function(e){var t=this.state.applyPage;t.username=e.target.value,this.setState({applyPage:t})}},{key:"changePhone",value:function(e){var t=this.state.applyPage;t.phone=e.target.value,this.setState({applyPage:t})}},{key:"changeStartTime",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a})}},{key:"changeHospital",value:function(e){var t=this.state.applyPage;t.hospital=e.target.value,this.setState({applyPage:t})}},{key:"changeApplicant",value:function(e){var t=this.state.applyPage;t.applicant=e.target.value,this.setState({applyPage:t})}},{key:"changeAPhone",value:function(e){var t=this.state.applyPage;t.aPhone=e.target.value,this.setState({applyPage:t})}},{key:"onChange",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a})}},{key:"render",value:function(){return E.default.createElement("div",null,E.default.createElement("div",{className:"apple_top"},E.default.createElement("h1",null,"会诊总表查询区",E.default.createElement(m.default,{onClick:this.query.bind(this,this.state.status,I[this.state.status],1),type:"primary",className:"search_btn1"},"查询")),E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊名称"),E.default.createElement(h.default,{onChange:this.changeConsultationName.bind(this),className:"search_input",size:"large",placeholder:"会诊名称"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊时间"),E.default.createElement(u.default,{size:"large",className:"search_input",onChange:this.onChange.bind(this)})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊对象"),E.default.createElement(h.default,{onChange:this.changeUsername.bind(this),className:"search_input",size:"large",placeholder:"会诊对象"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"手机号"),E.default.createElement(h.default,{onChange:this.changePhone.bind(this),className:"search_input",size:"large",placeholder:"手机号"})),E.default.createElement("li",null)),E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"所属医院"),E.default.createElement(h.default,{onChange:this.changeHospital.bind(this),className:"search_input",size:"large",placeholder:"会诊名称"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"申请人"),E.default.createElement(h.default,{onChange:this.changeApplicant.bind(this),className:"search_input",size:"large",placeholder:"申请人"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"手机号"),E.default.createElement(h.default,{onChange:this.changeAPhone.bind(this),className:"search_input",size:"large",placeholder:"会诊对象"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊状态"),E.default.createElement(y.default,{optionFilterProp:"children",className:"search_input",onChange:this.selectState.bind(this),defaultValue:"全部"},E.default.createElement(x,{value:"0"},"全部"),E.default.createElement(x,{value:"1"},"待提交"),E.default.createElement(x,{value:"2"},"待审核"),E.default.createElement(x,{value:"4"},"已退回"),E.default.createElement(x,{value:"3"},"待会诊"),E.default.createElement(x,{value:"5"},"已作废"),E.default.createElement(x,{value:"6"},"已结束"))),E.default.createElement("li",null))),E.default.createElement("div",{className:"apple_bottom"},E.default.createElement("h1",{className:"most_h1"},"列表区"),E.default.createElement(c.default,{rowKey:"id",pagination:{defaultPageSize:10,showQuickJumper:!0,onChange:this.changePage.bind(this),total:this.state.total,current:this.state.current},dataSource:this.state.dataSource,columns:this.state.columns})))}}]),t}(v.Component);t.default=S},391:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(16),a(15)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(19),a(18)),h=s(d),f=(a(13),a(17)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14);a(34);var E=a(22),N=s(E),_=a(1),k=s(_),x=localStorage.getItem("robertUserName"),b={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"0-0-0 00:00:00.000",username:"",phone:"",identification:"",birthday:"0-0-0 00:00:00.000",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"2999-12-31 00:00:00.000",diagnosis:"",doc:"",advice:[{hospital:"",doctor:"",adviceTime:"2999-12-31 00:00:00.000",advice:"","处方":[{prescriptionTime:"2999-12-31 00:00:00.000",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200},I="YYYY-MM-DD HH:mm:ss",D=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:1,getData:b,mockData:[],targetTitle:[],targetKeys:[],history1:b.case[0],history1Index:0,history2:b.case[0].advice[0]?b.case[0].advice[0]:[],columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"}],fileListColumns:[{title:"文件名",dataIndex:"diagnosis",key:"diagnosis"},{title:"大小",dataIndex:"doctorName",key:"doctorName"},{title:"上传时间",dataIndex:"diagnosisTime",key:"diagnosisTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t){return g.default.createElement("span",null,g.default.createElement("a",{href:t.doc,download:t.diagnosis},"下载"),g.default.createElement("a",{href:t.doc},"查看"))}}],fileList:[],checkColumns:[{title:"审核时间",dataIndex:"checkTime",key:"checkTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"assistantName",key:"assistantName",width:"126px"},{title:"审核结果",dataIndex:"checkResult",key:"checkResult",width:"126px"},{title:"退回原因",dataIndex:"returnReason",key:"returnReason"}],conclusionColumns:[{title:"时间",dataIndex:"creatTime",key:"creatTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"附件名称",dataIndex:"docName",key:"docName",width:"126px"},{title:"操作人",dataIndex:"doctorName",key:"doctorName",width:"126px"},{title:"会诊结论",dataIndex:"message",key:"message"},{title:"操作",key:"action",render:function(e,t){return g.default.createElement("span",null,g.default.createElement("a",{href:t.doc,download:t.docName},"下载"))},width:"126px"}],conclusion:[],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},checkData:[],data:[{id:" ",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],targetdoc:[]},a}return i(t,e),p(t,[{key:"getPeople",value:function(){var e=this;N.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){var a=e.state.getData;a.consultation.hospital=t.data.result[0].hospitalName,a.consultation.applicant=t.data.result[0].applyName,console.log(a.consultation.hospital),console.log(a.consultation.applicant),e.setState({getData:a})}).catch(function(){alert("1")})}},{key:"getValue",value:function(){var e=this,t=[];N.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id},headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data;s.consultationId=1;var l=[];s.case&&0!=s.case&&0!=s.case[0].advice?s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}):(s.case=b.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}));var n=s.conclusion?s.conclusion:[],i=s.check?s.check:[],r=s.case?s.case[0]:null,c=r&&r.advice?r.advice[0]:null;console.log(r,c,l),e.setState({getData:s,history1:r,history2:c,targetdoc:s.doctor?s.doctor:[],data:l,conclusion:n,checkData:i}),N.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=a.data.result,r=0;r<i.length;r++){var c={key:i[r].doctorId,title:i[r].doctorName,description:i[r].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(i[r].doctorId)};c.chosen&&s.push(c.key),l.push(c)}i.map(function(e,t){n.push(e)});for(var o=[],u=0;u<s.length;u++){var d={};d.doctor=s[u],o.push(d)}var h={};h.consultationId=e.state.consultationId,h.doctorId=o,e.setState({mockData:l,targetKeys:s,docList:i,docId:h,docKeys:s})})}).catch(function(){alert("第一请求error")})}},{key:"componentDidMount",value:function(){this.getValue()}},{key:"renderItem",value:function(e){return{label:g.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"ding",value:function(){}},{key:"startTime",value:function(e,t){console.log(t.split('"'))}},{key:"onChange",value:function(e,t){console.log(e,t)}},{key:"onCheck",value:function(e){console.log(e.currentTarget)}},{key:"changeHistory1",value:function(e){var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription?this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)}):t=null,console.log(t),this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t})}},{key:"changeHistory2",value:function(e){var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription?t.prescription.map(function(e){a.push(e)}):a=null,this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,data:a})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"newHidden"},g.default.createElement("div",{className:"cnsultation_top"},g.default.createElement("h1",null,"查看会诊"),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"隶属医院"),g.default.createElement(m.default,{value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊申请人"),g.default.createElement(m.default,{value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(m.default,{value:this.state.getData.consultation.consultationName,className:"search_input",size:"large",placeholder:"会诊名称",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(h.default,{open:!1,allowClear:!1,onChage:function(){return e.startTime()},value:(0,k.default)(this.state.getData.consultation.startTime,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊对象"),g.default.createElement(m.default,{value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"会诊对象",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{value:this.state.getData.consultation.phone,className:"search_input",size:"large",placeholder:"手机号",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"身份证号"),g.default.createElement(m.default,{value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"身份证号",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"出生日期"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.getData.consultation.birthday,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"陪护家属"),g.default.createElement(m.default,{value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号"})),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"会诊描述"),g.default.createElement(m.default,{value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4})))),g.default.createElement("div",{className:"cnsultation_bottom"},0!=this.state.history1?g.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return g.default.createElement("div",{key:a},g.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"}," 病历 ",a+1," "))}):""):"",0!=this.state.history1?g.default.createElement("div",{className:"history_detail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例编号"),g.default.createElement(m.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"病例编号"})),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例医院"),g.default.createElement(m.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"病例医院",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"主治医生"),g.default.createElement(m.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例名称"),g.default.createElement(m.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"诊治日期"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.history1.diagnosisTime,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"临床诊断"),g.default.createElement(m.default,{value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))):"",g.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return g.default.createElement("div",{key:a},g.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "))}):""),this.state.history2?g.default.createElement("div",{className:"prescribeDetail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医院"),g.default.createElement(m.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",className:"search_input",size:"large",placeholder:"医嘱医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医生"),g.default.createElement(m.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",className:"search_input",size:"large",placeholder:"医嘱医生"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱时间"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",I),format:I,size:"large",className:"search_input",onChange:this.onChange})),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"医嘱"),g.default.createElement(m.default,{value:this.state.history2.advice?this.state.history2.advice:"",className:"search_input",type:"textarea",rows:4}))),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),this.state.data?g.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}):g.default.createElement("li",{className:"search_input"})))):"",g.default.createElement("div",{className:"record"},g.default.createElement("span",{className:"history_sp1 record_sp1"}," 病历资料 "),g.default.createElement("span",{className:"history_btn1"}," 无病历资料 ")),this.state.targetdoc&&0!=this.state.targetdoc?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"会诊医生"),g.default.createElement(m.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",type:"textarea",rows:4}))):"",this.state.checkData.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"审核记录"),g.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.checkColumns,dataSource:this.state.checkData}))):"",this.state.conclusion.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"结论记录"),g.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.conclusionColumns,dataSource:this.state.conclusion}))):"",g.default.createElement("div",{className:"btn_save"},g.default.createElement("div",{className:"btn_save_index"},g.default.createElement(v.Link,{to:"consulationTables/consulation"},g.default.createElement(c.default,{type:"primary"},"返回"))))))}}]),t}(y.Component);t.default=D},392:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(21),a(20)),c=s(r),o=(a(19),a(18)),u=s(o),d=(a(13),a(17)),h=s(d),f=(a(16),a(15)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14),E=a(1),N=(s(E),a(22)),_=s(N),k=localStorage.getItem("robertUserName"),x=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));!function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()}();return a.state={applyPage:{pageSize:10,consultationName:"",username:"",phone:"",status:5,startTime:""},total:10,current:1,dataSource:[],columns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return g.default.createElement("span",null,a+1)}},{title:"会诊名称",dataIndex:"title",key:"title"},{title:"会诊时间",dataIndex:"startTime",key:"startTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"会诊对象",dataIndex:"username",key:"username"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"作废时间",dataIndex:"modifyAt",key:"modifyAt",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,a){return g.default.createElement("span",{key:t.id},g.default.createElement(v.Link,{to:"invalid/lookInvalid/"+t.id},"查看"))}}]},a}return i(t,e),p(t,[{key:"componentDidMount",value:function(){this.query(1)}},{key:"changePage",value:function(e){this.query(e),this.setState({current:e})}},{key:"changeConsultationName",value:function(e){var t=this.state.applyPage;t.consultationName=e.target.value,this.setState({applyPage:t})}},{key:"changePhone",value:function(e){var t=this.state.applyPage;t.username=e.target.value,this.setState({applyPage:t})}},{key:"changeUserName",value:function(e){var t=this.state.applyPage;t.phone=e.target.value,this.setState({applyPage:t})}},{key:"query",value:function(e){var t=this,a=this.state.applyPage;a.pagenum=e,_.default.request({url:"/api/conference/applyPageList",method:"get",params:a,headers:{Authorization:"Bearer "+k,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){var a=e.data.result?e.data.result.data:[];t.setState({dataSource:a,total:e.data.result.count})})}},{key:"onChange",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",null,g.default.createElement("div",{className:"apple_top"},g.default.createElement("h1",null,"作废会诊查询区",g.default.createElement(m.default,{onClick:function(){return e.query()},type:"primary",className:"search_btn1"},"查询")),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(h.default,{onChange:this.changeConsultationName.bind(this),className:"search_input",size:"large",placeholder:"会诊名称"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(u.default,{size:"large",className:"search_input",onChange:this.onChange.bind(this)})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊对象"),g.default.createElement(h.default,{onChange:this.changeUserName.bind(this),className:"search_input",size:"large",placeholder:"会诊对象"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(h.default,{onChange:this.changePhone.bind(this),className:"search_input",size:"large",placeholder:"手机号"})))),g.default.createElement("div",{className:"apple_bottom"},g.default.createElement("h1",{className:"most_h1"},"列表区"),g.default.createElement(c.default,{pagination:{defaultPageSize:10,showQuickJumper:!0,onChange:this.changePage.bind(this),total:this.state.total,current:this.state.current},rowKey:"id",dataSource:this.state.dataSource,columns:this.state.columns})))}}]),t}(y.Component);t.default=x},393:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(16),a(15)),c=s(r),o=(a(21),a(20)),u=s(o),d=(a(19),a(18)),h=s(d),f=(a(13),a(17)),m=s(f),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),y=a(0),g=s(y),v=a(14);a(34);var E=a(22),N=s(E),_=a(1),k=s(_),x=localStorage.getItem("robertUserName"),b={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"0-0-0 00:00:00.000",username:"",phone:"",identification:"",birthday:"0-0-0 00:00:00.000",famliyName:"",familyPhone:"",content:""},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"2999-12-31 00:00:00.000",diagnosis:"",doc:"",advice:[{hospital:"",doctor:"",adviceTime:"2999-12-31 00:00:00.000",advice:"","处方":[{prescriptionTime:"2999-12-31 00:00:00.000",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200},I="YYYY-MM-DD HH:mm:ss",D=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:1,getData:b,mockData:[],targetTitle:[],targetKeys:[],history1:b.case[0],history1Index:0,history2:b.case[0].advice[0]?b.case[0].advice[0]:[],columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"}],fileListColumns:[{title:"文件名",dataIndex:"diagnosis",key:"diagnosis"},{title:"大小",dataIndex:"doctorName",key:"doctorName"},{title:"上传时间",dataIndex:"diagnosisTime",key:"diagnosisTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t){return g.default.createElement("span",null,g.default.createElement("a",{href:t.doc,download:t.diagnosis},"下载"),g.default.createElement("a",{href:t.doc},"查看"))}}],fileList:[],checkColumns:[{title:"审核时间",dataIndex:"checkTime",key:"checkTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"assistantName",key:"assistantName",width:"126px"},{title:"审核结果",dataIndex:"checkResult",key:"checkResult",width:"126px"},{title:"退回原因",dataIndex:"returnReason",key:"returnReason"}],conclusionColumns:[{title:"时间",dataIndex:"creatTime",key:"creatTime",render:function(e){return g.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"doctorName",key:"doctorName",width:"126px"},{title:"会诊结论",dataIndex:"message",key:"message"},{title:"操作",key:"action",render:function(e,t){return g.default.createElement("span",null,g.default.createElement("a",{href:t.doc,download:t.docName},"下载"))},width:"126px"}],conclusion:[],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},checkData:[],data:[{id:" ",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],docKeys:[],docId:[],targetdoc:[]},a}return i(t,e),p(t,[{key:"getPeople",value:function(){var e=this;N.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){var a=e.state.getData;a.consultation.hospital=t.data.result[0].hospitalName,a.consultation.applicant=t.data.result[0].applyName,console.log(a.consultation.hospital),console.log(a.consultation.applicant),e.setState({getData:a})}).catch(function(){alert("1")})}},{key:"getValue",value:function(){var e=this,t=[];N.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id},headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data;s.consultationId=1;var l=[];s.case&&0!=s.case?(0!=s.case[0].advice&&s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}),s.case[0].file&&s.case[0].file):(s.case=b.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}));var n=s.conclusion?s.conclusion:[],i=s.check?s.check:[];e.setState({getData:s,history1:s.case[0],history2:s.case[0].advice?a.data.case[0].advice[0]:null,targetdoc:a.data.doctor,data:l,conclusion:n,checkData:i}),N.default.request({url:"/api/conference/doctor",method:"get",headers:{Authorization:"Bearer "+x,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){for(var s=[],l=[],n=[],i=a.data.result,r=0;r<i.length;r++){var c={key:i[r].doctorId,title:i[r].doctorName,description:i[r].hospitalName,chosen:function(e){return t.indexOf(e)>-1}(i[r].doctorId)};c.chosen&&s.push(c.key),l.push(c)}i.map(function(e,t){n.push(e)});for(var o=[],u=0;u<s.length;u++){var d={};d.doctor=s[u],o.push(d)}var h={};h.consultationId=e.state.consultationId,h.doctorId=o,e.setState({mockData:l,targetKeys:s,docList:i,docId:h,docKeys:s})})}).catch(function(){alert("第一请求error")})}},{key:"componentDidMount",value:function(){this.getValue()}},{key:"renderItem",value:function(e){return{label:g.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"ding",value:function(){}},{key:"startTime",value:function(e,t){console.log(t.split('"'))}},{key:"onChange",value:function(e,t){console.log(e,t)}},{key:"onCheck",value:function(e){console.log(e.currentTarget)}},{key:"changeHistory1",value:function(e){var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription?this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)}):t=null,console.log(t),this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t})}},{key:"changeHistory2",value:function(e){var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription?t.prescription.map(function(e){a.push(e)}):a=null,this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,data:a})}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"newHidden"},g.default.createElement("div",{className:"cnsultation_top"},g.default.createElement("h1",null,"查看会诊"),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"隶属医院"),g.default.createElement(m.default,{value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊申请人"),g.default.createElement(m.default,{value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊名称"),g.default.createElement(m.default,{value:this.state.getData.consultation.consultationName,className:"search_input",size:"large",placeholder:"会诊名称",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊时间"),g.default.createElement(h.default,{open:!1,allowClear:!1,onChage:function(){return e.startTime()},value:(0,k.default)(this.state.getData.consultation.startTime,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"会诊对象"),g.default.createElement(m.default,{value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"会诊对象",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{value:this.state.getData.consultation.phone,className:"search_input",size:"large",placeholder:"手机号",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"身份证号"),g.default.createElement(m.default,{value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"身份证号",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"出生日期"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.getData.consultation.birthday,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"陪护家属"),g.default.createElement(m.default,{value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"手机号"),g.default.createElement(m.default,{value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号"})),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"会诊描述"),g.default.createElement(m.default,{value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4})))),g.default.createElement("div",{className:"cnsultation_bottom"},g.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return g.default.createElement("div",{key:a},g.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"},"病历 ",a+1," "))}):""),g.default.createElement("div",{className:"history_detail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例编号"),g.default.createElement(m.default,{value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"病例编号"})),g.default.createElement("li",null),g.default.createElement("li",null),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例医院"),g.default.createElement(m.default,{value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"病例医院",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"主治医生"),g.default.createElement(m.default,{value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"病例名称"),g.default.createElement(m.default,{value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",required:!0})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"诊治日期"),g.default.createElement(h.default,{open:!1,allowClear:!1,value:(0,k.default)(this.state.history1.diagnosisTime,I),format:I,size:"large",className:"search_input",onChange:this.onChange}))),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"临床诊断"),g.default.createElement(m.default,{value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))),this.state.history1.advice.length>0?g.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return g.default.createElement("div",{key:a},g.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "))}):""):"",this.state.history2?g.default.createElement("div",{className:"prescribeDetail"},g.default.createElement("ul",{className:"search_ul"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医院"),g.default.createElement(m.default,{value:this.state.history2.hospital?this.state.history2.hospital:"",className:"search_input",size:"large",placeholder:"医嘱医院"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱医生"),g.default.createElement(m.default,{value:this.state.history2.doctor?this.state.history2.doctor:"",className:"search_input",size:"large",placeholder:"医嘱医生"})),g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex"},"医嘱时间"),g.default.createElement(h.default,{allowClear:!1,value:(0,k.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",I),format:I,size:"large",className:"search_input"})),g.default.createElement("li",null)),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"most_flex1"},"医嘱"),g.default.createElement(m.default,{value:this.state.history2.advice?this.state.history2.advice:"",className:"search_input",type:"textarea",rows:4}))),g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",null,g.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),this.state.data?g.default.createElement(u.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}):g.default.createElement("li",{className:"search_input"})))):"",this.state.fileList?g.default.createElement("div",{className:"record"},g.default.createElement("span",{className:"history_sp1 record_sp1"}," 病历资料 "),g.default.createElement(u.default,{rowKey:"id",className:"fileList",columns:this.state.fileListColumns,dataSource:this.state.fileList})):"",this.state.targetdoc&&0!=this.state.targetdoc?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"会诊医生"),g.default.createElement(m.default,{value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",type:"textarea",rows:4}))):"",this.state.checkData.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"审核记录"),g.default.createElement(u.default,{className:"search_input",columns:this.state.checkColumns,dataSource:this.state.checkData}))):"",this.state.conclusion.length>0?g.default.createElement("ul",{className:"search_ul2"},g.default.createElement("li",{className:"search_li_last"},g.default.createElement("span",{className:"one_title"},"结论记录"),g.default.createElement(u.default,{className:"search_input",columns:this.state.conclusionColumns,dataSource:this.state.conclusion}))):"",g.default.createElement("div",{className:"btn_save"},g.default.createElement("div",{className:"btn_save_index"},g.default.createElement(v.Link,{to:"invalid/invalid"},g.default.createElement(c.default,{type:"primary"},"返回"))))))}}]),t}(y.Component);t.default=D},394:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(21),a(20)),c=s(r),o=(a(19),a(18)),u=s(o),d=(a(13),a(17)),h=s(d),f=(a(16),a(15)),m=s(f),p=(a(107),a(84)),y=s(p),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),v=a(0),E=s(v),N=a(14);a(75);var _=a(50),k=s(_),x=a(1),b=(s(x),a(22)),I=s(b),D=function(){var e=new Date,t=e.getFullYear();t<10&&(t="0"+t);var a=e.getMonth()+1;a<10&&(a="0"+a);var s=e.getDate();s<10&&(s="0"+s);var l=e.getHours();l<10&&(l="0"+l);var n=e.getMinutes();n<10&&(n="0"+n);var i=e.getSeconds();return i<10&&(i="0"+i),t+"-"+a+"-"+s+" "+l+":"+n+":"+i}(),S=localStorage.getItem("robertUserName"),T=y.default.Option,C=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.default.Option;return a.state={applyPage:{pageSize:10,status:"3",consultationName:"",username:"",phone:"",startTime:"",hospital:"",applicant:"",aPhone:"",stat:""},total:10,current:1,startTime:D,columns:[{title:"序号",dataIndex:"id",key:"id",render:function(e,t,a){return E.default.createElement("span",null,a+1)}},{title:"会诊名称",dataIndex:"consultationName",key:"consultationName"},{title:"会诊时间",dataIndex:"startTime",key:"startTime",render:function(e){return E.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"所属医院",dataIndex:"hospital",key:"hospital"},{title:"会诊对象",dataIndex:"username",key:"username"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"申请人",dataIndex:"applicant",key:"applicant"},{title:"手机号",dataIndex:"aPhone",key:"aPhone"},{title:"会诊状态",dataIndex:"stat",key:"stat",render:function(e,t){return E.default.createElement("span",null,"已结束"===e?"已结束":k.default.Calculation(t.startTime.split("T").join(" "),D)?"进行中":"未开始")}},{title:"确认时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e){return E.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))}},{title:"操作",key:"action",render:function(e,t,a){return E.default.createElement("span",{key:t.id},E.default.createElement(N.Link,{to:"task/lookConsultationTask/"+t.id},"查看")," ",t.conId?E.default.createElement("a",{disabled:!k.default.Calculation(t.startTime.split("T").join(" "),D)||"已结束"===t.stat,href:"http://192.168.100.133:8787/conference/#/mainFrame/personMeeting/addMeeting/"+t.conId+"/1"},"参加"):"")}}],dataSource:[]},a}return i(t,e),g(t,[{key:"componentDidMount",value:function(){this.query(1)}},{key:"onChange",value:function(e,t){var a=this.state.applyPage;a.startTime=t,this.setState({applyPage:a}),this.setState({startTime:t})}},{key:"changeConsultationName",value:function(e){var t=this.state.applyPage;t.consultationName=e.target.value,this.setState({applyPage:t})}},{key:"changeUsername",value:function(e){var t=this.state.applyPage;t.username=e.target.value,this.setState({applyPage:t})}},{key:"changeHospital",value:function(e){var t=this.state.applyPage;t.hospital=e.target.value,this.setState({applyPage:t})}},{key:"changePhone",value:function(e){var t=this.state.applyPage;t.phone=e.target.value,this.setState({applyPage:t})}},{key:"changeApplicant",value:function(e){var t=this.state.applyPage;t.applicant=e.target.value,this.setState({applyPage:t})}},{key:"changeaPhone",value:function(e){var t=this.state.applyPage;t.aPhone=e.target.value,this.setState({applyPage:t})}},{key:"changeStat",value:function(){}},{key:"changePage",value:function(e){this.query(e),this.setState({current:e})}},{key:"handleChange",value:function(e){console.log(e);var t=this.state.applyPage;t.stat=e,this.setState({applyPage:t})}},{key:"query",value:function(e){var t=this,a=this.state.applyPage;"1"===a.stat&&delete a.stat,a.pageNum=e,I.default.request({url:"/api/conference/mission/pageList",method:"get",params:a,headers:{Authorization:"Bearer "+S,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){var a=e.data.result.data;t.setState({dataSource:a,total:e.data.result.count})})}},{key:"render",value:function(){var e=this;return E.default.createElement("div",null,E.default.createElement("div",{className:"apple_top"},E.default.createElement("h1",null,"查询区",E.default.createElement(m.default,{type:"primary",onClick:function(){return e.query()},className:"search_btn1"},"查询")),E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊名称"),E.default.createElement(h.default,{value:this.state.applyPage.consultationName,onChange:this.changeConsultationName.bind(this),className:"search_input",size:"large",placeholder:"会诊名称"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊时间"),E.default.createElement(u.default,{size:"large",className:"search_input",onChange:this.onChange.bind(this)})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊对象"),E.default.createElement(h.default,{value:this.state.applyPage.username,onChange:this.changeUsername.bind(this),className:"search_input",size:"large",placeholder:"会诊对象"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"手机号"),E.default.createElement(h.default,{value:this.state.applyPage.phone,onChange:this.changePhone.bind(this),className:"search_input",size:"large",placeholder:"手机号"}))),E.default.createElement("ul",{className:"search_ul"},E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"所属医院"),E.default.createElement(h.default,{value:this.state.applyPage.hospital,onChange:this.changeHospital.bind(this),className:"search_input",size:"large",placeholder:"所属医院"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"申请人"),E.default.createElement(h.default,{value:this.state.applyPage.applicant,onChange:this.changeApplicant.bind(this),className:"search_input",size:"large",placeholder:"申请人"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"手机号"),E.default.createElement(h.default,{value:this.state.applyPage.aPhone,onChange:this.changeaPhone.bind(this),className:"search_input",size:"large",placeholder:"手机号"})),E.default.createElement("li",null,E.default.createElement("span",{className:"most_flex"},"会诊状态"),E.default.createElement(y.default,{defaultValue:"请选择",className:"search_input",onChange:this.handleChange.bind(this)},E.default.createElement(T,{value:"1"},"全部"),E.default.createElement(T,{value:"未开始"},"未开始"),E.default.createElement(T,{value:"进行中"},"进行中"),E.default.createElement(T,{value:"已结束"},"已结束"))))),E.default.createElement("div",{className:"apple_bottom"},E.default.createElement("h1",{className:"most_h1"},"列表区"),E.default.createElement(c.default,{pagination:{defaultPageSize:10,showQuickJumper:!0,onChange:this.changePage.bind(this),total:this.state.total,current:this.state.current},rowKey:"id",dataSource:this.state.dataSource,columns:this.state.columns})))}}]),t}(v.Component);t.default=C},395:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(69),a(68)),c=s(r),o=(a(16),a(15)),u=s(o),d=(a(67),a(24)),h=s(d),f=(a(21),a(20)),m=s(f),p=(a(19),a(18)),y=s(p),g=(a(13),a(17)),v=s(g),E=(a(53),a(52)),N=s(E),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),k=a(0),x=s(k);a(14);a(34),a(91);var b=a(22),I=s(b),D=a(50),S=s(D),T=a(1),C=s(T),w=localStorage.getItem("robertUserName"),P=function(){var e=new Date,t=e.getFullYear();t<10&&(t="0"+t);var a=e.getMonth()+1;a<10&&(a="0"+a);var s=e.getDate();s<10&&(s="0"+s);var l=e.getHours();l<10&&(l="0"+l);var n=e.getMinutes();n<10&&(n="0"+n);var i=e.getSeconds();return i<10&&(i="0"+i),t+"-"+a+"-"+s+" "+l+":"+n+":"+i}(),O={consultation:{hospital:"",applicant:"",consultationName:"",startTime:"2017-04-17",username:"",phone:"",identification:"",birthday:"0-0-0 00:00:00.000",famliyName:"",familyPhone:"",content:"",stat:0},case:[{sn:"",hospital:"",doctor:"",name:"",diagnosisTime:"2999-12-31 00:00:00.000",diagnosis:"",doc:"",advice:[{hospital:"",doctor:"",adviceTime:"2999-12-31 00:00:00.000",advice:"","处方":[{prescriptionTime:"2999-12-31 00:00:00.000",doctorName:"",medicineTime:"",total:"",singleDose:"",frequency:""}]}]}],doctor:[],code:200};N.default.config({top:300,duration:2});var z="YYYY-MM-DD HH:mm:ss",q=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={consultationId:a.props.params.id.toString(),userId:null,getData:O,mockData:[],targetTitle:[],targetKeys:[],history1:O.case[0],history1Index:0,history2:O.case[0].advice[0]?O.case[0].advice[0]:[],columns:[{title:"开方时间",dataIndex:"prescriptionTime",key:"prescriptionTime"},{title:"开方医生姓名",dataIndex:"doctorName",key:"doctorName"},{title:"药品名称",dataIndex:"medicineTime",key:"medicineTime"},{title:"总量",dataIndex:"total",key:"total"},{title:"单次用量",dataIndex:"singleDose",key:"singleDose"},{title:"频次",dataIndex:"frequency",key:"frequency"}],fileListColumns:[{title:"文件名",dataIndex:"diagnosis",key:"diagnosis"},{title:"大小",dataIndex:"doctorName",key:"doctorName"},{title:"上传时间",dataIndex:"diagnosisTime",key:"diagnosisTime"},{title:"操作",key:"action",render:function(e,t){return x.default.createElement("span",null,x.default.createElement("a",{href:t.doc,download:t.diagnosis},"下载"),x.default.createElement("a",{href:t.doc},"查看"))}}],fujianText:"",meetingId:null,fileList:[],checkColumns:[{title:"审核时间",dataIndex:"checkTime",key:"checkTime",render:function(e){return x.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"assistantName",key:"assistantName",width:"114px"},{title:"审核结果",dataIndex:"checkResult",key:"checkResult",width:"114px"},{title:"退回原因",dataIndex:"returnReason",key:"returnReason"}],showJoin:!1,conclusionColumns:[{title:"时间",dataIndex:"creatTime",key:"creatTime",render:function(e){return x.default.createElement("span",null,e.split("T").join(" ").split(".").splice(0,1))},width:"126px"},{title:"操作人",dataIndex:"doctorName",key:"doctorName",width:"114px"},{title:"附件",dataIndex:"docName",key:"docName",width:"124px"},{title:"会诊结论",dataIndex:"message",key:"message"},{title:"操作",key:"action",render:function(e,t,s){return x.default.createElement("span",null,x.default.createElement("a",{href:t.doc,download:t.docName},"下载"),x.default.createElement("span",null,"  "),t.doctorId===a.state.doctorId?x.default.createElement("a",{onClick:a.deleteDoc.bind(a,t.id,s)},"删除"):"")},width:"114px"}],conclusion:[],oldData:{id:"0",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"},checkData:[],data:[{id:" ",prescriptionTime:"-",doctorName:"-",medicineTime:"-",total:"-",singleDose:"-",frequency:"-"}],docList:[],doctorId:[],targetdoc:[],joinTo:!1,showCloseMeeting:!1,isShow:!1,fileUrl:null,fileName:null},a}return i(t,e),_(t,[{key:"deleteDoc",value:function(e,t){var a=this;I.default.request({url:"/api/conference/delete/conclusion",method:"get",params:{id:e.toString()},headers:{Authorization:"Bearer "+w,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){N.default.success("删除成功");var s=a.state.getData,l=a.state.conclusion;l.splice(t,1),s.conclusion=l,a.setState({getData:s,conclusion:l})}).catch(function(){})}},{key:"getPeople",value:function(){var e=this;I.default.request({url:"/api/conference/selectHosAndApply",method:"get",headers:{Authorization:"Bearer "+w,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){var a=e.state.getData;a.consultation.hospital=t.data.result[0].hospitalName,a.consultation.applicant=t.data.result[0].applyName,e.setState({getData:a})}).catch(function(){})}},{key:"joinTo",value:function(e,t){var a=this;I.default.request({url:"/api/conference/jointo",method:"get",params:{userId:t},headers:{Authorization:"Bearer "+w,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){0===t.data.code&&3!==e&&a.setState({joinTo:!0})})}},{key:"getValue",value:function(){var e=this,t=[];I.default.request({url:"/api/conference/page",method:"get",params:{id:e.props.params.id},headers:{Authorization:"Bearer "+w,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){a.data.doctor.map(function(e){t.push(e.id)});var s=a.data,l=[];s.case&&0!=s.case?0!=s.case[0].advice&&s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}):(s.case=O.case,s.case[0].advice[0].prescription&&s.case[0].advice[0].prescription.map(function(e){l.push(e)}));var n=s.conclusion?s.conclusion:[],i=s.check?s.check:[];e.setState({getData:s,history1:s.case[0],history2:s.case[0].advice?a.data.case[0].advice[0]:null,targetdoc:a.data.doctor,data:l,conclusion:n,checkData:i,meetingId:s.consultation.conId,userId:s.consultation.userId,docList:s.doctor}),e.joinTo(s.consultation.stat,s.consultation.applyId.toString())}).catch(function(){})}},{key:"componentDidMount",value:function(){this.getValue();var e=this;I.default.request({url:"/api/conference/doctorId",method:"get",headers:{Authorization:"Bearer "+w,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(t){e.setState({doctorId:t.data.result[0].doctorId})})}},{key:"returnList",value:function(){location.hash="/check/waitCheck/waitCheck"}},{key:"changeText",value:function(e){var t=this.state.fujianText;t=e.target.value,t.length>=120&&N.default.warning("结论字数120字以内"),this.setState({fujianText:t})}},{key:"huizhenjielun",value:function(){this.setState({isShow:!0})}},{key:"listReturn",value:function(){location.hash="/task/consultationTask"}},{key:"closeMeeting",value:function(){var e=this;(0,I.default)({url:"/api/conference/joinToUpdate",method:"get",params:{userId:e.state.getData.consultation.applyId,consultationId:e.state.consultationId},headers:{Authorization:"Bearer "+w,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(e){200===e.data.code?(N.default.success("结束会诊成功"),location.hash="task/consultationTask"):1===e.data.code&&N.default.error("结束会诊失败,无权限结束")}).catch(function(){N.default.error("结束会诊操作失败")})}},{key:"quxiaoFujian",value:function(){this.setState({isShow:!1})}},{key:"confirmFujian",value:function(){var e=this,t={cId:this.props.params.id,message:this.state.fujianText,fileName:this.state.fileName,url:this.state.fileUrl};return t.message?t.message.length>=120?(N.default.error("结论字数120字以内!"),!1):void(0,I.default)({url:"/api/conference/add/conclusion",method:"POST",data:t,headers:{Authorization:"Bearer "+w,"Content-Type":"application/x-www-form-urlencoded UTF-8"}}).then(function(a){N.default.success("添加会诊结论成功");var s={};s.id=a.data.result.id,s.creatTime=P,s.message=t.message,s.docName=t.fileName,s.doctorId=a.data.result.doctorId,e.state.docList.map(function(t,a){t.id===e.state.doctorId&&(s.doctorName=t.doctorName)}),s.doc=e.state.fileUrl;var l=e.state.getData,n=e.state.conclusion;l.conclusion=n,n.push(s),e.setState({conclusion:n,getData:l,isShow:!1,fujianText:""})}).catch(function(e){}):(N.default.warning("会诊结论不能为空!"),!1)}},{key:"renderItem",value:function(e){return{label:x.default.createElement("span",{className:"custom-item"},e.title," - ",e.description),value:e.title}}},{key:"changeHistory1",value:function(e){var t=[];this.state.getData.case[e].advice&&0!=this.state.getData.case[e].advice&&this.state.getData.case[e].advice[0].prescription&&0!=this.state.getData.case[e].advice[0].prescription?this.state.getData.case[e].advice[0].prescription.map(function(e){t.push(e)}):t=null,this.setState({history1:this.state.getData.case[e],history1Index:e,history2:this.state.getData.case[e].advice?this.state.getData.case[e].advice[0]:null,data:t})}},{key:"changeHistory2",value:function(e){var t=this.state.history1.advice?this.state.history1.advice[e]:null,a=[];t.prescription&&0!=t.prescription?t.prescription.map(function(e){a.push(e)}):a=null,this.setState({history2:this.state.history1.advice?this.state.history1.advice[e]:null,data:a})}},{key:"render",value:function(){var e=this,t=this,a=this.props.params.id,s={action:"/upload/consultationConclusion/"+a,headers:{Authorization:"Bearer "+w},onChange:function(e){var a=e.file;e.fileList;"uploading"!==a.status&&(N.default.success("附件上传成功!"),t.setState({fileUrl:a.response.result[0].url,fileName:a.response.result[0].fileName}))},defaultFileList:[]};return x.default.createElement("div",{className:"newHidden"},x.default.createElement("div",{className:"cnsultation_top"},x.default.createElement("h1",null,"会诊任务"),x.default.createElement("ul",{className:"search_ul"},x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"隶属医院"),x.default.createElement(v.default,{readOnly:!0,value:this.state.getData.consultation.hospitalname,className:"search_input",size:"large",placeholder:"隶属医院"})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"会诊申请人"),x.default.createElement(v.default,{readOnly:!0,value:this.state.getData.consultation.applyName,className:"search_input",size:"large",placeholder:"会诊申请人"})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"会诊名称"),x.default.createElement(v.default,{readOnly:!0,value:this.state.getData.consultation.consultationName,className:"search_input",size:"large",placeholder:"会诊名称",required:!0})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"会诊时间"),x.default.createElement(y.default,{open:!1,onChage:function(){return e.startTime()},value:(0,C.default)(this.state.getData.consultation.startTime,z),format:z,size:"large",className:"search_input",onChange:this.onChange}))),x.default.createElement("ul",{className:"search_ul"},x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"会诊对象"),x.default.createElement(v.default,{readOnly:!0,value:this.state.getData.consultation.username,className:"search_input",size:"large",placeholder:"会诊对象",required:!0})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"手机号"),x.default.createElement(v.default,{readOnly:!0,value:this.state.getData.consultation.phone,className:"search_input",size:"large",placeholder:"手机号",required:!0})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"身份证号"),x.default.createElement(v.default,{readOnly:!0,value:this.state.getData.consultation.identification,className:"search_input",size:"large",placeholder:"身份证号",required:!0})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"出生日期"),x.default.createElement(y.default,{open:!1,value:(0,C.default)(this.state.getData.consultation.birthday,z),format:z,size:"large",className:"search_input",onChange:this.onChange}))),x.default.createElement("ul",{className:"search_ul"},x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"陪护家属"),x.default.createElement(v.default,{readOnly:!0,value:this.state.getData.consultation.famliyName,className:"search_input",size:"large",placeholder:"陪护家属"})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"手机号"),x.default.createElement(v.default,{readOnly:!0,value:this.state.getData.consultation.familyPhone,className:"search_input",size:"large",placeholder:"手机号"})),x.default.createElement("li",null),x.default.createElement("li",null)),x.default.createElement("ul",{className:"search_ul2"},x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex1"},"会诊描述"),x.default.createElement(v.default,{readOnly:!0,value:this.state.getData.consultation.content,className:"search_input",type:"textarea",rows:4})))),x.default.createElement("div",{className:"cnsultation_bottom"},x.default.createElement("div",{className:"history"},this.state.getData.case?this.state.getData.case.map(function(t,a){return x.default.createElement("div",{key:a},x.default.createElement("span",{onClick:e.changeHistory1.bind(e,a),className:"history_sp1"},"病历 ",a+1," "))}):""),x.default.createElement("div",{className:"history_detail"},x.default.createElement("ul",{className:"search_ul"},x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"病例编号"),x.default.createElement(v.default,{readOnly:!0,value:this.state.history1.sn,className:"search_input",size:"large",placeholder:"病例编号"})),x.default.createElement("li",null),x.default.createElement("li",null),x.default.createElement("li",null)),x.default.createElement("ul",{className:"search_ul"},x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"病例医院"),x.default.createElement(v.default,{readOnly:!0,value:this.state.history1.hospital,className:"search_input",size:"large",placeholder:"病例医院",required:!0})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"主治医生"),x.default.createElement(v.default,{readOnly:!0,value:this.state.history1.doctor,className:"search_input",size:"large",placeholder:"主治医生",required:!0})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"病例名称"),x.default.createElement(v.default,{readOnly:!0,value:this.state.history1.name,className:"search_input",size:"large",placeholder:"病例名称",required:!0})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"诊治日期"),x.default.createElement(y.default,{open:!1,value:(0,C.default)(this.state.history1.diagnosisTime,z),format:z,size:"large",className:"search_input",onChange:this.onChange}))),x.default.createElement("ul",{className:"search_ul2"},x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex1"},"临床诊断"),x.default.createElement(v.default,{readOnly:!0,value:this.state.history1.diagnosis,className:"search_input",type:"textarea",rows:4})))),this.state.history1.advice.length>0?x.default.createElement("div",{className:"prescribe"},this.state.history1.advice?this.state.history1.advice.map(function(t,a){return x.default.createElement("div",{key:a},x.default.createElement("span",{onClick:e.changeHistory2.bind(e,a),className:"prescribe_sp1"}," 医嘱",a+1," "))}):""):"",this.state.history2?x.default.createElement("div",{className:"prescribeDetail"},x.default.createElement("ul",{className:"search_ul"},x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"医嘱医院"),x.default.createElement(v.default,{readOnly:!0,value:this.state.history2.hospital?this.state.history2.hospital:"",className:"search_input",size:"large",placeholder:"医嘱医院"})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"医嘱医生"),x.default.createElement(v.default,{readOnly:!0,value:this.state.history2.doctor?this.state.history2.doctor:"",className:"search_input",size:"large",placeholder:"医嘱医生"})),x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex"},"医嘱时间"),x.default.createElement(y.default,{open:!1,value:(0,C.default)(this.state.history2.adviceTime?this.state.history2.adviceTime:"",z),format:z,size:"large",className:"search_input",onChange:this.onChange})),x.default.createElement("li",null)),x.default.createElement("ul",{className:"search_ul2"},x.default.createElement("li",null,x.default.createElement("span",{className:"most_flex1"},"医嘱"),x.default.createElement(v.default,{readOnly:!0,value:this.state.history2.advice?this.state.history2.advice:"",className:"search_input",type:"textarea",rows:4}))),x.default.createElement("ul",{className:"search_ul2"},x.default.createElement("li",null,x.default.createElement("span",{className:"search_ul2_sp1 most_flex1"},"处方"),this.state.data?x.default.createElement(m.default,{rowKey:"id",className:"search_input",columns:this.state.columns,dataSource:this.state.data}):x.default.createElement("li",{className:"search_input"})))):"",x.default.createElement("div",{className:"record"},x.default.createElement("span",{className:"history_sp1 record_sp1"}," 病历资料 "),this.state.fileList.length>0?x.default.createElement(m.default,{rowKey:"id",dataSource:this.state.fileList,columns:this.state.fileListColumns}):x.default.createElement("span",{className:"history_btn1"}," 无病历资料 ")),this.state.targetdoc&&0!=this.state.targetdoc?x.default.createElement("ul",{className:"search_ul2"},x.default.createElement("li",{className:"search_li_last"},x.default.createElement("span",{className:"one_title"},"会诊医生"),x.default.createElement(v.default,{readOnly:!0,value:this.state.targetdoc.map(function(e){return e.doctorName}),className:"search_input",type:"textarea",rows:4}))):"",this.state.checkData.length>0?x.default.createElement("ul",{className:"search_ul2"},x.default.createElement("li",{className:"search_li_last"},x.default.createElement("span",{className:"one_title"},"审核记录"),x.default.createElement(m.default,{rowKey:"id",className:"search_input",columns:this.state.checkColumns,dataSource:this.state.checkData}))):"",x.default.createElement("div",{className:"conclusion_show"},x.default.createElement("span",{className:"one_title"},"结论记录"),x.default.createElement("span",{className:"one_title"},x.default.createElement("button",{className:"btn_huizhen",onClick:function(){return e.huizhenjielun()}},"新增结论")),x.default.createElement(m.default,{rowKey:"id",className:"search_input search_input_task",columns:this.state.conclusionColumns,dataSource:this.state.conclusion})),this.state.isShow?x.default.createElement("div",{className:"huizhenDivDiv"},x.default.createElement("div",{className:"huizhenDiv"},x.default.createElement(v.default,{type:"textarea",value:this.state.fujianText,onChange:this.changeText.bind(this),rows:4,placeholder:"请输入会诊结论"}),x.default.createElement(c.default,s,x.default.createElement(u.default,{className:"history_btn1"},x.default.createElement(h.default,{type:"upload"}))),x.default.createElement("ul",null,this.state.fileList.map(function(e,t){return x.default.createElement("li",{key:t},e.name)})),x.default.createElement("div",{className:"btn_fujian"},x.default.createElement("button",{onClick:function(){return e.confirmFujian()}},"确认")," ",x.default.createElement("button",{onClick:function(){return e.quxiaoFujian()}},"取消")))):"",x.default.createElement("div",{className:"btn_save"},x.default.createElement("div",{className:"btn_save_index"},this.state.meetingId?x.default.createElement("a",{href:"http://192.168.100.133:8787/conference/#/mainFrame/personMeeting/addMeeting/"+this.state.meetingId+"/1"},x.default.createElement(u.default,{disabled:!S.default.Calculation(this.state.getData.consultation.startTime.split("T").join(" "),P)||3===this.state.getData.consultation.stat,type:"primary"},"参加会诊")," "):"",this.state.joinTo?x.default.createElement(u.default,{disabled:this.showCloseMeeting,onClick:this.closeMeeting.bind(this),type:"primary"},"会诊结束"):""," ",x.default.createElement(u.default,{type:"primary",onClick:function(){return e.listReturn()}},"返回")))))}}]),t}(k.Component);t.default=q},463:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){var t=e.split("/");if(ue.test(t[t.length-1]))return!0}function c(e){var t=e.split("/");return t.splice(t.length-1),t.join("/")}var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),u=a(0),d=s(u),h=a(12),f=s(h),m=a(374),p=s(m),y=a(375),g=s(y),v=a(373),E=s(v),N=a(14),_=a(378),k=s(_),x=a(379),b=s(x),I=a(380),D=s(I),S=a(376),T=s(S),C=a(377),w=s(C),P=a(381),O=s(P),z=a(383),q=s(z),j=a(382),A=s(j),L=a(392),H=s(L),M=a(393),F=s(M),R=a(390),K=s(R),U=a(391),J=s(U),B=a(50),Y=s(B),V=a(384),W=s(V),Q=a(385),$=s(Q),X=a(386),G=s(X),Z=a(387),ee=s(Z),te=a(389),ae=s(te),se=a(388),le=s(se),ne=a(394),ie=s(ne),re=a(395),ce=s(re),oe=a(104),ue=/^[0-9]+.?[0-9]*$/,de=[{id:6,route:"#/apply"},{id:6,route:"#/apply/newConsultation"},{id:6,route:"#/apply/editCnsulation"},{id:6,route:"#/apply/addConsultation"},{id:7,route:"#/apply/daiShen"},{id:7,route:"#/apply/daiShen/looked"},{id:8,route:"#/apply/return/ReturnRecord"},{id:8,route:"#/apply/return/ReturnRecord/editReturn"},{id:9,route:"#/check/waitCheck/waitCheck"},{id:9,route:"#/check/waitCheck/lookWaitCheck"},{id:10,route:"#/check/hadReturn/hadReturn"},{id:10,route:"#/check/hadReturn/lookHadReturn"},{id:11,route:"#/check/checked/checked"},{id:11,route:"#/check/checked/lookChecked"},{id:12,route:"#/task/consultationTask"},{id:12,route:"#/task/lookConsultationTask"},{id:13,route:"#/invalid/invalid"},{id:13,route:"#/invalid/lookInvalid"},{id:14,route:"#/consulationTables/consulation"},{id:14,route:"#/consulationTables/lookConsulation"}],he=function(e){function t(e){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),o(t,[{key:"componentWillMount",value:function(){Y.default.checked(),this.checkAuthorization()}},{key:"componentWillUpdate",value:function(){this.checkAuthorization()}},{key:"checkAuthorization",value:function(){if(localStorage.getItem("robertUserName")){var e=localStorage.getItem("robertUserName"),t=oe(e),a=t.permissions,s=!0,l=location.hash;"#/apply/blank"!==l&&(r(l)&&(l=c(l)),de.map(function(e){e.route===l&&-1!==a.indexOf(e.id.toString())&&(s=!1)}),s&&(location.href="http://192.168.100.133:8787/#/entrance"))}}},{key:"render",value:function(){var e=document.body.clientHeight-60,t={height:e};return d.default.createElement("div",{style:t,className:"pageBottom"},d.default.createElement(g.default,null),d.default.createElement("div",{className:"content"},this.props.children))}}]),t}(u.Component),fe=function(e){function t(e){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),o(t,[{key:"render",value:function(){return d.default.createElement("div",{id:"page"},d.default.createElement(p.default,null),d.default.createElement(N.Router,{history:N.hashHistory},d.default.createElement(N.Route,{path:"/content",component:he},d.default.createElement(N.Route,{path:"/apply/blank",component:E.default}),d.default.createElement(N.Route,{path:"/apply",component:k.default}),d.default.createElement(N.Route,{path:"/apply/daiShen",component:b.default}),d.default.createElement(N.Route,{path:"/apply/daiShen/looked/:id",component:D.default}),d.default.createElement(N.Route,{path:"/apply/return/ReturnRecord",component:q.default}),d.default.createElement(N.Route,{path:"/apply/return/ReturnRecord/editReturn/:id",component:A.default}),d.default.createElement(N.Route,{path:"/apply/newConsultation",component:T.default}),d.default.createElement(N.Route,{path:"/apply/addConsultation/:id",component:w.default}),d.default.createElement(N.Route,{path:"/apply/editCnsulation/:id",component:O.default}),d.default.createElement(N.Route,{path:"/invalid/invalid",component:H.default}),d.default.createElement(N.Route,{path:"/invalid/lookInvalid/:id",component:F.default}),d.default.createElement(N.Route,{path:"/consulationTables/consulation",component:K.default}),d.default.createElement(N.Route,{path:"/consulationTables/lookConsulation/:id",component:J.default}),d.default.createElement(N.Route,{path:"/check/waitCheck/waitCheck",component:ae.default}),d.default.createElement(N.Route,{path:"/check/waitCheck/lookWaitCheck(/:id)",component:le.default}),d.default.createElement(N.Route,{path:"/check/checked/checked",component:W.default}),d.default.createElement(N.Route,{path:"/check/checked/lookChecked(/:id)",component:$.default}),d.default.createElement(N.Route,{path:"/check/hadReturn/hadReturn",component:G.default}),d.default.createElement(N.Route,{path:"/check/hadReturn/lookHadReturn(/:id)",component:ee.default}),d.default.createElement(N.Route,{path:"/task/consultationTask",component:ie.default}),d.default.createElement(N.Route,{path:"/task/lookConsultationTask(/:id)",component:ce.default}))))}}]),t}(u.Component);f.default.render(d.default.createElement(fe,null),document.getElementById("app"))},464:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={on:function(e,t){this[e]=t},emit:function(e,t){this[e](t)}};t.default=s},50:function(e,t,a){"use strict";function s(e){return null===e||void 0===e||""===e}function l(e){return/^1[34578][0-9]{9}$/.test(e)}function n(e){return/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/.test(e)}function i(e,t){var a=new Date(e),s=new Date(t),l=a.getTime(),n=s.getTime(),i=(l-n)/1e3,r=parseInt(i/86400),c=i-24*r*60*60,o=parseInt(c/3600),u=i-24*r*60*60-60*o*60,d=parseInt(u/60);return!(r>=0&&c>=0&&o>=0&&u>=0&&d>=10)}function r(e){return/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e)}function c(e){if(!s(e)){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}}function o(){localStorage.getItem("robertUserName")||(localStorage.setItem("history",location.href),location.href=h+"/conference/#/");var e=new XMLHttpRequest;e.open("get","/api/conference/page?id=1",!0),e.onreadystatechange=function(){4===e.readyState&&401===e.status&&(localStorage.removeItem("history"),localStorage.setItem("history",location.href),location.href=h+"/conference/#/")},e.setRequestHeader("Content-Type","application/x-www-form-urlencoded UTF-8"),e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("robertUserName")),e.send()}Object.defineProperty(t,"__esModule",{value:!0});var u=a(109),d=function(e){return e&&e.__esModule?e:{default:e}}(u),h=(0,d.default)().serverAdress;t.default={mobileValidate:l,isEmpty:s,cardValidate:r,emailValidate:n,FormatDate:c,checked:o,Calculation:i}},548:function(e,t){},75:function(e,t){},759:function(e,t,a){e.exports=a.p+"f98150a4f14d4d237b31ea3952e69f45.png"},91:function(e,t){}},[463]);